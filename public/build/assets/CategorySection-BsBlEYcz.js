import{e as u,o as i,a as o,f as y,t as M,d as C,B as J,C as be,n as se,k as O,D as pe,g as oe,b as ee,p as xe,F as te,h as ae,j as ye,E as he,l as _e,q as ke,c as K}from"./app-DBsa7_sR.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ie={class:"mt-1"},$e=["value","required","minlength","maxlength","pattern","placeholder"],Ve={key:0,class:"mt-2 text-sm text-red-600"},Ce={__name:"InputText",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],pattern:String,placeholder:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(a,{emit:R}){const l=a,h=R,v=p=>{h("update:modelValue",p.target.value),h("save",l.pointId)};return(p,r)=>(i(),u("div",Ie,[o("input",{value:a.modelValue,onInput:v,type:"text",required:a.required,minlength:a.minLength,maxlength:a.maxLength,pattern:a.pattern,placeholder:a.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,$e),a.error?(i(),u("p",Ve,M(a.error),1)):y("",!0)]))}},Se={class:"mt-1"},Re=["value","required","min","max","step","placeholder"],Me={key:0,class:"mt-2 text-sm text-red-600"},Ne={__name:"InputNumber",props:{modelValue:[String,Number],required:Boolean,min:[String,Number],max:[String,Number],step:[String,Number],placeholder:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(a,{emit:R}){const l=a,h=R,v=p=>{const r=p.target.value;h("update:modelValue",r),h("save",l.pointId)};return(p,r)=>(i(),u("div",Se,[o("input",{value:a.modelValue,onInput:v,type:"number",required:a.required,min:a.min,max:a.max,step:a.step,placeholder:a.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,Re),a.error?(i(),u("p",Me,M(a.error),1)):y("",!0)]))}},Ue={class:"mt-1"},qe=["value","required","min","max"],Le={key:0,class:"mt-2 text-sm text-red-600"},Pe={__name:"InputDate",props:{modelValue:String,required:Boolean,minDate:String,maxDate:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(a,{emit:R}){const l=a,h=R,v=p=>{h("update:modelValue",p.target.value),h("save",l.pointId)};return(p,r)=>(i(),u("div",Ue,[o("input",{value:a.modelValue,onChange:v,type:"date",required:a.required,min:a.minDate,max:a.maxDate,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,qe),a.error?(i(),u("p",Le,M(a.error),1)):y("",!0)]))}},Be={class:"mt-1"},Fe=["value","required"],je={key:0,class:"mt-2 text-sm text-red-600"},Te={__name:"InputSelect",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(a,{emit:R}){const l=a,h=R,v=p=>{h("update:modelValue",p.target.value),h("save",l.pointId)};return(p,r)=>(i(),u("div",Be,[o("select",{value:a.modelValue,onChange:v,required:a.required,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},r[0]||(r[0]=[o("option",{value:"",disabled:""},"Select status",-1),o("option",{value:"good"},"Good",-1),o("option",{value:"bad"},"Bad",-1),o("option",{value:"na"},"N/A",-1)]),40,Fe),a.error?(i(),u("p",je,M(a.error),1)):y("",!0)]))}},De=Q(Te,[["__scopeId","data-v-c34a74db"]]),We={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm"},Ae={class:"bg-white rounded-xl p-8 w-full max-w-sm mx-auto shadow-2xl transform transition-all duration-300 scale-100 opacity-100"},Ee={class:"flex flex-row space-x-4 mb-6"},ze={class:"mt-4 text-right"},He={__name:"ImageSourceOptionsModal",props:{show:{type:Boolean,default:!1}},emits:["close","open-webcam","trigger-gallery"],setup(a){return(R,l)=>a.show?(i(),u("div",We,[o("div",Ae,[l[5]||(l[5]=o("h3",{class:"text-xl font-bold text-gray-800 mb-6 text-center"},"Pilih Sumber Gambar",-1)),o("div",Ee,[o("button",{onClick:l[0]||(l[0]=h=>R.$emit("open-webcam")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},l[3]||(l[3]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),o("span",{class:"text-sm font-medium"},"Kamera",-1)])),o("button",{onClick:l[1]||(l[1]=h=>R.$emit("trigger-gallery")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},l[4]||(l[4]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),o("span",{class:"text-sm font-medium"},"Galeri",-1)]))]),o("div",ze,[o("button",{onClick:l[2]||(l[2]=h=>R.$emit("close")),class:"px-5 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-colors duration-200 ease-in-out"}," Batal ")])])])):y("",!0)}},Ge={key:0,class:"fixed inset-0 z-40 p-0 webcam-modal-container"},Xe={class:"webcam-content-box"},Je={class:"webcam-header"},Ke={class:"inspection-point-name"},Oe={key:0,class:"screen-flash-overlay"},Ye={class:"webcam-footer"},Qe={class:"camera-controls"},Ze=["disabled"],et={__name:"WebcamModal",props:{show:Boolean,aspectRatio:Number,settings:Object,inspectionPoint:String},emits:["close","photoCaptured"],setup(a,{emit:R}){const l=a,h=R,v=C(null),p=C(null);let r=null,b=null;const d=C("environment"),n=C(!1),k=C(!1),t=C(!1),S=C(!1),f=C(l.inspectionPoint||"Camera"),g=async()=>{r&&r.getTracks().forEach(c=>c.stop()),t.value=!1;try{const c={facingMode:d.value,width:{ideal:1280},height:{ideal:960},aspectRatio:{exact:l.aspectRatio}};d.value==="environment"&&(c.advanced=[{focusMode:"continuous"}]),r=await navigator.mediaDevices.getUserMedia({video:c}),b=r.getVideoTracks()[0],v.value.srcObject=r,v.value.onloadedmetadata=async()=>{v.value.style.width="100%",v.value.style.height="auto",v.value.style.objectFit="cover",await _()}}catch(c){console.error("Error accessing camera: ",c),alert("Failed to access camera. Please ensure camera permissions are granted and try again."),h("close")}},m=()=>{r&&r.getTracks().forEach(c=>c.stop()),h("close")},_=async()=>{if(!b)return;const I=(await navigator.mediaDevices.enumerateDevices()).filter(L=>L.kind==="videoinput");n.value=I.length>1;const j=b.getCapabilities();k.value=j.torch||j.fillLightMode&&j.fillLightMode.includes("torch")},N=async()=>{if(!(!b||!l.settings.enable_flash)){if(d.value==="user"){t.value=!t.value;return}try{if(b.getCapabilities().torch)await b.applyConstraints({advanced:[{torch:!t.value}]}),t.value=!t.value;else{const c=b.getCapabilities();c.fillLightMode&&c.fillLightMode.includes("torch")?(await b.applyConstraints({fillLightMode:t.value?"none":"torch"}),t.value=!t.value):(alert("Flash/Torch is not supported on this camera."),k.value=!1)}}catch(c){console.error("Error toggling flash: ",c),alert("Could not toggle flash. Feature might not be supported."),k.value=!1}}},q=async()=>{!n.value||!l.settings.enable_camera_switch||(d.value=d.value==="environment"?"user":"environment",f.value=`${l.inspectionPoint} (${d.value==="environment"?"Rear":"Front"})`,await g())},B=async()=>{if(!b)return;const c=b.getCapabilities();if(c.focusMode&&c.focusMode.includes("continuous"))try{await b.applyConstraints({advanced:[{focusMode:"continuous"}]})}catch(I){console.warn("Failed to apply continuous focus constraint:",I)}else console.log("Autofocus not explicitly controllable or not supported.")},V=async()=>{if(!v.value||!p.value)return;d.value==="user"&&t.value&&(S.value=!0,await new Promise(D=>setTimeout(D,100)),S.value=!1);const c=v.value,I=p.value,j=I.getContext("2d"),L=c.videoWidth,T=c.videoHeight;let A=L,E=T,H=0,G=0;L/T>l.aspectRatio?(A=T*l.aspectRatio,H=(L-A)/2):L/T<l.aspectRatio&&(E=L/l.aspectRatio,G=(T-E)/2),I.width=A,I.height=E,j.drawImage(c,H,G,A,E,0,0,I.width,I.height),I.toBlob(D=>{if(D){const e=new File([D],`captured_image_${Date.now()}.png`,{type:"image/png"});h("photoCaptured",e)}else console.error("Failed to convert canvas to blob.")},"image/png")};return J(()=>l.show,c=>{c?(f.value=l.inspectionPoint||"Camera",g()):m()}),J(()=>l.inspectionPoint,c=>{f.value=c||"Camera"}),be(()=>{r&&r.getTracks().forEach(c=>c.stop())}),(c,I)=>a.show?(i(),u("div",Ge,[o("div",Xe,[o("div",Je,[o("div",Ke,M(f.value),1),o("button",{onClick:m,class:"p-2 rounded-full text-white hover:bg-gray-700 transition-colors"},I[0]||(I[0]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o("div",{class:"webcam-video-container",onClick:B},[o("video",{ref_key:"webcamVideo",ref:v,autoplay:"",playsinline:"",class:"webcam-video"},null,512),o("canvas",{ref_key:"webcamCanvas",ref:p,class:"hidden"},null,512),S.value?(i(),u("div",Oe)):y("",!0)]),o("div",Ye,[o("div",Qe,[a.settings.enable_flash?(i(),u("button",{key:0,onClick:N,disabled:!k.value,class:se(["control-button",{"bg-gray-700":t.value,"opacity-50 cursor-not-allowed":!k.value}])},I[1]||(I[1]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]),10,Ze)):y("",!0),o("button",{onClick:V,class:"capture-button"}),a.settings.enable_camera_switch&&n.value?(i(),u("button",{key:1,onClick:q,class:"control-button"},I[2]||(I[2]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)]))):y("",!0)])])])])):y("",!0)}},tt=Q(et,[["__scopeId","data-v-d9c476fb"]]),at={key:0,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex flex-col items-center justify-center"},st={class:"w-full h-full flex flex-col"},ot={class:"flex justify-between items-center p-4 bg-black bg-opacity-50 text-white"},lt={class:"text-lg font-medium"},nt={class:"flex-1 flex items-center justify-center overflow-hidden relative"},rt=["src"],it={class:"flex flex-col gap-2 p-4 bg-black bg-opacity-50"},dt={class:"flex justify-between"},ut=["disabled"],ct={key:1,class:"px-4 py-2 bg-indigo-400 text-white rounded-lg cursor-not-allowed flex items-center justify-center",disabled:""},mt={key:0,class:"text-center mt-2"},gt=["disabled"],vt={__name:"PreviewModal",props:{show:Boolean,images:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0},allowMultiple:Boolean,maxFiles:Number,isUploading:Boolean},emits:["close","saveImages","removePreviewImage","triggerAddMorePhotos"],setup(a,{emit:R}){const l=a,h=R,v=C(0),p=C([]),r=C(0),b=C(0),d=O(()=>p.value.length>0?p.value[v.value]:null);J(()=>l.images,V=>{p.value=V.map(c=>({...c})),l.show&&V.length>0?l.initialIndex===-1||l.initialIndex>=V.length?v.value=V.length-1:v.value=l.initialIndex:v.value=0,V.length===0&&l.show&&q()},{deep:!0,immediate:!0});const n=V=>V.preview||(V.image_path?`/${V.image_path}`:""),k=()=>{d.value&&(d.value.rotation=(d.value.rotation+90)%360)},t=()=>{v.value<p.value.length-1?v.value++:v.value=0},S=()=>{v.value>0?v.value--:v.value=p.value.length-1},f=V=>{r.value=V.touches[0].clientX},g=V=>{b.value=V.touches[0].clientX},m=()=>{r.value-b.value>50?t():b.value-r.value>50&&S(),r.value=0,b.value=0},_=()=>{d.value&&h("removePreviewImage",d.value)},N=()=>{h("saveImages",p.value)},q=()=>{h("close")},B=()=>{h("triggerAddMorePhotos")};return J(()=>l.show,V=>{V?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open")},{immediate:!0}),(V,c)=>a.show?(i(),u("div",at,[o("div",st,[o("div",ot,[o("button",{onClick:q,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors"},c[0]||(c[0]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),o("div",lt,"Preview ("+M(v.value+1)+"/"+M(p.value.length)+")",1),o("button",{onClick:k,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors"},c[1]||(c[1]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]))]),o("div",nt,[o("div",{class:"w-full h-full flex items-center justify-center",onTouchstart:f,onTouchmove:g,onTouchend:m},[d.value?(i(),u("img",{key:0,src:n(d.value),class:"max-w-full max-h-full object-contain",style:pe({transform:`rotate(${d.value.rotation}deg)`})},null,12,rt)):y("",!0)],32),p.value.length>1?(i(),u("button",{key:0,onClick:S,class:"absolute left-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors"},c[2]||(c[2]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):y("",!0),p.value.length>1?(i(),u("button",{key:1,onClick:t,class:"absolute right-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors"},c[3]||(c[3]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):y("",!0)]),o("div",it,[o("div",dt,[o("button",{onClick:_,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",disabled:a.isUploading}," Hapus ",8,ut),a.isUploading?(i(),u("button",ct,c[4]||(c[4]=[oe(" Menyimpan"),o("span",{class:"loading-dots ml-1"},[o("span",null,"."),o("span",null,"."),o("span",null,".")],-1)]))):(i(),u("button",{key:0,onClick:N,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," Simpan "+M(p.value.length),1))]),a.allowMultiple&&p.value.length<a.maxFiles?(i(),u("div",mt,[o("button",{onClick:B,class:"inline-block px-4 py-2 rounded-lg text-sm font-medium bg-indigo-700 text-white hover:bg-indigo-800 transition-colors cursor-pointer",disabled:a.isUploading}," + Tambah Foto ",8,gt)])):y("",!0)])])])):y("",!0)}},ht=Q(vt,[["__scopeId","data-v-4dd83dfc"]]),pt=["multiple","disabled"],ft=["disabled"],wt={key:1,class:"block w-full border-2 border-dashed rounded-lg transition-colors duration-200 border-indigo-300 bg-indigo-50 h-auto p-2","aria-label":"Image gallery"},bt={class:"grid grid-cols-3 gap-2"},xt=["onClick"],yt=["src"],_t={key:0,class:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center text-white text-xs font-bold"},kt={key:0},It={key:1,class:"ml-1"},$t=["onClick","disabled"],Vt=["disabled"],Ct={key:2,class:"mt-1 text-xs text-red-600"},St={__name:"InputImage",props:{modelValue:{type:Array,default:()=>[]},error:String,inspectionId:{type:[String,Number],required:!1},pointId:{type:[String,Number],required:!0},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0})}},emits:["update:modelValue","save","removeImage","uploaded"],setup(a,{emit:R}){const l=a,h=R,v=C(null),p=C(null),r=C(!1),b=C(!1),d=C(!1),n=C([]),k=C(0),t=C(!1),S=O(()=>Number(l.settings.max_files)>1),f=O(()=>{const e=l.settings.camera_aspect_ratio.split(":");if(e.length===2){const w=parseFloat(e[0]),s=parseFloat(e[1]);if(!isNaN(w)&&!isNaN(s)&&s!==0)return w/s}return 4/3}),g=O(()=>{const e=[],w=new Set;for(const s of n.value)s.id&&w.add(s.id),e.push(s);for(const s of l.modelValue)w.has(s.id)||e.push({...s,rotation:s.rotation||0,isNew:!1,preview:s.preview||(s.image_path?`/${s.image_path}`:null)});return e}),m=e=>e.preview||(e.image_path?`/${e.image_path}`:""),_=e=>!e.width||!e.height||e.width===0||e.height===0?{paddingBottom:"100%",position:"relative"}:{paddingBottom:`${e.height/e.width*100}%`,position:"relative"},N=()=>{d.value&&(d.value=!1),r.value=!0},q=()=>{r.value=!1,v.value.click()},B=()=>{r.value=!1,b.value=!0},V=()=>{r.value=!1,g.value.length>0&&(d.value=!0)},c=()=>{b.value=!1,g.value.length>0&&(d.value=!0)},I=()=>{d.value=!1,n.value.forEach(e=>{e.preview&&e.preview.startsWith("blob:")&&URL.revokeObjectURL(e.preview)}),n.value=[]},j=e=>new Promise(w=>{const s=new FileReader;s.onload=x=>{const $=new Image;$.onload=()=>{w({file:e,preview:URL.createObjectURL(e),rotation:0,width:$.naturalWidth,height:$.naturalHeight,isNew:!0})},$.onerror=()=>{console.error("Failed to load image for dimensions:",e.name),w({file:e,preview:URL.createObjectURL(e),rotation:0,width:0,height:0,isNew:!0})},$.src=x.target.result},s.readAsDataURL(e)}),L=e=>{const w=Array.from(e.target.files);if(!w.length){r.value=!1,g.value.length>0&&(d.value=!0);return}Promise.all(w.map(j)).then(s=>{const x=g.value.length,$=l.settings.max_files-x,F=S.value?s.slice(0,$):s.slice(0,1);S.value?n.value.push(...F):(n.value.forEach(W=>W.preview&&W.preview.startsWith("blob:")&&URL.revokeObjectURL(W.preview)),n.value=F),r.value=!1,F.length>0?(k.value=g.value.length-F.length,k.value<0&&(k.value=0),d.value=!0):g.value.length>0&&(d.value=!0),e.target.value=""}).catch(s=>{console.error("Error processing selected images:",s),alert("Failed to process selected images. Please try again."),r.value=!1,g.value.length>0&&(d.value=!0)})},T=e=>{const w=g.value.length;if(!S.value||w<l.settings.max_files){const s=new Image;s.onload=()=>{const x={file:e,preview:URL.createObjectURL(e),rotation:0,width:s.naturalWidth,height:s.naturalHeight,isNew:!0};S.value?n.value.push(x):(n.value.forEach($=>$.preview&&$.preview.startsWith("blob:")&&URL.revokeObjectURL($.preview)),n.value=[x]),b.value=!1,r.value=!1,k.value=g.value.length-1,d.value=!0},s.onerror=()=>{console.error("Failed to load captured image for dimensions.");const x={file:e,preview:URL.createObjectURL(e),rotation:0,width:0,height:0,isNew:!0};S.value?n.value.push(x):(n.value.forEach($=>$.preview&&$.preview.startsWith("blob:")&&URL.revokeObjectURL($.preview)),n.value=[x]),k.value=g.value.length-1,b.value=!1,r.value=!1,d.value=!0},s.src=URL.createObjectURL(e)}else alert(`Maksimum ${l.settings.max_files} file diizinkan.`),b.value=!1,r.value=!1,g.value.length>0&&(d.value=!0)},A=(e=0)=>{k.value=e,d.value=!0},E=e=>new Promise(w=>{if(e.rotation===0||!p.value){if(!e.isNew&&!e.file){w({file:null,width:e.width,height:e.height,isOriginal:!0});return}w({file:e.file,width:e.width,height:e.height});return}const s=new Image;s.onload=()=>{const x=p.value,$=x.getContext("2d"),F=s.width,W=s.height;let U,X;e.rotation===90||e.rotation===270?(U=W,X=F):(U=F,X=W),x.width=U,x.height=X,$.clearRect(0,0,x.width,x.height),$.translate(x.width/2,x.height/2),$.rotate(e.rotation*Math.PI/180),$.drawImage(s,-F/2,-W/2,F,W),$.setTransform(1,0,0,1,0,0),x.toBlob(z=>{const Y=new File([z],e.file?e.file.name:`rotated_image_${Date.now()}.png`,{type:e.file?e.file.type:"image/png"});w({file:Y,width:U,height:X})},e.file?e.file.type:"image/png")},s.onerror=()=>{console.error("Failed to load image for rotation processing:",e.preview),w({file:e.file,width:e.width,height:e.height})},s.src=e.preview}),H=async e=>{t.value=!0;const w=[];if(!l.pointId){alert("Error: Point ID is missing. Cannot upload image. (Check parent component)"),t.value=!1;return}console.log("Uploading for Inspection ID:",l.inspectionId,"Point ID:",l.pointId);try{for(const s of e){if(!s.isNew&&s.rotation===0&&s.id&&s.image_path){w.push({id:s.id,image_path:s.image_path,width:s.width,height:s.height,rotation:0,preview:s.preview});continue}const{file:x,width:$,height:F,isOriginal:W}=await E(s);if(W&&!s.isNew){w.push({id:s.id,image_path:s.image_path,width:s.width,height:s.height,rotation:0,preview:s.preview});continue}const U=new FormData;U.append("inspection_id",l.inspectionId),U.append("point_id",l.pointId),U.append("image",x),U.append("width",$),U.append("height",F),U.append("rotation",0),s.id&&!s.isNew&&U.append("image_id",s.id);const z=(await he.post(route("inspections.upload-image"),U,{headers:{"Content-Type":"multipart/form-data"}})).data.image,Y=z.image_path,Z=z.public_url;w.push({id:z.id,image_path:Y,width:z.width,height:z.height,rotation:z.rotation,preview:Z}),s.preview&&s.preview.startsWith("blob:")&&URL.revokeObjectURL(s.preview)}h("update:modelValue",w),h("save",l.pointId),h("uploaded",{pointId:l.pointId,images:w}),I()}catch(s){if(console.error("Error during image processing/upload:",s),s.response&&s.response.data&&s.response.data.message)alert(`Failed to save images: ${s.response.data.message}`);else if(s.response&&s.response.data&&s.response.data.errors){const x=Object.values(s.response.data.errors).flat().join(`
`);alert(`Failed to save images:
${x}`)}else alert(`Failed to save images: ${s.message}`)}finally{t.value=!1}},G=e=>{const w=g.value[e];if(w){if(w.id&&!w.isNew)D(w);else{const s=n.value.findIndex(x=>x.preview===w.preview&&x.isNew||x.id&&x.id===w.id);if(s!==-1){const x=n.value.splice(s,1)[0];x.preview&&x.preview.startsWith("blob:")&&URL.revokeObjectURL(x.preview)}}k.value>=g.value.length&&(k.value=Math.max(0,g.value.length-1)),g.value.length===0&&I()}},D=async e=>{if(e.id||e.image_path)try{await he.delete(route("inspections.delete-image"),{data:{image_id:e.id,image_path:e.image_path}})}catch(s){console.error("Error deleting image from server:",s),s.response&&s.response.data&&s.response.data.message?alert(`Failed to delete image from server: ${s.response.data.message}`):alert(`Failed to delete image from server: ${s.message}`);return}e.preview&&e.preview.startsWith("blob:")&&URL.revokeObjectURL(e.preview);const w=l.modelValue.filter(s=>s.id!==e.id);h("update:modelValue",w),n.value=n.value.filter(s=>s.isNew&&e.isNew?s.preview!==e.preview:s.id!==e.id),h("removeImage",{image:e}),d.value&&g.value.length===0?I():d.value&&k.value>=g.value.length&&(k.value=Math.max(0,g.value.length-1))};return(e,w)=>(i(),u("div",null,[o("input",{ref_key:"galleryInput",ref:v,type:"file",accept:"image/*",class:"hidden",onChange:L,multiple:S.value,disabled:t.value},null,40,pt),o("canvas",{ref_key:"processingCanvas",ref:p,class:"hidden"},null,512),g.value.length===0?(i(),u("label",{key:0,onClick:N,class:se(["block w-full border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-200 h-28",{"border-gray-300 hover:border-indigo-400 bg-gray-50":!0}]),disabled:t.value},w[0]||(w[0]=[xe('<div class="h-full flex flex-col items-center justify-center p-4 text-center" data-v-95fa3977><svg class="w-8 h-8 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-95fa3977><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-95fa3977></path></svg><p class="text-sm text-gray-600 font-medium" data-v-95fa3977>Upload Image</p><p class="text-xs text-gray-500" data-v-95fa3977>Click to open options</p></div>',1)]),8,ft)):(i(),u("div",wt,[o("div",bt,[(i(!0),u(te,null,ae(g.value,(s,x)=>(i(),u("div",{key:s.id||s.preview,class:"relative w-full overflow-hidden rounded-md border border-gray-200 cursor-pointer",style:pe(_(s)),onClick:$=>A(x)},[o("img",{src:m(s),class:"absolute top-0 left-0 w-full h-full object-cover"},null,8,yt),s.isNew||s.rotation!==0?(i(),u("div",_t,[s.isNew?(i(),u("span",kt,"BARU")):y("",!0),s.rotation!==0?(i(),u("span",It,"ROTASI")):y("",!0)])):y("",!0),o("button",{onClick:ye($=>D(s),["stop"]),type:"button",class:"absolute top-1 right-1 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs shadow-sm hover:bg-red-600 transition-colors z-10","aria-label":"Remove image",disabled:t.value}," × ",8,$t)],12,xt))),128)),S.value&&g.value.length<a.settings.max_files?(i(),u("div",{key:0,class:"flex flex-col items-center justify-center p-2 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-colors",onClick:N,disabled:t.value},w[1]||(w[1]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),o("p",{class:"mt-1 text-xs text-gray-600"},"Tambah",-1)]),8,Vt)):y("",!0)])])),a.error?(i(),u("p",Ct,M(a.error),1)):y("",!0),ee(He,{show:r.value,onClose:V,onOpenWebcam:B,onTriggerGallery:q},null,8,["show"]),ee(tt,{show:b.value,"aspect-ratio":f.value,settings:a.settings,onClose:c,onPhotoCaptured:T},null,8,["show","aspect-ratio","settings"]),ee(ht,{show:d.value,images:g.value,"initial-index":k.value,"allow-multiple":S.value,"max-files":a.settings.max_files,"is-uploading":t.value,onClose:I,onSaveImages:H,onRemovePreviewImage:G,onTriggerAddMorePhotos:N},null,8,["show","images","initial-index","allow-multiple","max-files","is-uploading"])]))}},fe=Q(St,[["__scopeId","data-v-95fa3977"]]),Rt={class:"mt-2 space-y-4"},Mt={class:"flex flex-wrap sm:flex-nowrap overflow-x-auto pb-2 gap-4 w-full justify-start sm:justify-start"},Nt=["name","value","checked","onChange","required"],Ut={class:"px-4 py-2 border rounded-lg peer-checked:border-indigo-500 peer-checked:bg-indigo-50 peer-checked:text-indigo-700 border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors whitespace-nowrap"},qt={key:0,class:"mt-4 p-4 border rounded-lg bg-gray-50 shadow-sm"},Lt={key:0,class:"mb-3"},Pt={class:"text-gray-900 text-sm bg-white p-2 rounded-md border border-gray-200"},Bt={key:1},Ft={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},jt=["src","alt","onClick"],Tt={key:2,class:"text-sm text-gray-500 mt-2"},Dt={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 p-4"},Wt={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},At={class:"p-6 space-y-6"},Et={class:"flex justify-between items-center border-b pb-4"},zt={class:"text-lg font-medium text-gray-900"},Ht={key:0,class:"border rounded-lg p-4 bg-gray-50"},Gt={key:1,class:"border rounded-lg p-4 bg-gray-50"},Xt={class:"block text-sm font-medium text-gray-700 mb-2"},Jt={class:"text-xs text-gray-500 float-right"},Kt=["placeholder","minlength","maxlength"],Ot={key:2,class:"mt-2 text-sm text-red-600"},Yt={__name:"InputRadio",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number],inspectionId:{type:[String,Number],required:!1},options:{type:Array,default:()=>[{value:"good",label:"Baik",settings:{show_textarea:!1,show_image_upload:!1}},{value:"bad",label:"Tidak Normal",settings:{show_textarea:!0,show_image_upload:!0,textarea_placeholder:"Jelaskan kondisi ini lebih lanjut",textarea_min_length:10,textarea_max_length:400,max_files:3,max_size:2048,allowed_types:["jpg","png","jpeg"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0}},{value:"na",label:"N/A",settings:{show_textarea:!1,show_image_upload:!1}}]},inspectionResult:{type:Object,default:()=>({value:null,notes:"",images:[]})}},emits:["update:modelValue","update:inspectionResult","save"],setup(a,{emit:R}){const l=a,h=R,v=C(!1),p=C(""),r=C([]),b=C(l.modelValue),d=C(l.inspectionResult||{value:null,notes:"",images:[]}),n=O(()=>l.options.find(m=>m.value===b.value));J(()=>l.modelValue,m=>{b.value=m}),J(()=>l.inspectionResult,m=>{d.value=m||{value:null,notes:"",images:[]}},{immediate:!0,deep:!0}),J(v,m=>{m&&(p.value=d.value.notes||"",r.value=d.value.images?[...d.value.images]:[])});const k=m=>{if(b.value=m.value,h("update:modelValue",m.value),!m.settings.show_textarea&&!m.settings.show_image_upload){const _={value:m.value,notes:null,images:[]};h("update:inspectionResult",_),d.value=_,h("save",l.pointId),v.value=!1}else v.value=!0},t=({image:m})=>{console.log("Gambar dihapus dari InputImage (melalui event 'remove-image'):",m)},S=()=>{v.value=!1},f=()=>{var _,N,q,B;const m={value:b.value,notes:null,images:[]};(N=(_=n.value)==null?void 0:_.settings)!=null&&N.show_textarea&&(m.notes=p.value),(B=(q=n.value)==null?void 0:q.settings)!=null&&B.show_image_upload&&(m.images=r.value),h("update:inspectionResult",m),d.value=m,h("save",l.pointId),S()},g=m=>{console.log("Membuka preview gambar:",m.url||m.path)};return(m,_)=>{var N,q,B,V,c,I,j,L,T,A,E,H,G,D,e,w,s,x,$,F,W,U,X,z,Y,Z,le,ne,re,ie,de,ue,ce,me,ge,ve;return i(),u("div",Rt,[o("div",Mt,[(i(!0),u(te,null,ae(a.options,P=>(i(),u("label",{key:P.value,class:"cursor-pointer flex-shrink-0"},[o("input",{type:"radio",name:"radio-"+a.pointId,value:P.value,checked:a.modelValue===P.value,onChange:we=>k(P),class:"hidden peer",required:a.required},null,40,Nt),o("div",Ut,M(P.label),1)]))),128))]),a.modelValue===((N=n.value)==null?void 0:N.value)&&((B=(q=n.value)==null?void 0:q.settings)!=null&&B.show_textarea||(c=(V=n.value)==null?void 0:V.settings)!=null&&c.show_image_upload)?(i(),u("div",qt,[_[4]||(_[4]=o("h4",{class:"text-md font-semibold text-gray-800 mb-2"},"Detail Pilihan Anda:",-1)),d.value.notes&&((j=(I=n.value)==null?void 0:I.settings)!=null&&j.show_textarea)?(i(),u("div",Lt,[_[2]||(_[2]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Catatan:",-1)),o("p",Pt,M(d.value.notes),1)])):y("",!0),d.value.images&&d.value.images.length>0&&((T=(L=n.value)==null?void 0:L.settings)!=null&&T.show_image_upload)?(i(),u("div",Bt,[_[3]||(_[3]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gambar Terlampir:",-1)),o("div",Ft,[(i(!0),u(te,null,ae(d.value.images,P=>(i(),u("div",{key:P.id,class:"relative group aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg bg-gray-200 flex items-center justify-center"},[o("img",{src:P.url||P.path,alt:P.name||"Gambar inspeksi",class:"object-cover w-full h-full",onClick:we=>g(P)},null,8,jt)]))),128))])])):(E=(A=n.value)==null?void 0:A.settings)!=null&&E.show_image_upload&&(!d.value.images||d.value.images.length===0)?(i(),u("p",Tt," Belum ada gambar yang dilampirkan. ")):y("",!0)])):y("",!0),v.value?(i(),u("div",Dt,[o("div",Wt,[o("div",At,[o("div",Et,[o("h3",zt,M((H=n.value)==null?void 0:H.label)+" - Detail Inspeksi ",1),o("button",{onClick:S,class:"text-gray-400 hover:text-gray-500"},_[5]||(_[5]=[o("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(D=(G=n.value)==null?void 0:G.settings)!=null&&D.show_image_upload?(i(),u("div",Ht,[_[6]||(_[6]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Upload Images ",-1)),ee(fe,{modelValue:r.value,"onUpdate:modelValue":_[0]||(_[0]=P=>r.value=P),"point-id":a.pointId,"inspection-id":a.inspectionId,settings:{max_files:((w=(e=n.value)==null?void 0:e.settings)==null?void 0:w.image_max_files)||1,max_size:((x=(s=n.value)==null?void 0:s.settings)==null?void 0:x.image_max_size)||2048,allowed_types:((F=($=n.value)==null?void 0:$.settings)==null?void 0:F.image_allowed_types)||["jpg","png"],camera_aspect_ratio:((U=(W=n.value)==null?void 0:W.settings)==null?void 0:U.camera_aspect_ratio)||"3:4",enable_flash:((z=(X=n.value)==null?void 0:X.settings)==null?void 0:z.enable_flash)!==void 0?n.value.settings.enable_flash:!0,enable_camera_switch:((Z=(Y=n.value)==null?void 0:Y.settings)==null?void 0:Z.enable_camera_switch)!==void 0?n.value.settings.enable_camera_switch:!0},onRemoveImage:t},null,8,["modelValue","point-id","inspection-id","settings"])])):y("",!0),(ne=(le=n.value)==null?void 0:le.settings)!=null&&ne.show_textarea?(i(),u("div",Gt,[o("label",Xt,[_[7]||(_[7]=oe(" Additional Notes ")),o("span",Jt,M(p.value.length)+"/"+M(((ie=(re=n.value)==null?void 0:re.settings)==null?void 0:ie.textarea_max_length)||400),1)]),_e(o("textarea",{"onUpdate:modelValue":_[1]||(_[1]=P=>p.value=P),placeholder:((ue=(de=n.value)==null?void 0:de.settings)==null?void 0:ue.textarea_placeholder)||"Enter your notes here...",minlength:(me=(ce=n.value)==null?void 0:ce.settings)==null?void 0:me.textarea_min_length,maxlength:(ve=(ge=n.value)==null?void 0:ge.settings)==null?void 0:ve.textarea_max_length,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",rows:"4"},null,8,Kt),[[ke,p.value]])])):y("",!0),o("div",{class:"flex justify-end space-x-3 pt-4 border-t"},[o("button",{onClick:S,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),o("button",{onClick:f,type:"button",class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700"}," Simpan ")])])])])):y("",!0),a.error?(i(),u("p",Ot,M(a.error),1)):y("",!0)])}}},Qt=Q(Yt,[["__scopeId","data-v-1427582e"]]),Zt={class:"mt-1"},ea=["value","required","placeholder"],ta={key:0,class:"mt-2 text-sm text-red-600"},aa={__name:"InputAccount",props:{modelValue:[String,Number],required:Boolean,placeholder:String,error:String,pointId:[String,Number],settings:{type:Object,default:()=>({currency_symbol:"Rp",thousands_separator:",",min_value:0,max_value:1e9})}},emits:["update:modelValue","save"],setup(a,{emit:R}){const l=a,h=R,v=C(""),p=C(!1),r=O(()=>{var f,g,m,_;return{currency_symbol:((f=l.settings)==null?void 0:f.currency_symbol)||"Rp",thousands_separator:((g=l.settings)==null?void 0:g.thousands_separator)||",",min_value:((m=l.settings)==null?void 0:m.min_value)!==void 0?Number(l.settings.min_value):0,max_value:((_=l.settings)==null?void 0:_.max_value)!==void 0?Number(l.settings.max_value):1e9}}),b=f=>{if(f==null||f==="")return"";const g=Number(f);if(isNaN(g))return"";let m=g.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return r.value.thousands_separator!==","&&(m=m.replace(/,/g,r.value.thousands_separator)),m},d=f=>f?f.replace(/[^\d]/g,""):"",n=O(()=>{if(p.value)return v.value;const f=b(l.modelValue);return f?`${r.value.currency_symbol} ${f}`:""}),k=f=>{const g=f.target.value;v.value=g;const m=d(g);h("update:modelValue",m),h("save",l.pointId)},t=()=>{var f;p.value=!0,v.value=((f=l.modelValue)==null?void 0:f.toString())||""},S=()=>{p.value=!1;const f=d(v.value);if(f){const g=Number(f);let m=f;r.value.min_value!==void 0&&g<r.value.min_value&&(m=r.value.min_value.toString()),r.value.max_value!==void 0&&g>r.value.max_value&&(m=r.value.max_value.toString()),m!==f&&(h("update:modelValue",m),h("save",l.pointId))}};return J(()=>l.modelValue,f=>{!p.value&&f!==void 0&&f!==null&&(v.value=f.toString())},{immediate:!0}),(f,g)=>(i(),u("div",Zt,[o("input",{value:n.value,onInput:k,onBlur:S,onFocus:t,type:"text",required:a.required,placeholder:a.placeholder,class:se(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",a.error?"border-red-300":"border-gray-300"])},null,42,ea),a.error?(i(),u("p",ta,M(a.error),1)):y("",!0)]))}},sa={class:"bg-white shadow-lg rounded-xl overflow-hidden border border-gray-100"},oa={class:"bg-indigo-50 px-6 py-2 border-b border-indigo-100"},la={class:"text-xl font-semibold text-indigo-700"},na={class:"p-4 space-y-4"},ra={class:"flex items-start justify-between"},ia={class:"block text-sm font-medium text-gray-700"},da={key:0,class:"text-red-500"},ua={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},ca={__name:"CategorySection",props:{category:Object,form:Object,inspectionId:[String,Number]},emits:["saveResult","updateResult","removeImage"],setup(a,{emit:R}){const l=a,h=R,v=[{value:"good",label:"Good"},{value:"bad",label:"Bad"},{value:"na",label:"N/A"}],p=n=>{var t;const k=l.form.results[n.id];if(!k)return!1;switch(n.input_type){case"text":case"number":case"date":case"account":return!!k.note;case"select":case"radio":return!!k.status;case"image":return((t=k.images)==null?void 0:t.length)>0;default:return!1}},r=(n,k)=>{h("updateResult",{pointId:n,value:k})},b=n=>{h("saveResult",n)},d=(n,k)=>{h("removeImage",{pointId:n,imageIndex:k})};return(n,k)=>(i(),u("div",sa,[o("div",oa,[o("h2",la,M(a.category.name),1)]),o("div",na,[(i(!0),u(te,null,ae(a.category.points,t=>{var S,f,g,m,_,N,q,B,V,c,I,j,L,T,A,E,H,G,D;return i(),u("div",{key:t.id,class:"space-y-2 pb-4 border-b border-gray-100 last:border-0 last:pb-0"},[o("div",ra,[o("label",ia,[oe(M(t.name)+" ",1),(S=t.settings)!=null&&S.is_required?(i(),u("span",da,"*")):y("",!0)]),p(t)?(i(),u("span",ua," ✓ ")):y("",!0)]),t.input_type==="text"?(i(),K(Ce,{key:0,modelValue:a.form.results[t.id].note,"onUpdate:modelValue":[e=>a.form.results[t.id].note=e,e=>r(t.id,e)],required:(f=t.settings)==null?void 0:f.is_required,"min-length":(g=t.settings)==null?void 0:g.min_length,"max-length":(m=t.settings)==null?void 0:m.max_length,pattern:(_=t.settings)==null?void 0:_.pattern,placeholder:((N=t.settings)==null?void 0:N.placeholder)||"Enter text",error:a.form.errors[`results.${t.id}.note`],onSave:e=>b(t.id)},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","pattern","placeholder","error","onSave"])):y("",!0),t.input_type==="number"?(i(),K(Ne,{key:1,modelValue:a.form.results[t.id].note,"onUpdate:modelValue":[e=>a.form.results[t.id].note=e,e=>r(t.id,e)],required:(q=t.settings)==null?void 0:q.is_required,min:(B=t.settings)==null?void 0:B.min,max:(V=t.settings)==null?void 0:V.max,step:((c=t.settings)==null?void 0:c.step)||1,placeholder:((I=t.settings)==null?void 0:I.placeholder)||"Enter number",error:a.form.errors[`results.${t.id}.note`],onSave:e=>b(t.id)},null,8,["modelValue","onUpdate:modelValue","required","min","max","step","placeholder","error","onSave"])):y("",!0),t.input_type==="account"?(i(),K(aa,{key:2,modelValue:a.form.results[t.id].note,"onUpdate:modelValue":[e=>a.form.results[t.id].note=e,e=>r(t.id,e)],required:(j=t.settings)==null?void 0:j.is_required,placeholder:((L=t.settings)==null?void 0:L.placeholder)||"Masukkan nilai",error:a.form.errors[`results.${t.id}.note`],"point-id":t.id,settings:t.settings,onSave:e=>b(t.id)},null,8,["modelValue","onUpdate:modelValue","required","placeholder","error","point-id","settings","onSave"])):y("",!0),t.input_type==="date"?(i(),K(Pe,{key:3,modelValue:a.form.results[t.id].note,"onUpdate:modelValue":[e=>a.form.results[t.id].note=e,e=>r(t.id,e)],required:(T=t.settings)==null?void 0:T.is_required,"min-date":(A=t.settings)==null?void 0:A.min_date,"max-date":(E=t.settings)==null?void 0:E.max_date,error:a.form.errors[`results.${t.id}.note`],onSave:e=>b(t.id)},null,8,["modelValue","onUpdate:modelValue","required","min-date","max-date","error","onSave"])):y("",!0),t.input_type==="select"?(i(),K(De,{key:4,modelValue:a.form.results[t.id].status,"onUpdate:modelValue":[e=>a.form.results[t.id].status=e,e=>r(t.id,e)],required:(H=t.settings)==null?void 0:H.is_required,error:a.form.errors[`results.${t.id}.status`],onSave:e=>b(t.id)},null,8,["modelValue","onUpdate:modelValue","required","error","onSave"])):y("",!0),t.input_type==="radio"?(i(),K(Qt,{key:5,modelValue:a.form.results[t.id].status,"onUpdate:modelValue":[e=>a.form.results[t.id].status=e,e=>r(t.id,e)],required:(G=t.settings)==null?void 0:G.is_required,"point-id":t.id,settings:t.settings,options:((D=t.settings)==null?void 0:D.radios)||v,error:a.form.errors[`results.${t.id}.status`],onSave:e=>b(t.id)},null,8,["modelValue","onUpdate:modelValue","required","point-id","settings","options","error","onSave"])):y("",!0),t.input_type==="image"?(i(),K(fe,{key:6,modelValue:a.form.results[t.id].images,"onUpdate:modelValue":[e=>a.form.results[t.id].images=e,e=>r(t.id,e)],error:a.form.errors[`results.${t.id}.images`],"inspection-id":a.inspectionId,"point-id":t.id,settings:t.settings,onSave:e=>b(t.id),onRemoveImage:e=>d(t.id,e)},null,8,["modelValue","onUpdate:modelValue","error","inspection-id","point-id","settings","onSave","onRemoveImage"])):y("",!0)])}),128))])]))}},va=Q(ca,[["__scopeId","data-v-4b8bdd22"]]);export{va as C};
