import{f as o,o as n,d as e,g as _,x as R,b as O,w as f,e as d,i as g,u as i,l as K,F as q,k as E,t as a,S as w,j as c,v as J,y as U}from"./vendor-BTHpbkmK.js";import{A as G}from"./AppLayout-CKa2HT2x.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as W,C as I}from"./car-BLs3-kkU.js";import{r as X}from"./XMarkIcon-DPBCh8Zc.js";function Y(u,y){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function Z(u,y){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}const ee={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},te={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2"},se={class:"p-4 flex justify-between items-start"},ae={class:"flex items-center mb-1"},ne={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},oe={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},re={class:"flex items-center"},ie={class:"text-sm font-medium text-gray-800"},le={key:0},de={class:"text-gray-600"},ce={key:1},ue={class:"flex items-center mt-2"},me={class:"text-sm font-bold text-gray-900"},pe={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},xe={class:"text-sm text-gray-800"},ge={class:"p-4 flex space-x-2"},ye=["onClick"],_e=["onClick"],fe={key:1,class:"text-center py-8"},ve={class:"text-center mt-6"},be={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},he={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},ke={class:"p-6"},we={class:"flex items-start mb-4"},Ie={key:0},Ce={class:"font-medium text-gray-800"},$e={class:"text-sm text-gray-600"},je={class:"text-gray-500"},Me={key:1,class:"text-sm font-medium text-gray-800"},Le={class:"flex items-center mt-2"},Be={class:"text-base font-bold text-gray-900"},De={class:"text-gray-600 mb-6"},Se={key:0,class:"font-semibold text-gray-800"},Te={class:"flex justify-end space-x-3"},He=["disabled"],Re={key:0},Ae={key:1},Fe={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},Ne={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},Ve={class:"p-6"},Pe={class:"flex items-center justify-between mb-4"},ze={class:"flex items-start mb-4"},Oe={key:0},Ke={class:"font-medium text-gray-800"},qe={class:"text-sm text-gray-600"},Ee={class:"text-gray-500"},Je={key:1,class:"text-sm font-medium text-gray-800"},Ue={class:"flex items-center mt-2"},Ge={class:"text-base font-bold text-gray-900"},Qe={class:"mb-6"},We={key:0,class:"text-red-500 text-sm mt-1"},Xe={class:"flex justify-end space-x-3"},Ye=["disabled"],Ze={key:0},et={key:1},tt={__name:"Index",props:{tasks:Array,encryptedIds:Object},setup(u){const y=u,v=_(!1),b=_(!1),t=_(null),m=_(""),h=R({}),A=l=>{t.value=l,v.value=!0},F=l=>{t.value=l,b.value=!0},x=()=>{v.value=!1,b.value=!1,m.value=""},p=R({reason:""}),N=()=>{t.value&&(p.reason=m.value,p.post(route("inspections.cancel",{inspection:y.encryptedIds[t.value.id]}),{onSuccess:()=>{x(),m.value=""}}))},V=()=>{t.value&&h.get(route("inspections.start",{inspection:y.encryptedIds[t.value.id]}),{onFinish:()=>{x()}})},k=l=>{switch(l){case"draft":return"Mulai Inspeksi";case"in_progress":return"Lanjutkan Inspeksi";case"pending_review":return"Periksa Laporan";case"revision":return"Lanjutkan Revisi";case"pending":return"Ditunda => Lanjutkan Inspeksi";default:return"Detail"}},P=l=>{switch(l){case"draft":return"Memuat Halaman Inspeksi...";case"in_progress":return"Membuka Halaman Inspeksi...";case"pending_review":return"Memuat Halaman Review...";case"revision":return"Memual Halaman Revisi...";case"pending":return"Lanjutkan Inspeksi...";default:return"Detail"}};return(l,s)=>(n(),O(G,null,{default:f(()=>{var C,$,j,M,L,B,D,S,T,H;return[d(i(K),{title:"Tugas"}),e("div",ee,[s[7]||(s[7]=e("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),u.tasks.length>0?(n(),o("div",te,[(n(!0),o(q,null,E(u.tasks,r=>(n(),o("div",{key:r.id,class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition"},[e("div",se,[e("div",null,[e("div",ae,[d(i(W),{class:"h-5 w-5 text-blue-500 mr-2"}),s[1]||(s[1]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",ne,a(new Date(r.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),d(i(w),{href:l.route("inspection.log",{inspection:u.encryptedIds[r.id]}),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:f(()=>s[2]||(s[2]=[c(" Lihat Log ")])),_:2,__:[2]},1032,["href"])]),e("div",oe,[e("div",re,[d(i(I),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",ie,[r.car?(n(),o("div",le,[c(a(`${r.car.brand.name} ${r.car.model.name} ${r.car.type.name} ${r.car.cc} ${r.car.transmission} ${r.car.year}`)+" ",1),e("span",de,"("+a(r.car.fuel_type)+")",1)])):(n(),o("div",ce,a(r.car_name),1))])]),e("div",ue,[s[3]||(s[3]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),e("span",me,a(r.plate_number),1)])]),r.category?(n(),o("div",pe,[s[4]||(s[4]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"},"Kategori Inspek",-1)),e("p",xe,a(r.category.name),1)])):g("",!0),e("div",ge,[e("button",{onClick:z=>F(r),class:"flex-6 px-3 py-2 bg-gray-200 text-gray-700 font-medium rounded-md text-sm hover:bg-gray-300 transition-colors"}," Batal ",8,ye),e("button",{onClick:z=>A(r),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors"},[c(a(k(r.status))+" ",1),d(i(Y),{class:"ml-2 h-4 w-4"})],8,_e)])]))),128))])):(n(),o("div",fe,s[5]||(s[5]=[e("p",{class:"text-gray-500"},"Tidak ada tugas inspeksi yang tersedia.",-1)]))),e("div",ve,[d(i(w),{href:l.route("inspections.history"),class:"inline-block px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-600 rounded-md hover:bg-blue-50"},{default:f(()=>s[6]||(s[6]=[c(" Lihat Inspeksi Lainnya ")])),_:1,__:[6]},8,["href"])])]),d(i(w),{href:l.route("inspections.create.new"),class:"fixed bottom-24 right-6 z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white rounded-full transition-colors duration-200 animate-bounce",title:"Buat Inspeksi Baru"},{default:f(()=>[d(i(Z),{class:"h-6 w-6"})]),_:1},8,["href"]),v.value?(n(),o("div",be,[e("div",he,[e("div",ke,[s[10]||(s[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Konfirmasi",-1)),e("div",we,[d(i(I),{class:"h-8 w-8 text-blue-500 mr-3 mt-1"}),e("div",null,[(C=t.value)!=null&&C.car?(n(),o("div",Ie,[e("p",Ce,a(`${t.value.car.brand.name} ${t.value.car.model.name} ${t.value.car.type.name}`),1),e("p",$e,[c(a(t.value.car.cc)+" • "+a(t.value.car.transmission)+" • "+a(t.value.car.year)+" ",1),e("span",je,"("+a(t.value.car.fuel_type)+")",1)])])):(n(),o("div",Me,a(($=t.value)==null?void 0:$.car_name),1)),e("div",Le,[s[8]||(s[8]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",Be,a((j=t.value)==null?void 0:j.plate_number),1)])])]),e("p",De,[c(" Anda yakin ingin "+a(k((M=t.value)==null?void 0:M.status).toLowerCase())+" inspeksi ini ",1),(L=t.value)!=null&&L.category?(n(),o("span",Se," berdasarkan Type Inspek: "+a(t.value.category.name),1)):g("",!0),s[9]||(s[9]=c("? "))]),e("div",Te,[e("button",{onClick:x,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{onClick:V,type:"button",disabled:i(h).processing,class:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white border border-transparent rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[i(h).processing?(n(),o("span",Re,a(P((B=t.value)==null?void 0:B.status)),1)):(n(),o("span",Ae,a(k((D=t.value)==null?void 0:D.status)),1))],8,He)])])])])):g("",!0),b.value?(n(),o("div",Fe,[e("div",Ne,[e("div",Ve,[e("div",Pe,[s[11]||(s[11]=e("h3",{class:"text-lg font-medium text-gray-900"},"Batalkan Inspeksi",-1)),e("button",{onClick:x,class:"text-gray-400 hover:text-gray-600"},[d(i(X),{class:"h-6 w-6"})])]),e("div",ze,[d(i(I),{class:"h-8 w-8 text-red-500 mr-3 mt-1"}),e("div",null,[(S=t.value)!=null&&S.car?(n(),o("div",Oe,[e("p",Ke,a(`${t.value.car.brand.name} ${t.value.car.model.name} ${t.value.car.type.name}`),1),e("p",qe,[c(a(t.value.car.cc)+" • "+a(t.value.car.transmission)+" • "+a(t.value.car.year)+" ",1),e("span",Ee,"("+a(t.value.car.fuel_type)+")",1)])])):(n(),o("div",Je,a((T=t.value)==null?void 0:T.car_name),1)),e("div",Ue,[s[12]||(s[12]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",Ge,a((H=t.value)==null?void 0:H.plate_number),1)])])]),e("div",Qe,[s[13]||(s[13]=e("label",{for:"cancelReason",class:"block text-sm font-medium text-gray-700 mb-2"}," Alasan Pembatalan * ",-1)),J(e("textarea",{id:"cancelReason","onUpdate:modelValue":s[0]||(s[0]=r=>m.value=r),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan alasan pembatalan inspeksi...",required:""},null,512),[[U,m.value]]),i(p).errors.reason?(n(),o("p",We,a(i(p).errors.reason),1)):g("",!0)]),e("div",Xe,[e("button",{onClick:x,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Tutup "),e("button",{onClick:N,disabled:!m.value.trim()||i(p).processing,class:"px-4 py-2 bg-red-600 text-white border border-transparent rounded-md text-sm font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"},[i(p).processing?(n(),o("span",Ze,"Memproses...")):(n(),o("span",et,"Batalkan Inspeksi"))],8,Ye)])])])])):g("",!0)]}),_:1}))}},it=Q(tt,[["__scopeId","data-v-956e3594"]]);export{it as default};
