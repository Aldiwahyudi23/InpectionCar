import{r as p,j as B,o as e,w as b,k as _,d as t,c as s,b as x,u as v,v as A,t as l,F as g,m as h,S as N,f as w,W as j}from"./vendor-CV8_PVEu.js";import{A as D}from"./AppLayout-13eNZYl8.js";import"./app-BqF7l3Ee.js";const R={class:"w-full px-4 sm:px-6 lg:px-6 py-6"},M={class:"bg-white shadow rounded-lg p-4 mb-3"},z={class:"text-2xl font-bold text-red-600"},S={key:0},V={class:"space-y-4"},F={class:"flex justify-between items-center mb-2"},P={class:"font-semibold text-gray-800"},I={class:"text-sm text-gray-500"},K={key:0},O={key:0,class:"border-t pt-2"},H={class:"w-full text-sm text-left"},L={class:"py-1"},W={class:"py-1 text-yellow-600 font-medium"},E={class:"py-1"},Y={class:"py-1 flex items-center space-x-2"},$=["onClick","disabled"],q={key:0,class:"animate-spin -ml-1 mr-1 h-3 w-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},G={key:1},J={key:1,class:"text-green-600 text-xs sm:text-sm"},Q={key:1,class:"text-sm text-green-600"},U={key:0,class:"fixed inset-0 z-50 overflow-y-auto bg-gray-900 bg-opacity-50 flex items-center justify-center"},X={class:"bg-white rounded-lg shadow-xl p-6 sm:p-8 max-w-sm w-full mx-4 transform transition-all scale-100 ease-out duration-300"},Z={class:"mt-6 flex justify-center space-x-4"},tt=["disabled"],et={key:0,class:"flex items-center"},st={key:1},nt={__name:"Tagihan",props:{transactions:Array,totalPendingAmount:Number,groupedByRoleType:Object,role:Object},setup(k){const n=k,m=p(!1),c=p(null),r=p(!1),u=d=>d?new Intl.NumberFormat("id-ID").format(d):"0",C=d=>{c.value=d,m.value=!0},f=()=>{m.value=!1,c.value=null},T=()=>{c.value&&(r.value=!0,j.put(route("distributions.release",c.value),{},{onFinish:()=>{r.value=!1,f()}}))};return(d,o)=>(e(),B(D,{title:"Daftar Tagihan"},{default:b(()=>[_(v(A),{title:"Daftar Tagihan"}),t("div",R,[o[4]||(o[4]=t("h1",{class:"text-xl font-bold text-gray-800 mb-4"},"Daftar Tagihan",-1)),t("div",M,[o[0]||(o[0]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Tagihan Pending",-1)),t("p",z," Rp "+l(u(n.totalPendingAmount)),1),n.role=="Admin"||n.role=="coordinator"?(e(),s("div",S,[(e(!0),s(g,null,h(n.groupedByRoleType,(a,i)=>(e(),s("div",{key:i},[t("p",null,l(i)+": Rp "+l(u(Number(a))),1)]))),128))])):x("",!0)]),t("div",V,[(e(!0),s(g,null,h(n.transactions,a=>(e(),s("div",{key:a.id,class:"bg-white shadow rounded-lg p-4"},[t("div",F,[t("h2",P," Transaksi "+l(a.invoice_number),1),t("span",I,"Total Pending: Rp "+l(u(a.distributions.reduce((i,y)=>i+Number(y.amount),0))),1)]),n.role=="Admin"||n.role=="coordinator"?(e(),s("div",K,[a.distributions.length>0?(e(),s("div",O,[t("table",H,[o[3]||(o[3]=t("thead",null,[t("tr",{class:"text-gray-600"},[t("th",{class:"py-1"},"Nominal"),t("th",{class:"py-1"},"Status"),t("th",{class:"py-1"},"Tujuan"),t("th",{class:"py-1"},"Detail")])],-1)),t("tbody",null,[(e(!0),s(g,null,h(a.distributions,i=>(e(),s("tr",{key:i.id,class:"border-t"},[t("td",L,"Rp "+l(u(i.amount)),1),t("td",W,l(i.is_released?"Diterima":"Belum diKirim"),1),t("td",E,l(i.user?i.user.name:"Owner"),1),t("td",Y,[_(v(N),{href:d.route("finance.show",i.id),class:"text-indigo-600 hover:underline text-xs sm:text-sm"},{default:b(()=>o[1]||(o[1]=[w(" Detail ")])),_:2,__:[1]},1032,["href"]),i.is_released?(e(),s("span",J,"✔ Diberikan")):(e(),s("button",{key:0,onClick:y=>C(i.id),disabled:r.value,class:"flex items-center justify-center px-2 py-1 bg-indigo-600 text-white text-xs sm:text-sm rounded hover:bg-indigo-700 transition-colors disabled:bg-indigo-400 disabled:cursor-not-allowed"},[r.value?(e(),s("svg",q,o[2]||(o[2]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(e(),s("span",G,"Kirim"))],8,$))])]))),128))])])])):(e(),s("div",Q,"Semua distribusi sudah released ✅"))])):x("",!0)]))),128))])]),m.value?(e(),s("div",U,[t("div",X,[o[6]||(o[6]=t("div",{class:"flex flex-col items-center text-center"},[t("div",{class:"bg-indigo-100 p-3 rounded-full mb-4"},[t("svg",{class:"h-8 w-8 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])]),t("h3",{class:"text-lg font-bold text-gray-900"},"Konfirmas"),t("p",{class:"text-sm text-gray-600 mt-2"}," Anda yakin ingin mengirim distribusi ini? ini tidak dapat dibatalkan. ")],-1)),t("div",Z,[t("button",{type:"button",onClick:f,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors"}," Batal "),t("button",{type:"button",onClick:T,disabled:r.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors disabled:bg-indigo-400 disabled:cursor-not-allowed flex items-center"},[r.value?(e(),s("span",et,o[5]||(o[5]=[t("svg",{class:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),w(" Memproses... ")]))):(e(),s("span",st,"Ya, Setor"))],8,tt)])])])):x("",!0)]),_:1}))}};export{nt as default};
