import{p as ee,q as m,r as C,x as te,G as se,j as $,o,w as D,k as f,d as t,c as a,b as v,u as r,v as ne,t as c,S as A,f as y,n as g,F as L,y as oe,z as w,A as I,I as ae,W as U}from"./vendor-Dy3A47bM.js";import{A as ie}from"./AppLayout-DZWOtqyR.js";import{_ as le}from"./app-eLJ9d_d5.js";import{r as re,C as de}from"./car-DcEO0tq8.js";import{r as ue}from"./ClipboardDocumentListIcon-BJmtm_gb.js";const me={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ce={class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200"},pe={class:"p-4 flex justify-between items-start"},ve={class:"flex items-center mb-1"},ye={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},xe={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},ge={class:"flex items-center"},be={class:"text-sm font-medium text-gray-800"},fe={key:0},we={class:"text-gray-600"},he={key:1},ke={class:"flex items-center justify-between mt-2"},Ce={class:"flex items-center"},De={class:"text-sm font-bold text-gray-900"},Ie={class:"px-4 py-3 bg-white border-t border-gray-100"},Me={class:"flex justify-between items-center mb-3"},je={class:"flex items-center justify-between"},Ae={class:"text-sm font-semibold text-green-800"},Ve={class:"text-xs text-green-700"},Se={key:0,class:"text-xs text-green-700"},Le=["href"],Ne={key:1,class:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded"},Be={class:"grid grid-cols-2 gap-1 text-sm"},Pe={key:0},Te={key:3,class:"p-2 bg-yellow-50 border border-yellow-200 rounded"},$e={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},ze={class:"text-sm text-gray-800"},Fe={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},Re={class:"flex items-center mb-1"},He={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1"},Ue={class:"mt-3"},Ee={class:"text-sm text-gray-800"},qe=["innerHTML"],Ke={class:"p-4 flex gap-2"},Oe=["disabled"],We={key:0},Ge={key:1},Je=["href","disabled"],Qe={key:0},Ye={key:1},Xe={key:1,class:"flex-1 flex items-center justify-center px-3 py-2 bg-gray-200 text-gray-600 font-medium rounded-md text-sm"},Ze=["disabled"],_e=["href","disabled"],et={key:0},tt={key:1},st={key:0},nt={key:1},ot={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4"},at={class:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto"},it={class:"text-lg font-bold mb-4"},lt={class:"space-y-3"},rt={class:"space-y-3"},dt={class:"flex justify-end space-x-3 pt-4"},ut=["disabled"],mt={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},ct={class:"bg-white p-6 rounded-lg shadow-xl w-96"},pt={class:"flex justify-end space-x-4"},vt=["disabled"],yt={key:0,class:"flex items-center"},xt={key:1},gt={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},bt={class:"bg-white p-6 rounded-lg shadow-xl w-96"},ft={class:"flex justify-end space-x-4 mt-6"},wt=["disabled"],ht={__name:"Review",props:{inspection:{type:Object,required:!0},encryptedIds:Object,transaction:Object},setup(n){var H;const u=n,V=((H=ee().props.global)==null?void 0:H.roles)||[],z=m(()=>V.includes("Admin")||V.includes("coordinator"));m(()=>V.includes("coordinator")),m(()=>V.includes("Admin"));const N=C(!1),B=C(!1),S=C(!1),F=C(""),d=C(!1),p=C(null),l=te({customer_name:"",customer_phone:"",customer_email:"",customer_address:"",amount:"",payment_method:"",status:"paid"}),b=m(()=>u.inspection.customer_id!==null),h=m(()=>u.transaction!==null),x=m(()=>{var s;return((s=u.transaction)==null?void 0:s.status)==="paid"}),k=m(()=>{var s;return((s=u.transaction)==null?void 0:s.status)==="pending"}),E=m(()=>{var s;return((s=u.inspection)==null?void 0:s.status)==="rejected"});m(()=>{var s;return((s=u.inspection)==null?void 0:s.status)==="completed"});const q=m(()=>{var s;return((s=u.inspection)==null?void 0:s.status)==="cancelled"}),K=m(()=>{var s;return((s=u.inspection)==null?void 0:s.status)==="pending"}),O=m(()=>E.value||q.value||K.value),W=m(()=>{var s;return((s=u.transaction)==null?void 0:s.amount)>0}),M=m(()=>h.value&&x.value&&W.value);m(()=>b.value&&h.value&&x.value);const G=s=>{switch(s){case"draft":return"Dibuat";case"in_progress":return"Dalam Proses";case"pending":return"Menunggu";case"pending_review":return"Menunggu Review";case"approved":return"Disetujui";case"rejected":return"Ditolak";case"revision":return"Revisi";case"completed":return"Selesai";case"cancelled":return"Dibatalkan";default:return s}},J={pending:"Menunggu Pembayaran",paid:"Sudah di bayar",failed:"Gagal",refunded:"Dikembalikan",expired:"Kadaluarsa"},Q=m(()=>l.processing?"Menyimpan...":!b.value&&!h.value?"Tambah Data":b.value&&!h.value?"Tambah Pembayaran":!b.value&&h.value?"Tambahkan Data Customer":"Perbaharui Data"),Y=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),j=C(""),P=s=>{if(!s)return"";const e=String(s).replace(/\D/g,""),i=parseInt(e,10);return isNaN(i)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i)},X=s=>{const e=s.target.value.replace(/\D/g,"");l.amount=e,j.value=P(e)};se(()=>l.amount,s=>{if(s||s===0){const e=String(s).replace(/\D/g,"");j.value=P(e)}else j.value=""},{immediate:!0});const Z=()=>{u.inspection.customer&&(l.customer_name=u.inspection.customer.name,l.customer_phone=u.inspection.customer.phone,l.customer_email=u.inspection.customer.email,l.customer_address=u.inspection.customer.address),u.transaction&&(l.amount=Number(u.transaction.amount),j.value=P(l.amount),l.payment_method=u.transaction.payment_method,l.status=u.transaction.status),S.value=!0},_=()=>{const s=parseInt(l.amount,10);if(isNaN(s)){alert("Nominal pembayaran tidak valid.");return}l.status="paid",l.amount=s,l.post(route("inspections.updateUnified",u.encryptedIds),{preserveScroll:!0,onSuccess:()=>{S.value=!1,U.reload()}})},T=(s,e)=>{d.value=!0,p.value=e,U.visit(s,{onFinish:()=>{d.value=!1,p.value=null}})},R=s=>{d.value=!0,p.value="download",setTimeout(()=>{d.value=!1,p.value=null},1500)};return(s,e)=>(o(),$(ie,null,{default:D(()=>[f(r(ne),{title:"Review Inspeksi"}),t("div",me,[e[44]||(e[44]=t("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),t("div",ce,[t("div",pe,[t("div",null,[t("div",ve,[f(r(re),{class:"h-5 w-5 text-blue-500 mr-2"}),e[19]||(e[19]=t("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),t("p",ye,c(new Date(n.inspection.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),f(r(A),{href:s.route("inspection.log",n.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:D(()=>e[20]||(e[20]=[y(" Lihat Log ")])),_:1,__:[20]},8,["href"])]),t("div",xe,[t("div",ge,[f(r(de),{class:"h-5 w-5 text-gray-500 mr-2"}),t("div",be,[n.inspection.car?(o(),a("div",fe,[y(c(`${n.inspection.car.brand.name} ${n.inspection.car.model.name} ${n.inspection.car.type.name} ${(n.inspection.car.cc/1e3).toFixed(1)} ${n.inspection.car.transmission} ${n.inspection.car.year}`)+" ",1),t("span",we,"("+c(n.inspection.car.fuel_type)+")",1)])):(o(),a("div",he,c(n.inspection.car_name),1))])]),t("div",ke,[t("div",Ce,[e[21]||(e[21]=t("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),t("span",De,c(n.inspection.plate_number),1)]),n.inspection.status==="draft"&&z.value?(o(),$(r(A),{key:0,href:s.route("coordinator.inspections.show",n.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:D(()=>e[22]||(e[22]=[y(" Alihkan Tugas ")])),_:1,__:[22]},8,["href"])):v("",!0)])]),t("div",Ie,[t("div",Me,[e[23]||(e[23]=t("h4",{class:"text-sm font-medium text-gray-700"},"Informasi Customer & Pembayaran",-1)),!b.value&&!h.value&&!O.value?(o(),a("button",{key:0,onClick:Z,class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"},c(Q.value),1)):v("",!0)]),b.value?(o(),a("div",{key:0,class:g(["mb-3 p-2 rounded",{"bg-green-50 border border-green-200":b.value,"bg-yellow-50 border border-yellow-200":!b.value}])},[e[25]||(e[25]=t("p",{class:"text-xs font-medium text-gray-500"},"Customer",-1)),t("div",je,[t("div",null,[t("p",Ae,c(n.inspection.customer.name),1),t("p",Ve,c(n.inspection.customer.phone),1),n.inspection.customer.email?(o(),a("p",Se,c(n.inspection.customer.email),1)):v("",!0)]),n.inspection.customer.phone?(o(),a("a",{key:0,href:`https://wa.me/62${n.inspection.customer.phone.replace(/^0/,"")}`,target:"_blank",class:"text-green-600 hover:text-green-800 ml-2",title:"Hubungi via WhatsApp"},e[24]||(e[24]=[t("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1)]),8,Le)):v("",!0)])],2)):(o(),a("div",Ne,e[26]||(e[26]=[t("p",{class:"text-xs text-yellow-700"},"Data customer belum tersedia",-1)]))),h.value?(o(),a("div",{key:2,class:g(["p-2 rounded",{"bg-green-50 border border-green-200":x.value,"bg-red-50 border border-red-200":!x.value,"bg-yellow-50 border border-yellow-200":k.value}])},[e[29]||(e[29]=t("p",{class:"text-xs font-medium text-gray-500"},"Pembayaran",-1)),t("div",Be,[e[27]||(e[27]=t("span",null,"Status:",-1)),t("span",{class:g({"text-green-600 font-semibold":x.value,"text-yellow-600 font-semibold":k.value,"text-red-600 font-semibold":!x.value&&!k.value})},c(J[n.transaction.status]),3),e[28]||(e[28]=t("span",null,"Nominal:",-1)),t("span",{class:g({"text-green-700":x.value,"text-yellow-700":k.value,"text-red-700":!x.value&&!k.value})},c(Y(n.transaction.amount)),3),n.transaction.payment_method?(o(),a("span",Pe,"Metode:")):v("",!0),n.transaction.payment_method?(o(),a("span",{key:1,class:g({"text-green-700":x.value,"text-yellow-700":k.value,"text-red-700":!x.value&&!k.value})},c(n.transaction.payment_method),3)):v("",!0)])],2)):(o(),a("div",Te,e[30]||(e[30]=[t("p",{class:"text-xs text-yellow-700"},"Data transaksi belum tersedia",-1)])))]),n.inspection.category?(o(),a("div",$e,[e[31]||(e[31]=t("p",{class:"text-xs font-medium text-gray-500 tracking-wide"}," Kategori Inspeksi ",-1)),t("p",ze,c(n.inspection.category.name),1)])):v("",!0),t("div",Fe,[t("div",Re,[f(r(ue),{class:"h-5 w-5 text-green-500 mr-2"}),e[32]||(e[32]=t("span",{class:"text-sm font-medium text-gray-600"},"Status",-1))]),t("p",He,c(G(n.inspection.status)),1),t("div",Ue,[e[33]||(e[33]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"}," Catatan ",-1)),t("p",Ee,[t("div",{innerHTML:n.inspection.notes||"-"},null,8,qe)])])]),t("div",Ke,[n.inspection.status==="pending_review"?(o(),a(L,{key:0},[t("button",{onClick:e[0]||(e[0]=i=>N.value=!0),class:"flex-2 px-3 py-2 bg-yellow-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-yellow-600",disabled:d.value}," Revisi ",8,Oe),f(r(A),{href:s.route("inspections.review.pdf",n.encryptedIds),disabled:d.value,onClick:e[1]||(e[1]=i=>T(s.route("inspections.review.pdf",n.encryptedIds),"lihat_laporan")),class:g(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":d.value&&p.value==="lihat_laporan"}])},{default:D(()=>[d.value&&p.value==="lihat_laporan"?(o(),a("span",We,e[34]||(e[34]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Memuat Laporan... ")]))):(o(),a("span",Ge,"Lihat Laporan PDF"))]),_:1},8,["href","disabled","class"])],64)):n.inspection.status==="approved"&&n.inspection.file?(o(),a(L,{key:1},[M.value?(o(),a("a",{key:0,href:s.route("inspections.download.approved.pdf",n.encryptedIds),onClick:e[2]||(e[2]=i=>R(s.route("inspections.download.approved.pdf",n.encryptedIds))),class:g(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-blue-700",{"opacity-50 cursor-not-allowed":d.value&&p.value==="download"}]),disabled:d.value,download:""},[d.value&&p.value==="download"?(o(),a("span",Qe,e[35]||(e[35]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Sedang di download... ")]))):(o(),a("span",Ye,e[36]||(e[36]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),y(" PDF ")])))],10,Je)):(o(),a("div",Xe,e[37]||(e[37]=[t("span",{class:"text-xs"},"Transaksi belum selesai",-1)]))),f(r(A),{href:s.route("inspections.whatsapp",n.encryptedIds),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-green-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-green-700"},{default:D(()=>e[38]||(e[38]=[t("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1),y(" WhatsApp ")])),_:1,__:[38]},8,["href"]),t("button",{onClick:e[3]||(e[3]=i=>B.value=!0),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-teal-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-teal-600",disabled:d.value},e[39]||(e[39]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1),y(" Email ")]),8,Ze)],64)):v("",!0),n.inspection.status==="completed"&&n.inspection.file&&z.value?(o(),a("a",{key:2,href:M.value?s.route("inspections.download.approved.pdf",n.encryptedIds):null,onClick:e[4]||(e[4]=i=>M.value&&R(s.route("inspections.download.approved.pdf",n.encryptedIds))),class:g(["flex-1 inline-flex items-center justify-center px-3 py-2 font-medium rounded-md text-sm transition-colors",[M.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"]]),disabled:!M.value||d.value&&p.value==="download"},[d.value&&p.value==="download"?(o(),a("span",et,e[40]||(e[40]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Sedang diunduh... ")]))):(o(),a("span",tt,[M.value?(o(),a(L,{key:0},[e[41]||(e[41]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[42]||(e[42]=y(" Download PDF "))],64)):(o(),a(L,{key:1},[y(" PDF tersedia â€” selesaikan transaksi untuk mengunduh ")],64))]))],10,_e)):v("",!0)]),n.inspection.status==="approved"&&n.inspection.file?(o(),$(r(A),{key:1,href:s.route("inspections.review.pdf",n.encryptedIds),disabled:d.value,onClick:e[5]||(e[5]=i=>T(s.route("inspections.review.pdf",n.encryptedIds),"lihat_laporan")),class:g(["inline-flex items-center justify-center w-full px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":d.value&&p.value==="lihat_laporan"}])},{default:D(()=>[d.value&&p.value==="lihat_laporan"?(o(),a("span",st,e[43]||(e[43]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Memuat Laporan... ")]))):(o(),a("span",nt,"Lihat Laporan"))]),_:1},8,["href","disabled","class"])):v("",!0)])]),S.value?(o(),a("div",ot,[t("div",at,[t("h3",it,c(b.value?"Edit Data Customer & Transaksi":"Tambah Data Customer & Transaksi"),1),t("form",{onSubmit:oe(_,["prevent"]),class:"space-y-4"},[t("div",null,[e[50]||(e[50]=t("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Data Customer",-1)),t("div",lt,[t("div",null,[e[45]||(e[45]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Nama Customer *",-1)),w(t("input",{"onUpdate:modelValue":e[6]||(e[6]=i=>r(l).customer_name=i),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[I,r(l).customer_name]])]),t("div",null,[e[46]||(e[46]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Nomor WhatsApp *",-1)),w(t("input",{"onUpdate:modelValue":e[7]||(e[7]=i=>r(l).customer_phone=i),type:"tel",required:"",placeholder:"Contoh: 628123456789",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[I,r(l).customer_phone]]),e[47]||(e[47]=t("p",{class:"text-xs text-gray-500 mt-1"},"Gunakan format internasional (62 bukan 0)",-1))]),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Email",-1)),w(t("input",{"onUpdate:modelValue":e[8]||(e[8]=i=>r(l).customer_email=i),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[I,r(l).customer_email]])]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Alamat",-1)),w(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=i=>r(l).customer_address=i),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[I,r(l).customer_address]])])])]),t("div",null,[e[54]||(e[54]=t("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Data Transaksi",-1)),t("div",rt,[t("div",null,[e[51]||(e[51]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Nominal Pembayaran *",-1)),w(t("input",{"onUpdate:modelValue":e[10]||(e[10]=i=>j.value=i),onInput:X,type:"text",required:"",min:"0",placeholder:"Contoh: 250000",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,544),[[I,j.value]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Metode Pembayaran *",-1)),w(t("select",{"onUpdate:modelValue":e[11]||(e[11]=i=>r(l).payment_method=i),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},e[52]||(e[52]=[t("option",{value:""},"Pilih Metode",-1),t("option",{value:"cash"},"Cash",-1),t("option",{value:"transfer"},"Transfer",-1),t("option",{value:"debit_card"},"Kartu Debit",-1),t("option",{value:"credit_card"},"Kartu Kredit",-1),t("option",{value:"qris"},"QRIS",-1)]),512),[[ae,r(l).payment_method]])]),w(t("input",{type:"hidden","onUpdate:modelValue":e[12]||(e[12]=i=>r(l).status=i)},null,512),[[I,r(l).status]])])]),t("div",dt,[t("button",{type:"button",onClick:e[13]||(e[13]=i=>S.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-400"}," Batal "),t("button",{type:"submit",disabled:r(l).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50"},c(r(l).processing?"Menyimpan...":"Simpan"),9,ut)])],32)])])):v("",!0),N.value?(o(),a("div",mt,[t("div",ct,[e[56]||(e[56]=t("h3",{class:"text-lg font-bold mb-4"},"Konfirmasi Revisi",-1)),e[57]||(e[57]=t("p",{class:"text-gray-700 mb-2"}," Apakah Anda yakin ingin revisi pada laporan ini? ",-1)),e[58]||(e[58]=t("p",{class:"text-gray-700 mb-4"},"Setelah ini akan masuk ke halaman Inspeksi.",-1)),t("div",pt,[t("button",{onClick:e[14]||(e[14]=i=>N.value=!1),disabled:d.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,vt),f(r(A),{href:s.route("inspections.revisi",n.encryptedIds),disabled:d.value,onClick:e[15]||(e[15]=i=>T(s.route("inspections.revisi",n.encryptedIds),"revisi")),class:g(["bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600",{"opacity-50 cursor-not-allowed":d.value&&p.value==="revisi"}])},{default:D(()=>[d.value&&p.value==="revisi"?(o(),a("span",yt,e[55]||(e[55]=[t("svg",{class:"animate-spin h-5 w-5 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Memproses... ")]))):(o(),a("span",xt,"Ya, Revisi"))]),_:1},8,["href","disabled","class"])])])])):v("",!0),B.value?(o(),a("div",gt,[t("div",bt,[e[59]||(e[59]=t("h3",{class:"text-lg font-bold mb-4"},"Kirim Laporan Via Email",-1)),e[60]||(e[60]=t("p",{class:"text-gray-700 mb-2"}," Masukkan alamat email tujuan: ",-1)),w(t("input",{type:"email","onUpdate:modelValue":e[16]||(e[16]=i=>F.value=i),class:"w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contoh@email.com"},null,512),[[I,F.value]]),t("div",ft,[t("button",{onClick:e[17]||(e[17]=i=>B.value=!1),disabled:d.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,wt),t("button",{onClick:e[18]||(e[18]=(...i)=>s.sendEmail&&s.sendEmail(...i)),disabled:"",class:"bg-teal-500 text-white px-4 py-2 rounded-md hover:bg-teal-600"}," Masih dalam pengembangan ")])])])):v("",!0)]),_:1}))}},Vt=le(ht,[["__scopeId","data-v-3bed241f"]]);export{Vt as default};
