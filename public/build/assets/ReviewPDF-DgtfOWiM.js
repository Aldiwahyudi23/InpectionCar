import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as P,l as H,e as o,o as a,f as m,a as t,t as d,F as y,h as k,n as B}from"./app-DT7J50oG.js";const V={class:"p-6 bg-white"},q={key:0,class:"mt-2 mb-6"},z={class:"header flex flex-col gap-5 mb-6 mt-6"},J={class:"flex items-center gap-5"},Q=["src"],W={key:1,class:"w-40 h-40 border border-gray-300 flex items-center justify-center"},X={class:"mt-8"},Y={class:"text-xl font-bold m-0"},Z={key:0,class:"car-info"},ee={class:"w-full border-collapse border border-gray-300"},te={class:"p-2 border border-gray-300"},se={class:"p-2 border border-gray-300"},oe={class:"p-2 border border-gray-300"},ae={class:"p-2 border border-gray-300"},re={class:"p-2 border border-gray-300"},ne={class:"p-2 border border-gray-300"},de={class:"p-2 border border-gray-300"},ie={class:"p-2 border border-gray-300"},le={class:"p-2 border border-gray-300"},ue={key:1,class:"conclusion p-4 bg-gray-50 border-l-4 border-gray-800 rounded"},ce={class:"m-0"},be={class:"component-title bg-gray-100 px-3 py-2 border-l-4 border-gray-800 font-bold"},ge={key:0,class:"images flex flex-wrap gap-2 mt-4"},me=["src"],ye={key:1,class:"w-28 h-28 border border-gray-300 rounded flex items-center justify-center"},pe={class:"point-name inline-block min-w-40 font-bold align-top"},fe={class:"point-content inline-block w-calc-[100%-170px] align-top"},ke={key:1,class:"point-note italic text-gray-600 my-1"},he={key:0,class:"inspection-images flex flex-wrap gap-2 mt-4"},ve=["src"],xe={key:1,class:"w-20 h-20 border border-gray-300 rounded flex items-center justify-center"},we={key:1,class:"textarea-note italic text-gray-600 my-2"},_e={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center"},je={class:"bg-white p-6 rounded-lg shadow-xl w-96"},Ie={class:"flex justify-end space-x-4"},Fe=["disabled"],Te={key:0},Se={key:1},Ce={key:1,class:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700"},De={__name:"ReviewPDF",props:{inspection:{type:Object,required:!0},inspection_points:{type:Array,default:()=>[]},coverImage:{type:Object,default:null},encryptedIds:Object},setup(r){const T=r,h=P(!1),v=P(!1),K=H(()=>{const s={};return T.inspection_points.forEach(e=>{var l;const i=((l=e.component)==null?void 0:l.name)||"Tanpa Komponen";s[i]||(s[i]=[]),s[i].push(e)}),s}),M=()=>{v.value=!0,setTimeout(()=>{window.location.href=route("inspections.download.pdf",T.encryptedIds),v.value=!1,h.value=!1},2e3)},I=s=>s&&s.length>0,F=s=>`/${s}`,x=s=>s.results&&s.results.length>0,S=s=>s.images&&s.images.length>0,C=s=>x(s)&&s.results[0].note,N=s=>{const e=s.input_type||"";return["radio","imageTOradio"].includes(e)&&x(s)&&s.results[0].status},R=s=>{const e=s.input_type||"";return["text","number","date","textarea"].includes(e)&&C(s)},$=s=>{var u,g,f;const e=s.input_type||"",i=s.settings||{},l=((u=s.results)==null?void 0:u[0])||{},b=((f=(((g=i.radios)==null?void 0:g.find(w=>w.value===l.status))||{}).settings)==null?void 0:f.show_image_upload)||!1;return(e==="image"||e==="imageTOradio"||e==="radio"&&b)&&S(s)},A=s=>{var c,b,u;const e=s.settings||{},i=((c=s.results)==null?void 0:c[0])||{};return((u=(((b=e.radios)==null?void 0:b.find(g=>g.value===i.status))||{}).settings)==null?void 0:u.show_textarea)||!1},E=s=>{if(!s)return"status-warning";const e=s.toLowerCase();return["normal","ada","baik","good","ok"].includes(e)?"status-good":["tidak normal","tidak ada","rusak","bad","not ok"].includes(e)?"status-bad":"status-warning"},G=s=>{var c;const e=s.input_type||"",i=((c=s.results)==null?void 0:c[0])||{},l=s.settings||{};if(e==="account"&&i.note){const b=l.currency_symbol||"Rp",u=l.thousands_separator||".",g=l.decimal_separator||",";return`${b} ${Number(i.note).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(/,/g,g).replace(/\./g,u)}`}return i.note};return(s,e)=>{var i,l,c,b,u,g,f,w,D,L,O;return a(),o("div",V,[r.inspection.status==="pending_review"?(a(),o("div",q,[t("button",{onClick:e[0]||(e[0]=_=>h.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," Setujui Laporan "),e[2]||(e[2]=t("p",{class:"text-sm text-gray-500 mt-2 italic"}," Catatan: Halaman ini hanya simulasi dan mungkin berbeda dengan tampilan file PDF. Silakan periksa lebih detail untuk memastikan tidak ada kesalahan. Jika sudah yakin, silakan setujui untuk proses selanjutnya. ",-1))])):m("",!0),t("div",z,[t("div",J,[r.coverImage&&I(r.coverImage.image_path)?(a(),o("img",{key:0,src:F(r.coverImage.image_path),alt:"Foto Utama",class:"w-40 h-40 object-cover border border-gray-300"},null,8,Q)):(a(),o("div",W,e[3]||(e[3]=[t("span",null,"Gambar tidak tersedia",-1)]))),t("div",X,[t("h2",Y,d(r.inspection.car_name),1)])]),r.inspection.car_id?(a(),o("div",Z,[t("table",ee,[t("tr",null,[e[4]||(e[4]=t("td",{class:"p-2 border border-gray-300 font-bold w-1/3"},"Nomor Polisi",-1)),t("td",te,d(r.inspection.plate_number),1)]),t("tr",null,[e[5]||(e[5]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Merek",-1)),t("td",se,d((l=(i=r.inspection.car)==null?void 0:i.brand)==null?void 0:l.name),1)]),t("tr",null,[e[6]||(e[6]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Model",-1)),t("td",oe,d((b=(c=r.inspection.car)==null?void 0:c.model)==null?void 0:b.name),1)]),t("tr",null,[e[7]||(e[7]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Tipe",-1)),t("td",ae,d((g=(u=r.inspection.car)==null?void 0:u.type)==null?void 0:g.name),1)]),t("tr",null,[e[8]||(e[8]=t("td",{class:"p-2 border border-gray-300 font-bold"},"CC",-1)),t("td",re,d((f=r.inspection.car)==null?void 0:f.cc),1)]),t("tr",null,[e[9]||(e[9]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Bahan Bakar",-1)),t("td",ne,d((w=r.inspection.car)==null?void 0:w.fuel_type),1)]),t("tr",null,[e[10]||(e[10]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Transmisi",-1)),t("td",de,d((D=r.inspection.car)==null?void 0:D.transmission),1)]),t("tr",null,[e[11]||(e[11]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Periode Model",-1)),t("td",ie,d(((L=r.inspection.car)==null?void 0:L.production_period)||"-"),1)]),t("tr",null,[e[12]||(e[12]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Tahun Pembuatan",-1)),t("td",le,d((O=r.inspection.car)==null?void 0:O.year),1)])])])):m("",!0),r.inspection.notes?(a(),o("div",ue,[e[13]||(e[13]=t("h3",{class:"text-lg font-bold mb-2"},"Kesimpulan Inspeksi:",-1)),t("p",ce,d(r.inspection.notes),1)])):m("",!0)]),e[19]||(e[19]=t("h2",{class:"text-xl font-bold border-b-2 border-gray-800 pb-2 mb-6"},"Hasil Inspeksi",-1)),(a(!0),o(y,null,k(K.value,(_,j)=>(a(),o("div",{key:j,class:B(["section mb-6",j==="Foto Kendaraan"?"photo-component":""])},[t("div",be,d(j||"Tanpa Komponen"),1),j==="Foto Kendaraan"?(a(),o("div",ge,[(a(!0),o(y,null,k(_,n=>(a(),o("div",{key:n.id},[(a(!0),o(y,null,k(n.images,p=>(a(),o("div",{key:p.id,class:"image-container"},[I(p.image_path)?(a(),o("img",{key:0,src:F(p.image_path),alt:"Foto Kendaraan",class:"w-28 h-28 object-cover border border-gray-300 rounded"},null,8,me)):(a(),o("div",ye,e[14]||(e[14]=[t("span",{class:"text-xs"},"Gambar tidak ditemukan",-1)])))]))),128))]))),128))])):(a(!0),o(y,{key:1},k(_,n=>(a(),o("div",{key:n.id,class:"point ml-4 py-3 border-b border-gray-100"},[!x(n)&&!S(n)?(a(),o(y,{key:0},[],64)):(a(),o(y,{key:1},[t("span",pe,d(n.name||"-"),1),t("div",fe,[x(n)?(a(),o(y,{key:0},[N(n)?(a(),o("span",{key:0,class:B(["status-badge",E(n.results[0].status)])},d(n.results[0].status),3)):m("",!0),R(n)?(a(),o("div",ke,d(G(n)),1)):m("",!0)],64)):m("",!0)]),$(n)?(a(),o("div",he,[(a(!0),o(y,null,k(n.images,p=>(a(),o("div",{key:p.id,class:"image-container"},[I(p.image_path)?(a(),o("img",{key:0,src:F(p.image_path),alt:"image",class:"w-20 h-20 object-cover border border-gray-300 rounded"},null,8,ve)):(a(),o("div",xe,e[15]||(e[15]=[t("span",{class:"text-xs"},"Gambar tidak ditemukan",-1)])))]))),128))])):m("",!0),A(n)&&C(n)?(a(),o("div",we,d(n.results[0].note),1)):m("",!0)],64))]))),128))],2))),128)),h.value?(a(),o("div",_e,[t("div",je,[e[17]||(e[17]=t("h3",{class:"text-lg font-bold mb-4"},"Konfirmasi Laporan",-1)),e[18]||(e[18]=t("p",{class:"text-gray-700 mb-6"}," Apakah Anda yakin semua data sudah sesuai? Setelah disetujui, laporan akan diproses menjadi file PDF. ",-1)),t("div",Ie,[t("button",{onClick:e[1]||(e[1]=_=>h.value=!1),class:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400"}," Batal "),r.inspection.file?(a(),o("button",Ce,e[16]||(e[16]=[t("span",null,"Laporan sudah di buat",-1)]))):(a(),o("button",{key:0,onClick:M,class:"bg-sky-600 text-white px-4 py-2 rounded hover:bg-sky-700",disabled:v.value},[v.value?(a(),o("span",Te,"Membuat file PDF...")):(a(),o("span",Se,"Setujui Laporan"))],8,Fe))])])])):m("",!0)])}}},Pe=U(De,[["__scopeId","data-v-3af16b0f"]]);export{Pe as default};
