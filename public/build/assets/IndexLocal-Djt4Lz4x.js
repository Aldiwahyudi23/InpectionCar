import{q as _,r as g,G as V,x as Ot,L as Nt,g as Ut,c,o as r,b as m,d as o,u as l,M as ot,n as b,z as _e,I as st,f as Se,F as re,m as De,k as j,j as $t,w as ue,t as B,T as it,y as Kt,S as Rt,A as Ht,D as Wt,W as ce}from"./vendor-lhzHoW6A.js";import"./lodash-DrtvmM31.js";import{V as Ft,C as Gt,a as qt,B as Jt,_ as Yt}from"./ConclusionSection-BRwen3GS.js";import{_ as Xt}from"./app-Da3-dAnJ.js";import{u as at}from"./useDraggableButton-DQydPcWT.js";import"./PrimaryButton-DFMRt6cP.js";import"./ActionMessage-DmI1ZVVZ.js";const Zt={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},Qt={key:0,class:"fixed inset-0 bg-black bg-opacity-40 z-30 pointer-events-none transition-opacity duration-200"},en={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},tn={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},nn={class:"flex items-center space-x-2 flex-shrink-0"},on=["aria-checked"],sn={class:"flex items-center space-x-2 flex-shrink-0"},an={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},ln=["onClick","data-category"],rn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},un={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},cn={key:3,class:"fixed inset-0 z-30"},dn={class:"mt-2 space-y-2"},gn={class:"flex items-center space-x-2"},vn=["aria-checked"],pn={class:"flex items-center space-x-2"},mn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},fn=["onClick"],hn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},yn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},xn={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-400 text-white px-4 py-2 rounded shadow-lg z-50"},wn={class:"relative overflow-hidden"},bn={key:"vehicle"},kn={key:"conclusion"},Cn={key:1},_n=["disabled"],Sn={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Dn={class:"space-y-4"},Mn={class:"relative"},Tn={class:"max-h-64 overflow-y-auto"},Ln={key:0,class:"text-center py-4 text-gray-500"},En=["onClick"],In={class:"font-medium text-gray-900"},Pn={class:"text-sm text-gray-500"},Vn={class:"text-xs text-gray-400 mt-1"},jn={key:0,class:"text-xs text-green-600 mt-1"},Bn={key:3,class:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-center"},zn={__name:"IndexLocal",props:{inspection:Object,inspectionId:Object,category:Object,appMenus:Array,damagePoints:Array,existingResults:Object,existingImages:Object,CarDetail:Array,allInspections:Array},setup(k){var Fe,Ge,qe,Je,Ye,Xe,Ze,Qe,et,tt;const O=e=>{if(!e)return{};if(typeof e=="string")try{return JSON.parse(e)||{}}catch(t){return console.error("Error parsing settings JSON:",t),{}}return typeof e=="object"&&e!==null?e:{}},u=k,de=_(()=>`inspection_data_${u.inspection.id}`),ge=_(()=>`swipe_toggle_${u.inspection.id}`),ve=_(()=>`image_source_${u.inspection.id}`),pe=_(()=>`active_category_${u.inspection.id}`),Me=()=>{try{const e=localStorage.getItem(de.value);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading local storage:",e),{}}},lt=e=>{try{localStorage.setItem(de.value,JSON.stringify(e))}catch(t){console.error("Error writing to local storage:",t)}},rt=()=>{try{localStorage.removeItem(de.value),localStorage.removeItem(ge.value),localStorage.removeItem(ve.value),localStorage.removeItem(pe.value)}catch(e){console.error("Error clearing local storage:",e)}},ut=()=>{try{const e=localStorage.getItem(ge.value);return e?JSON.parse(e):!0}catch(e){return console.error("Error reading swipe toggle state:",e),!0}},ct=e=>{try{localStorage.setItem(ge.value,JSON.stringify(e))}catch(t){console.error("Error writing swipe toggle state:",t)}},dt=()=>{try{return localStorage.getItem(ve.value)||"all"}catch(e){return console.error("Error reading image source setting:",e),"all"}},gt=e=>{try{localStorage.setItem(ve.value,e)}catch(t){console.error("Error writing image source setting:",t)}},vt=()=>{try{return localStorage.getItem(pe.value)||D.value[0]}catch(e){return console.error("Error reading active category:",e),D.value[0]}},Te=e=>{try{localStorage.setItem(pe.value,e)}catch(t){console.error("Error writing active category:",t)}},N=g(((Ge=(Fe=u.category)==null?void 0:Fe.settings)==null?void 0:Ge.menu_model)||"horizontal"),S=g(((Je=(qe=u.category)==null?void 0:qe.settings)==null?void 0:Je.position)||"top"),U=g(!1),$=g(!1),{pos:Le,dragging:pt,startLongPress:G,cancelLongPress:Ee,onDrag:q,stopDrag:J,handleClick:mt}=at("toggleMenuButtonPos",{x:window.innerWidth-80,y:20}),ft=e=>{mt(e)&&ht()},ht=()=>{U.value=!U.value},K=()=>{U.value=!1},me=e=>e?"bg-gradient-to-r from-indigo-700 to-sky-600 text-white":"bg-gray-50 hover:bg-gray-100 text-gray-700",{pos:Ie,dragging:yt,startLongPress:Y,cancelLongPress:Pe,onDrag:X,stopDrag:Z,handleClick:xt}=at("damageButtonPos",{x:window.innerWidth-80,y:window.innerHeight-80}),wt=e=>{xt(e)&&(Q.value=!0)},Q=g(!1),ee=g(!1),R=g(""),h=g(null),H=g(""),W=g(""),z=g(""),te=g(!1),ne=g(null),bt=(e,t)=>{te.value=!0,ne.value=t,ce.visit(e,{onFinish:()=>{te.value=!1,ne.value=null}})},kt=_(()=>u.appMenus.some(e=>e.input_type==="damage")),D=_(()=>["vehicle",...u.appMenus.map(e=>String(e.id)),"conclusion"]),v=g(D.value[0]),fe=g(0);V(v,e=>{fe.value=D.value.indexOf(e)});const he=_(()=>{if(v.value==="vehicle"||v.value==="conclusion")return null;const e=u.appMenus.find(t=>String(t.id)===v.value);return e?{...e,points:ye(e.menu_point,e.input_type==="damage")}:null}),ye=(e,t)=>t?(e||[]).filter(s=>{const i=s.inspection_point_id;return Ae(i)}):e||[],L=g({plate_number:u.inspection.plate_number,car_id:u.inspection.car_id,car_name:u.inspection.car_name}),f=g({notes:u.inspection.overall_note||"",flooded:((Xe=(Ye=O(u.inspection.settings))==null?void 0:Ye.conclusion)==null?void 0:Xe.flooded)||null,collision:((Qe=(Ze=O(u.inspection.settings))==null?void 0:Ze.conclusion)==null?void 0:Qe.collision)||null,collision_severity:((tt=(et=O(u.inspection.settings))==null?void 0:et.conclusion)==null?void 0:tt.collision_severity)||null}),a=Ot((()=>{const e=[...u.appMenus.flatMap(T=>T.menu_point||[]),...u.damagePoints||[]],t={},s={};e.forEach(T=>{const M=T.inspection_point_id,C=u.existingResults[M];t[M]={status:(C==null?void 0:C.status)||"",note:(C==null?void 0:C.note)||""},s[M]=u.existingImages[M]||[]});const i=Me(),d={...t,...i.results||{}},y={...s,...i.images||{}},x={...L.value,...i.vehicleDetails||{}},p=i.overall_note!==void 0?i.overall_note:u.inspection.overall_note||"";return{inspection_id:u.inspection.id,results:d,images:y,overall_note:p,plate_number:x.plate_number,car_id:x.car_id,car_name:x.car_name}})());V(a,e=>{lt({results:e.results,images:e.images,overall_note:e.overall_note,vehicleDetails:L.value,conclusion:f.value})},{deep:!0}),V(L,e=>{a.plate_number=e.plate_number,a.car_id=e.car_id,a.car_name=e.car_name},{deep:!0}),V(f,e=>{a.overall_note=e.notes},{deep:!0});const Ve=g(!1),je=e=>{Ve.value=e},Be=g(!1),Ct=e=>{Be.value=e},oe=_(()=>{var d;const e=L.value.plate_number&&/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(L.value.plate_number),t=!!((d=L.value.car_name)!=null&&d.trim()),s=!Be.value,i=!Ve.value;return e&&t&&s&&i}),ze=_(()=>{if(!R.value.trim())return u.damagePoints||[];const e=R.value.toLowerCase().trim();return(u.damagePoints||[]).filter(t=>{var s,i,d,y,x;return((i=(s=t.inspection_point)==null?void 0:s.name)==null?void 0:i.toLowerCase().includes(e))||((y=(d=t.inspection_point)==null?void 0:d.description)==null?void 0:y.toLowerCase().includes(e))||((x=Oe(t))==null?void 0:x.toLowerCase().includes(e))})}),Ae=e=>{const t=a.results[e]&&(a.results[e].status||a.results[e].note),s=a.images[e]&&a.images[e].length>0;return t||s},Oe=e=>{var t;return((t=e.inspection_point.component)==null?void 0:t.name)||"Komponen Tidak Diketahui"},_t=e=>a.results[e]||null,xe=()=>{var y;const e=f.value,t=!!e.flooded,s=!!e.collision,i=e.collision==="yes"?!!e.collision_severity:!0,d=!!((y=e.notes)!=null&&y.trim());return t&&s&&i&&d},Ne=_(()=>({flooded:f.value.flooded||null,collision:f.value.collision||null,collision_severity:f.value.collision_severity||null,note:f.value.notes||null,isComplete:xe()})),Ue=_(()=>{const e=oe.value,t=u.appMenus.every(i=>we(i)),s=xe();return e&&t&&s}),we=e=>e.input_type==="damage"?ye(e.menu_point,!0).length>0:e.id==="conclusion"?xe():e.id==="vehicle"?oe.value:(ye(e.menu_point,!1)||[]).filter(s=>s.is_default).every(s=>{var x,p,T,M,C,F;const i=a.results[s.inspection_point_id],d=a.images[s.inspection_point_id];if(!i)return!1;const y=O(s.settings);switch(s.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!((x=i.note)!=null&&x.trim());case"select":case"radio":if(!i.status)return!1;const I=(p=y.radios)==null?void 0:p.find(n=>n.value===i.status);return!(I!=null&&I.settings&&(I.settings.show_textarea&&!((T=i.note)!=null&&T.trim())||I.settings.show_image_upload&&(d==null?void 0:d.length)===0));case"imageTOradio":if((d==null?void 0:d.length)===0||!i.status)return!1;const P=(M=y.radios)==null?void 0:M.find(n=>n.value===i.status);return!(P!=null&&P.settings&&P.settings.show_textarea&&P.settings.required&&!((C=i.note)!=null&&C.trim()));case"image":return(d==null?void 0:d.length)>0;default:return!!i.status||!!((F=i.note)!=null&&F.trim())}}),w=g(!0),E=g("all"),se=g(null),be=g([]),ie=g(0),ae=g(!1);Nt("imageSourceSetting",E);const $e=()=>{w.value=!w.value,ct(w.value)},Ke=()=>{gt(E.value),console.log("Image source setting updated to:",E.value)},le=()=>{se.value&&Wt(()=>{const e=se.value.querySelector(`[data-category="${v.value}"]`);if(!e)return;const t=se.value,s=t.clientWidth,i=e.offsetLeft,d=e.clientWidth,y=i-s/2+d/2;t.scrollTo({left:y,behavior:"smooth"})})},St=()=>ie.value===0?(ie.value=1,ae.value=!0,setTimeout(()=>{ie.value=0,ae.value=!1},2e3),window.history.pushState(null,null,window.location.href),!1):(ie.value=0,ae.value=!1,ce.visit(route("job.index")),!0),Dt=()=>{window.history.state===null&&window.history.replaceState({isBackButtonControlled:!0},""),window.history.pushState({isBackButtonControlled:!0},""),window.addEventListener("popstate",e=>{e.state&&e.state.isBackButtonControlled&&(e.preventDefault(),St())})},Mt=e=>{h.value=e;const t=e.inspection_point_id,s=a.results[t]||{};H.value=s.status||"",W.value=s.note||"",Q.value=!1,ee.value=!0},Tt=e=>{h.value&&(a.images[h.value.inspection_point_id]=e)},Lt=()=>{if(h.value){const e=h.value.inspection_point_id;a.results[e]={...a.results[e],status:H.value,note:W.value},z.value="Data berhasil disimpan di lokal!",setTimeout(()=>z.value="",1e3)}ke()},Et=({pointId:e,type:t,value:s})=>{var i;(i=a.results[e])!=null&&i.hasOwnProperty(t)&&(a.results[e][t]=s)},Re=async e=>{if(e&&confirm("Apakah kamu yakin ingin menghapus data ini?")){try{await ce.post(route("inspections.delete-result"),{inspection_id:u.inspection.id,point_id:e},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{a.results[e]&&(a.results[e]={status:"",note:""}),a.images[e]&&(a.images[e]=[]),z.value="Data berhasil dihapus!",setTimeout(()=>z.value="",1e3)},onError:t=>{console.error("Error menghapus hasil:",t)}})}catch(t){console.error("Error menghapus hasil:",t)}ke()}},It=e=>{Object.assign(L.value,e),je(!0)},Pt=e=>{console.log("Save car details locally:",e)},Vt=e=>{console.log("Received conclusion data from child:",e),f.value={...f.value,...e},a.overall_note=e.notes||"",console.log("Conclusion state updated:",f.value)},jt=()=>{if(!Ue.value){alert("Harap lengkapi semua menu inspeksi termasuk kesimpulan sebelum submit final");return}if(!confirm("Apakah Anda yakin ingin mengirim semua data inspeksi? Data lokal akan dihapus setelah berhasil dikirim."))return;$.value=!0;const e={...a.data(),overall_note:f.value.notes,conclusion:{notes:f.value.notes,flooded:f.value.flooded,collision:f.value.collision,collision_severity:f.value.collision_severity}};ce.post(route("inspections.final-submit-local",{id:u.inspection.id}),e,{preserveScroll:!0,onSuccess:()=>{rt()},onError:t=>{console.error("Kesalahan pengiriman:",t),$.value=!1}})},Bt=({pointId:e,imageId:t})=>{a.images[e]&&(a.images[e]=a.images[e].filter(s=>s.id!==t))},He=()=>{Q.value=!1,R.value=""},ke=()=>{ee.value=!1,h.value=null,H.value="",W.value=""},zt=()=>{},A=e=>{v.value=e,Te(e),le()},We=e=>{let t=fe.value+e;t>=0&&t<D.value.length&&(v.value=D.value[t],le())},At=()=>{let e=0,t=0,s=null;const i=p=>{w.value&&(e=p.changedTouches[0].screenX)},d=p=>{w.value&&(t=p.changedTouches[0].screenX,y())},y=()=>{if(!w.value)return;const p=250;t<e-p?We(1):t>e+p&&We(-1)},x=()=>{const p=document.querySelector(".relative.overflow-hidden");return p&&(p.addEventListener("touchstart",i,{passive:!0}),p.addEventListener("touchend",d,{passive:!0})),()=>{p&&(p.removeEventListener("touchstart",i),p.removeEventListener("touchend",d))}};return s=x(),V(w,p=>{s&&s(),p&&(s=x())}),()=>{s&&s()}};return V(v,(e,t)=>{le()}),V(v,e=>{fe.value=D.value.indexOf(e)}),Ut(()=>{const e=Me();if(w.value=ut(),E.value=dt(),e.vehicleDetails&&(Object.assign(L.value,e.vehicleDetails),a.plate_number=e.vehicleDetails.plate_number,a.car_id=e.vehicleDetails.car_id,a.car_name=e.vehicleDetails.car_name),e.conclusion)console.log("Loading conclusion from localStorage:",e.conclusion),Object.assign(f.value,e.conclusion),a.overall_note=e.conclusion.notes||"";else{const i=O(u.inspection.settings).conclusion||{};f.value={notes:u.inspection.notes||"",flooded:i.flooded||"",collision:i.collision||"",collision_severity:i.collision_severity||""},a.overall_note=u.inspection.notes||""}e.results&&Object.assign(a.results,e.results),e.images&&Object.assign(a.images,e.images);const t=vt();D.value.includes(t)?v.value=t:(v.value=D.value[0],Te(D.value[0])),At(),Dt(),setTimeout(()=>{le()},100)}),(e,t)=>{var s,i,d,y,x,p,T,M,C,F,I,P;return r(),c("div",Zt,[l(yt)||l(pt)?(r(),c("div",Qt)):m("",!0),N.value==="vertical"?(r(),c("button",{key:1,onMousedown:t[0]||(t[0]=(...n)=>l(G)&&l(G)(...n)),onMouseup:t[1]||(t[1]=(...n)=>l(J)&&l(J)(...n)),onMouseleave:t[2]||(t[2]=(...n)=>l(Ee)&&l(Ee)(...n)),onMousemove:t[3]||(t[3]=(...n)=>l(q)&&l(q)(...n)),onTouchstart:t[4]||(t[4]=(...n)=>l(G)&&l(G)(...n)),onTouchend:t[5]||(t[5]=(...n)=>l(J)&&l(J)(...n)),onTouchmove:t[6]||(t[6]=(...n)=>l(q)&&l(q)(...n)),onClick:ft,class:"fixed z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white border shadow-lg rounded-full hover:shadow-xl transition",style:ot({left:l(Le).x+"px",top:l(Le).y+"px"}),"aria-label":"Toggle vertical menu"},[U.value?(r(),c("svg",tn,t[25]||(t[25]=[o("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(r(),c("svg",en,t[24]||(t[24]=[o("path",{"fill-rule":"evenodd",d:"M3 5h14v2H3V5zm0 4h10v2H3V9zm0 4h6v2H3v-2z","clip-rule":"evenodd"},null,-1)])))],36)):m("",!0),N.value==="horizontal"?(r(),c("div",{key:2,class:b(["z-10 bg-white shadow-sm",{"sticky top-0 mb-2":S.value==="top","fixed bottom-0 left-0 right-0":S.value==="bottom"}])},[o("div",{ref_key:"menuContainer",ref:se,class:"flex overflow-x-auto scrollbar-hide py-3 px-4 space-x-2 menu-container",onScroll:zt},[o("div",nn,[t[26]||(t[26]=o("span",{class:"text-sm text-gray-600"},"Swipe",-1)),o("button",{onClick:$e,type:"button",class:b(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",w.value?"bg-indigo-600":"bg-gray-200"]),role:"switch","aria-checked":w.value},[o("span",{"aria-hidden":"true",class:b(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",w.value?"translate-x-5":"translate-x-0"])},null,2)],10,on)]),o("div",sn,[t[28]||(t[28]=o("span",{class:"text-sm text-gray-600"},"Sumber",-1)),_e(o("select",{"onUpdate:modelValue":t[7]||(t[7]=n=>E.value=n),onChange:Ke,class:"text-sm border border-gray-300 rounded-md px-5 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},t[27]||(t[27]=[o("option",{value:"all"},"Tanya",-1),o("option",{value:"camera"},"Kamera",-1),o("option",{value:"gallery"},"Galeri",-1)]),544),[[st,E.value]])]),o("button",{ref_key:"menuItems",ref:be,onClick:t[8]||(t[8]=n=>A("vehicle")),class:b(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":v.value==="vehicle","bg-gray-100 text-gray-700 hover:bg-gray-200":v.value!=="vehicle"}]),"data-category":"vehicle"},[t[29]||(t[29]=Se(" Detail Kendaraan ")),oe.value?(r(),c("span",an," ✓ ")):m("",!0)],2),(r(!0),c(re,null,De(k.appMenus,n=>(r(),c("button",{key:n.id,ref_for:!0,ref_key:"menuItems",ref:be,onClick:Ce=>A(String(n.id)),class:b(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":v.value===String(n.id),"bg-gray-100 text-gray-700 hover:bg-gray-200":v.value!==String(n.id)}]),"data-category":String(n.id)},[Se(B(n.name)+" ",1),we(n)?(r(),c("span",rn," ✓ ")):m("",!0)],10,ln))),128)),o("button",{ref_key:"menuItems",ref:be,onClick:t[9]||(t[9]=n=>A("conclusion")),class:b(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":v.value==="conclusion","bg-gray-100 text-gray-700 hover:bg-gray-200":v.value!=="conclusion"}]),"data-category":"conclusion"},[t[30]||(t[30]=Se(" Kesimpulan ")),Ne.value.isComplete?(r(),c("span",un," ✓ ")):m("",!0)],2)],544)],2)):m("",!0),N.value==="vertical"&&U.value?(r(),c("div",cn,[o("div",{class:"absolute inset-0 bg-black bg-opacity-30",onClick:K}),o("div",{class:b(["absolute z-40 w-60 bg-white rounded-xl shadow-xl p-2 max-h-[75vh] overflow-y-auto",{"top-16 right-4":S.value==="top-right","top-16 left-4":S.value==="top-left","bottom-16 right-4":S.value==="bottom-right","bottom-16 left-4":S.value==="bottom-left"}])},[o("div",{class:"flex items-center justify-between px-2 py-1 border-b"},[t[31]||(t[31]=o("div",{class:"text-sm font-semibold"},"Pilih Menu",-1)),o("button",{onClick:K,class:"text-xs text-gray-500 hover:text-gray-700"},"Tutup")]),o("div",dn,[o("div",gn,[t[32]||(t[32]=o("span",{class:"text-sm text-gray-600"},"Swipe Gesture",-1)),o("button",{onClick:$e,type:"button",class:b(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",w.value?"bg-indigo-600":"bg-gray-200"]),role:"switch","aria-checked":w.value},[o("span",{"aria-hidden":"true",class:b(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",w.value?"translate-x-5":"translate-x-0"])},null,2)],10,vn)]),o("div",pn,[t[34]||(t[34]=o("span",{class:"text-sm text-gray-600"},"Sumber",-1)),_e(o("select",{"onUpdate:modelValue":t[10]||(t[10]=n=>E.value=n),onChange:Ke,class:"text-sm border border-gray-300 rounded-md px-6 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},t[33]||(t[33]=[o("option",{value:"all"},"Tanya",-1),o("option",{value:"camera"},"Kamera",-1),o("option",{value:"gallery"},"Galeri",-1)]),544),[[st,E.value]])]),o("button",{onClick:t[11]||(t[11]=n=>{A("vehicle"),K()}),class:b([me(v.value==="vehicle"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[t[35]||(t[35]=o("span",null,"Detail Kendaraan",-1)),oe.value?(r(),c("span",mn,"✓")):m("",!0)],2),(r(!0),c(re,null,De(k.appMenus,n=>(r(),c("button",{key:`vmenu-${n.id}`,onClick:()=>{A(String(n.id)),K()},class:b([me(v.value===String(n.id)),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[o("span",null,B(n.name),1),we(n)?(r(),c("span",hn,"✓")):m("",!0)],10,fn))),128)),o("button",{onClick:t[12]||(t[12]=n=>{A("conclusion"),K()}),class:b([me(v.value==="conclusion"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[t[36]||(t[36]=o("span",null,"Kesimpulan",-1)),Ne.value.isComplete?(r(),c("span",yn,"✓")):m("",!0)],2)])],2)])):m("",!0),o("div",{class:b(["max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-1",{"pb-4 pt-1":S.value==="top","pb-20 pt-4":S.value==="bottom","pb-4 pt-4":N.value==="vertical"}])},[j(it,{name:"fade"},{default:ue(()=>[z.value?(r(),c("div",xn,B(z.value),1)):m("",!0)]),_:1}),o("div",wn,[j(it,{name:"category-slide",mode:"out-in"},{default:ue(()=>[v.value==="vehicle"?(r(),c("div",bn,[j(Ft,{inspection:k.inspection,CarDetail:k.CarDetail,allInspections:u.allInspections,onUpdateVehicle:It,onSaveCarDetails:Pt,"onUpdate:validation":Ct,"onUpdate:hasUnsavedChanges":je},null,8,["inspection","CarDetail","allInspections"])])):he.value&&v.value!=="conclusion"?(r(),c("div",{key:he.value.id},[j(Gt,{category:he.value,"inspection-id":k.inspection.id,form:l(a),head:N.value,onUpdateResult:Et,onHapusPoint:Re,onRemoveImage:Bt},null,8,["category","inspection-id","form","head"])])):v.value==="conclusion"?(r(),c("div",kn,[j(qt,{form:{conclusion:f.value},"inspection-id":k.inspection.id,inspection:k.inspection,settings:k.inspection.settings||{},onUpdateConclusion:Vt},null,8,["form","inspection-id","inspection","settings"])])):m("",!0)]),_:1})]),v.value==="conclusion"?(r(),c("div",{key:0,class:b(["flex justify-end gap-4 mt-2 p-4 bg-white rounded-xl shadow-md",{"mb-4":S.value==="top","mb-20":S.value==="bottom"}])},[j(l(Rt),{href:e.route("inspections.pending",k.inspectionId),as:"button",type:"button",disabled:te.value&&ne.value==="pending",onClick:t[13]||(t[13]=Kt(n=>bt(e.route("inspections.pending",k.inspectionId),"pending"),["prevent"])),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md shadow-sm bg-yellow-500 text-white hover:bg-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed"},{default:ue(()=>[te.value&&ne.value==="pending"?(r(),c(re,{key:0},[t[37]||(t[37]=o("svg",{class:"animate-spin h-4 w-4 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t[38]||(t[38]=o("span",null,"Memproses...",-1))],64)):(r(),c("span",Cn,"Tunda"))]),_:1},8,["href","disabled"]),o("button",{type:"button",onClick:jt,disabled:!Ue.value||$.value,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[$.value?(r(),c("svg",Sn,t[39]||(t[39]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),o("span",null,B($.value?"Mengirim...":"Final Kirim Inspeksi"),1)],8,_n)],2)):m("",!0),kt.value?(r(),c("button",{key:1,onMousedown:t[14]||(t[14]=(...n)=>l(Y)&&l(Y)(...n)),onMouseup:t[15]||(t[15]=(...n)=>l(Z)&&l(Z)(...n)),onMouseleave:t[16]||(t[16]=(...n)=>l(Pe)&&l(Pe)(...n)),onMousemove:t[17]||(t[17]=(...n)=>l(X)&&l(X)(...n)),onTouchstart:t[18]||(t[18]=(...n)=>l(Y)&&l(Y)(...n)),onTouchend:t[19]||(t[19]=(...n)=>l(Z)&&l(Z)(...n)),onTouchmove:t[20]||(t[20]=(...n)=>l(X)&&l(X)(...n)),onClick:wt,class:"fixed z-5 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white rounded-full shadow-lg",style:ot({left:l(Ie).x+"px",top:l(Ie).y+"px"})},t[40]||(t[40]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),36)):m("",!0),j(Jt,{show:Q.value,title:"Cari Point Inspeksi",subtitle:"Pilih point inspeksi untuk ditambahkan",onClose:He},{default:ue(()=>[o("button",{onClick:He,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10"},t[41]||(t[41]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),o("div",Dn,[o("div",Mn,[_e(o("input",{"onUpdate:modelValue":t[21]||(t[21]=n=>R.value=n),type:"text",placeholder:"Cari point inspeksi...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[Ht,R.value]]),t[42]||(t[42]=o("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[o("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),o("div",Tn,[ze.value.length===0?(r(),c("div",Ln," Tidak ada point yang ditemukan ")):m("",!0),(r(!0),c(re,null,De(ze.value,n=>{var Ce,nt;return r(),c("button",{key:n.id,onClick:On=>Mt(n),class:"w-full text-left p-3 border-b border-gray-200 hover:bg-gray-50 transition-colors"},[o("div",In,B((Ce=n.inspection_point)==null?void 0:Ce.name),1),o("div",Pn,B((nt=n.inspection_point)==null?void 0:nt.description),1),o("div",Vn,B(Oe(n)),1),Ae(n.inspection_point_id)?(r(),c("div",jn," ✓ Sudah ada data ")):m("",!0)],8,En)}),128))])])]),_:1},8,["show"]),ee.value?(r(),$t(Yt,{key:(s=h.value)==null?void 0:s.id,show:ee.value,title:((d=(i=h.value)==null?void 0:i.inspection_point)==null?void 0:d.name)||"Detail Point",subtitle:(x=(y=h.value)==null?void 0:y.inspection_point)==null?void 0:x.description,name:`point-${(p=h.value)==null?void 0:p.id}`,"inspection-id":k.inspection.id,"point-id":(T=h.value)==null?void 0:T.inspection_point_id,settings:((M=h.value)==null?void 0:M.settings)||{},options:((F=(C=h.value)==null?void 0:C.settings)==null?void 0:F.radios)||[],"selected-Point":h.value,"selected-value":H.value,"images-value":l(a).images[(I=h.value)==null?void 0:I.inspection_point_id],"notes-value":W.value,point:h.value,"existing-data":_t((P=h.value)==null?void 0:P.inspection_point_id),"onUpdate:selectedValue":t[22]||(t[22]=n=>H.value=n),"onUpdate:notesValue":t[23]||(t[23]=n=>W.value=n),"onUpdate:imagesValue":Tt,onSave:Lt,onClose:ke,onHapus:Re},null,8,["show","title","subtitle","name","inspection-id","point-id","settings","options","selected-Point","selected-value","images-value","notes-value","point","existing-data"])):m("",!0),ae.value?(r(),c("div",Bn,t[43]||(t[43]=[o("p",{class:"text-sm"},"Tekan sekali lagi untuk keluar dari inspeksi",-1),o("p",{class:"text-xs text-gray-300 mt-1"},"Data inspeksi telah disimpan secara lokal",-1)]))):m("",!0)],2)])}}},Fn=Xt(zn,[["__scopeId","data-v-d4a105e7"]]);export{Fn as default};
