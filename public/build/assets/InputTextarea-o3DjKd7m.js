import{r as y,G as w,c,o as m,b as V,d,F as L,m as N,t as p,n as j}from"./vendor-g77w9U1W.js";const q={class:"mt-1 space-y-3"},B={key:0,class:"space-y-2"},C={class:"flex flex-wrap gap-2"},D=["onClick"],T=["value","required","minlength","maxlength","placeholder"],F={class:"flex justify-between items-center mt-1"},O={class:"text-xs text-gray-500"},z={key:0,class:"text-xs text-red-600"},G={__name:"InputTextarea",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],placeholder:String,error:String,pointId:[String,Number],inspectionId:[String,Number],settings:Object},emits:["update:modelValue","save"],setup(t,{emit:I}){const l=t,g=I,i=y([]),v=y(""),x=e=>i.value.some(a=>a.value===e),k=e=>{x(e.value)?i.value=i.value.filter(n=>n.value!==e.value):i.value.push(e);const o=[...i.value.map(n=>n.value)];v.value.trim()&&o.push(v.value.trim());const r=o.join(", ");g("update:modelValue",r),g("save",{pointId:l.pointId,inspectionId:l.inspectionId,notes:r})},S=e=>{const a=e.target.value;g("update:modelValue",a),g("save",{pointId:l.pointId,inspectionId:l.inspectionId,notes:a}),b(a)},b=e=>{var n,u,h,f;if(!e){i.value=[],v.value="";return}const a=e.split(",").map(s=>s.trim()).filter(s=>s),o=((u=(n=l.settings)==null?void 0:n.damage_options)==null?void 0:u.map(s=>s.value))||[];i.value=((f=(h=l.settings)==null?void 0:h.damage_options)==null?void 0:f.filter(s=>a.includes(s.value)))||[];const r=a.filter(s=>!o.includes(s));v.value=r.join(", ")};return w(()=>l.modelValue,e=>{e!=null&&b(e)},{immediate:!0}),(e,a)=>{var o,r,n;return m(),c("div",q,[(o=t.settings)!=null&&o.enable_damage&&((r=t.settings)!=null&&r.damage_options)?(m(),c("div",B,[a[0]||(a[0]=d("h4",{class:"text-sm font-medium text-gray-700"},"Pilih Kerusakan:",-1)),d("div",C,[(m(!0),c(L,null,N(t.settings.damage_options,(u,h)=>(m(),c("button",{key:h,type:"button",onClick:f=>k(u),class:j(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors border",{"border-indigo-500 bg-indigo-100 text-indigo-700":x(u.value),"border-gray-300 bg-white text-gray-700 hover:bg-gray-50":!x(u.value)}])},p(u.label),11,D))),128))])])):V("",!0),d("div",null,[d("textarea",{value:t.modelValue,onInput:S,required:t.required,minlength:t.minLength,maxlength:t.maxLength,placeholder:t.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",rows:"4"},null,40,T),d("div",F,[d("span",O,p(((n=t.modelValue)==null?void 0:n.length)||0)+"/"+p(t.maxLength||400),1),t.error?(m(),c("p",z,p(t.error),1)):V("",!0)])])])}}};export{G as default};
