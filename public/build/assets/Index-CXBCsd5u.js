import{N as B,r as R,G as A,W as V,j as _,o as r,w as c,k as b,d as t,u as d,v as L,t as a,c as l,b as k,z as g,F as v,m as y,I as h,A as U,n as p,S as f,f as u}from"./vendor-CwaeDJfC.js";import{l as z}from"./lodash-DfwitXkl.js";import{A as N}from"./AppLayout-CItZxkzl.js";import"./app-BT3C7vU4.js";const O={class:"flex-1 overflow-y-auto"},P={class:"bg-white shadow-md p-4 md:p-6 flex items-center justify-between"},F={class:"flex items-center space-x-4 text-sm text-gray-600"},W={class:"w-full py-4 sm:px-4 lg:px-4"},$={class:"px-4 sm:px-0 mb-4"},H={class:"bg-white overflow-hidden shadow-lg rounded-2xl p-4"},K={class:"grid grid-cols-2 sm:grid-cols-2 gap-4 mb-4"},E={key:0},G=["value"],q={key:1},J=["value"],Q={class:"px-4 sm:px-0 mb-4"},X={class:"flex flex-col gap-4"},Y={class:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-2 rounded-2xl shadow-lg text-center transition-transform transform hover:scale-105 duration-300"},Z={class:"text-3xl font-semibold"},tt={class:"grid grid-cols-3 sm:grid-cols-3 gap-2"},et={class:"bg-yellow-100 p-2 rounded-2xl shadow-lg text-center transition-transform transform hover:scale-105 duration-300"},st={class:"text-2xl font-semibold text-yellow-600"},ot={class:"bg-blue-100 p-2 rounded-2xl shadow-lg text-center transition-transform transform hover:scale-105 duration-300"},at={class:"text-2xl font-semibold text-blue-600"},nt={class:"bg-amber-100 p-2 rounded-2xl shadow-lg text-center transition-transform transform hover:scale-105 duration-300"},it={class:"text-2xl font-semibold text-amber-600"},rt={class:"bg-indigo-100 p-2 rounded-2xl shadow-lg text-center transition-transform transform hover:scale-105 duration-300"},lt={class:"text-2xl font-semibold text-indigo-600"},dt={class:"bg-green-100 p-2 rounded-2xl shadow-lg text-center transition-transform transform hover:scale-105 duration-300"},ut={class:"text-2xl font-semibold text-green-600"},mt={class:"bg-red-100 p-2 rounded-2xl shadow-lg text-center transition-transform transform hover:scale-105 duration-300"},xt={class:"text-2xl font-semibold text-red-600"},ct={class:"bg-purple-100 p-2 rounded-2xl shadow-lg text-center transition-transform transform hover:scale-105 duration-300"},gt={class:"text-2xl font-semibold text-purple-600"},pt={class:"bg-gray-100 p-2 rounded-2xl shadow-lg text-center transition-transform transform hover:scale-105 duration-300"},ft={class:"text-2xl font-semibold text-gray-600"},bt={class:"bg-emerald-100 p-2 rounded-2xl shadow-lg text-center transition-transform transform hover:scale-105 duration-300"},vt={class:"text-2xl font-semibold text-emerald-600"},yt={class:"px-4 sm:px-0"},ht={class:"bg-white shadow-lg overflow-hidden rounded-2xl"},wt={class:"flex flex-col"},_t={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},kt={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},Dt={class:"shadow overflow-hidden border-b border-gray-200 rounded-xl"},jt={class:"min-w-full divide-y divide-gray-200"},St={class:"bg-white divide-y divide-gray-200"},Tt={class:"px-6 py-4 whitespace-nowrap"},It={class:"flex items-center"},Mt={class:"ml-4"},Ct={class:"text-sm font-medium text-gray-900"},Bt={class:"text-sm text-gray-500"},Rt={class:"px-6 py-4 whitespace-nowrap"},At={class:"text-sm text-gray-900"},Vt={class:"text-sm text-gray-500"},Lt={class:"px-6 py-4 whitespace-nowrap"},Ut={class:"text-sm text-gray-900"},zt={class:"text-sm text-gray-500"},Nt={class:"px-6 py-4 whitespace-nowrap"},Ot={class:"px-6 py-4 whitespace-nowrap"},Pt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},Ft={class:"bg-white px-6 py-2 flex items-center justify-between border-t border-gray-200 mt-2"},Wt={class:"flex-1 flex justify-between sm:hidden"},$t={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},Ht={class:"text-sm text-gray-700"},Kt={class:"font-medium"},Et={class:"font-medium"},Gt={class:"font-medium"},qt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Zt={__name:"Index",props:{inspections:Object,encryptedIds:Object,filters:Object,stats:Object,region:Object,allRegions:Array,isAdmin:Boolean},setup(o){const m=o,i=B({status:m.filters.status||"",dateRange:m.filters.dateRange||"all",search:m.filters.search||"",region_id:m.filters.region_id||"all",user_id:m.filters.user_id||""}),w=R([]);A(()=>i.region_id,async n=>{if(m.isAdmin)if(!n||n==="all"){let e=await axios.get(route("api.users.all"));w.value=e.data}else{let e=await axios.get(route("api.region.users",{id:n}));w.value=e.data}});const D=z.debounce(()=>{x()},500),x=()=>{V.get(route("coordinator.inspections.index"),i,{preserveState:!0,replace:!0})},M=n=>{const e={year:"numeric",month:"long",day:"numeric"};return new Date(n).toLocaleDateString("id-ID",e)},C=n=>{const e={hour:"2-digit",minute:"2-digit"};return new Date(n).toLocaleTimeString("id-ID",e)},j=n=>({draft:"Dibuat",in_progress:"Dalam Proses",pending:"Tertunda",pending_review:"Menunggu Tinjauan",approved:"Disetujui",rejected:"Ditolak",revision:"Revisi",completed:"Selesai",cancelled:"Dibatalkan",paid:"Sudah di bayar",failed:"Gagal",refunded:"Dikembalikan",expired:"Kadaluarsa",released:"Diberikan"})[n]||n,S=n=>({draft:"bg-slate-400 text-white",in_progress:"bg-blue-600 text-white",pending:"bg-amber-500 text-white",pending_review:"bg-indigo-500 text-white",approved:"bg-emerald-500 text-white",rejected:"bg-red-500 text-white",revision:"bg-orange-500 text-white",completed:"bg-emerald-500 text-white",cancelled:"bg-red-500 text-white",failed:"bg-red-500 text-white",expired:"bg-red-500 text-white",paid:"bg-emerald-500 text-white",refunded:"bg-orange-500 text-white"})[n]||"bg-gray-100 text-gray-800";return(n,e)=>(r(),_(N,{title:"Buat Inspeksi Baru"},{default:c(()=>[b(d(L),{title:"Dashboard Koordinator"}),t("div",O,[t("header",P,[e[7]||(e[7]=t("h1",{class:"text-xl font-bold text-gray-900"},"Dashboard Koordinator",-1)),t("div",F,[e[6]||(e[6]=t("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),t("span",null,"Wilayah: "+a(o.region.name),1)])]),t("main",W,[t("div",$,[t("div",H,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Saring Inspeksi",-1)),t("div",K,[o.isAdmin?(r(),l("div",E,[e[9]||(e[9]=t("label",{for:"region",class:"block text-sm font-medium text-gray-700"},"Region",-1)),g(t("select",{id:"region","onUpdate:modelValue":e[0]||(e[0]=s=>i.region_id=s),onChange:x,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"},[e[8]||(e[8]=t("option",{value:"all"},"Semua Region",-1)),(r(!0),l(v,null,y(o.allRegions,s=>(r(),l("option",{key:s.id,value:s.id},a(s.name),9,G))),128))],544),[[h,i.region_id]])])):k("",!0),o.isAdmin?(r(),l("div",q,[e[11]||(e[11]=t("label",{for:"user",class:"block text-sm font-medium text-gray-700"},"User",-1)),g(t("select",{id:"user","onUpdate:modelValue":e[1]||(e[1]=s=>i.user_id=s),onChange:x,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"},[e[10]||(e[10]=t("option",{value:""},"Semua User",-1)),(r(!0),l(v,null,y(w.value,s=>(r(),l("option",{key:s.id,value:s.id},a(s.name),9,J))),128))],544),[[h,i.user_id]])])):k("",!0),t("div",null,[e[13]||(e[13]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),g(t("select",{id:"status","onUpdate:modelValue":e[2]||(e[2]=s=>i.status=s),onChange:x,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"},e[12]||(e[12]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"draft"},"Dibuat",-1),t("option",{value:"in_progress"},"Dalam Proses",-1),t("option",{value:"pending"},"Tertunda",-1),t("option",{value:"pending_review"},"Menunggu Tinjauan",-1),t("option",{value:"approved"},"Disetujui",-1),t("option",{value:"rejected"},"Ditolak",-1),t("option",{value:"revision"},"Revisi",-1),t("option",{value:"completed"},"Selesai",-1),t("option",{value:"cancelled"},"Dibatalkan",-1)]),544),[[h,i.status]])]),t("div",null,[e[15]||(e[15]=t("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Rentang Tanggal",-1)),g(t("select",{id:"date","onUpdate:modelValue":e[3]||(e[3]=s=>i.dateRange=s),onChange:x,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"},e[14]||(e[14]=[t("option",{value:"all"},"Sepanjang Waktu",-1),t("option",{value:"today"},"Hari Ini",-1),t("option",{value:"week"},"Minggu Ini",-1),t("option",{value:"month"},"Bulan Ini",-1)]),544),[[h,i.dateRange]])])]),t("div",null,[e[16]||(e[16]=t("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Cari",-1)),g(t("input",{type:"text",id:"search","onUpdate:modelValue":e[4]||(e[4]=s=>i.search=s),onInput:e[5]||(e[5]=(...s)=>d(D)&&d(D)(...s)),placeholder:"Cari berdasarkan mobil atau inspektor...",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,544),[[U,i.search]])])])]),t("div",Q,[t("div",X,[t("div",Y,[e[18]||(e[18]=t("dt",{class:"text-sm font-medium opacity-80"},"Total Inspeksi",-1)),t("dd",Z,a(o.stats.total),1)]),t("div",tt,[t("div",et,[e[19]||(e[19]=t("dt",{class:"text-sm font-medium text-gray-700 truncate"},"Dibuat",-1)),t("dd",st,a(o.stats.draft),1)]),t("div",ot,[e[20]||(e[20]=t("dt",{class:"text-sm font-medium text-gray-700 truncate"},"Dalam Proses",-1)),t("dd",at,a(o.stats.in_progress),1)]),t("div",nt,[e[21]||(e[21]=t("dt",{class:"text-sm font-medium text-gray-700 truncate"},"Tertunda",-1)),t("dd",it,a(o.stats.pending),1)]),t("div",rt,[e[22]||(e[22]=t("dt",{class:"text-sm font-medium text-gray-700 truncate"},"Ditinjau",-1)),t("dd",lt,a(o.stats.pending_review),1)]),t("div",dt,[e[23]||(e[23]=t("dt",{class:"text-sm font-medium text-gray-700 truncate"},"Disetujui",-1)),t("dd",ut,a(o.stats.approved),1)]),t("div",mt,[e[24]||(e[24]=t("dt",{class:"text-sm font-medium text-gray-700 truncate"},"Ditolak",-1)),t("dd",xt,a(o.stats.rejected),1)]),t("div",ct,[e[25]||(e[25]=t("dt",{class:"text-sm font-medium text-gray-700 truncate"},"Revisi",-1)),t("dd",gt,a(o.stats.revision),1)]),t("div",pt,[e[26]||(e[26]=t("dt",{class:"text-sm font-medium text-gray-700 truncate"},"Dibatalkan",-1)),t("dd",ft,a(o.stats.cancelled),1)]),t("div",bt,[e[27]||(e[27]=t("dt",{class:"text-sm font-medium text-gray-700 truncate"},"Selesai",-1)),t("dd",vt,a(o.stats.completed),1)])])])]),t("div",yt,[t("div",ht,[t("div",wt,[t("div",_t,[t("div",kt,[t("div",Dt,[t("table",jt,[e[30]||(e[30]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Detail Mobil "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Inspektur "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tanggal Inspeksi "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status Inspection "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status Pembayaran "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tindakan ")])],-1)),t("tbody",St,[(r(!0),l(v,null,y(o.inspections.data,s=>{var T,I;return r(),l("tr",{key:s.id},[t("td",Tt,[t("div",It,[t("div",Mt,[t("div",Ct,a(s.car_name),1),t("div",Bt,a(s.plate_number),1)])])]),t("td",Rt,[t("div",At,a(s.user.name),1),t("div",Vt,a(s.user.email),1)]),t("td",Lt,[t("div",Ut,a(M(s.inspection_date)),1),t("div",zt,a(C(s.inspection_date)),1)]),t("td",Nt,[t("span",{class:p(`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${S(s.status)}`)},a(j(s.status)??"-"),3)]),t("td",Ot,[t("span",{class:p(`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${S(((T=s.transaction)==null?void 0:T.status)??"unpaid")}`)},a((I=s.transaction)!=null&&I.status?j(s.transaction.status):"Belum Ada Transaksi"),3)]),t("td",Pt,[b(d(f),{href:n.route("inspections.review",{id:o.encryptedIds[s.id]}),class:"inline-flex items-center px-3 py-1 rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-colors duration-200"},{default:c(()=>e[28]||(e[28]=[u(" Lihat ")])),_:2,__:[28]},1032,["href"]),s.status==="draft"||s.user_id==null?(r(),_(d(f),{key:0,href:n.route("coordinator.inspections.show",{id:o.encryptedIds[s.id]}),class:"inline-flex items-center px-3 py-1 rounded-lg text-white bg-green-600 hover:bg-green-700 transition-colors duration-200"},{default:c(()=>e[29]||(e[29]=[u(" Tugaskan ")])),_:2,__:[29]},1032,["href"])):k("",!0)])])}),128))])])]),t("div",Ft,[t("div",Wt,[b(d(f),{href:o.inspections.prev_page_url??"#",class:p(["relative inline-flex items-center px-4 py-2 border border-gray-500 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",{"opacity-50 pointer-events-none":!o.inspections.prev_page_url}]),"preserve-state":""},{default:c(()=>e[31]||(e[31]=[u(" < ")])),_:1,__:[31]},8,["href","class"]),b(d(f),{href:o.inspections.next_page_url??"#",class:p(["ml-3 relative inline-flex items-center px-4 py-2 border border-gray-500 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",{"opacity-50 pointer-events-none":!o.inspections.next_page_url}]),"preserve-state":""},{default:c(()=>e[32]||(e[32]=[u(" > ")])),_:1,__:[32]},8,["href","class"])]),t("div",$t,[t("div",null,[t("p",Ht,[e[33]||(e[33]=u(" Menampilkan ")),t("span",Kt,a(o.inspections.from),1),e[34]||(e[34]=u(" sampai ")),t("span",Et,a(o.inspections.to),1),e[35]||(e[35]=u(" dari ")),t("span",Gt,a(o.inspections.total),1),e[36]||(e[36]=u(" hasil "))])]),t("div",null,[t("nav",qt,[(r(!0),l(v,null,y(o.inspections.links,s=>(r(),_(d(f),{key:s.label,href:s.url||"#",class:p(`relative inline-flex items-center px-4 py-2 border text-sm font-medium 
                                                            ${s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} 
                                                            ${s.url?"":"opacity-50 cursor-not-allowed"}`),innerHTML:s.label,"preserve-state":""},null,8,["href","class","innerHTML"]))),128))])])])])])])])])])])])]),_:1}))}};export{Zt as default};
