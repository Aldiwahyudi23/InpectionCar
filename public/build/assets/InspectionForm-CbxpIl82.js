import{e as c,o as l,a,f as I,t as L,F as J,h as Q,d as R,C as ae,D as ue,n as X,k as Y,E as le,g as se,b as te,p as ce,j as me,G as re,c as G,x as ge,W as ee,q as he,w as ve,u as W,l as pe,s as fe,T as we,B as ne}from"./app-CxUzJqq9.js";import{l as ie}from"./lodash-CCQ6B9ge.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const be={class:"mt-1"},xe=["value","required","minlength","maxlength","pattern","placeholder"],ye={key:0,class:"mt-2 text-sm text-red-600"},ke={__name:"InputText",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],pattern:String,placeholder:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(e,{emit:p}){const n=e,h=p,f=$=>{h("update:modelValue",$.target.value),h("save",n.pointId)};return($,d)=>(l(),c("div",be,[a("input",{value:e.modelValue,onInput:f,type:"text",required:e.required,minlength:e.minLength,maxlength:e.maxLength,pattern:e.pattern,placeholder:e.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,xe),e.error?(l(),c("p",ye,L(e.error),1)):I("",!0)]))}},_e={class:"mt-1"},Ie=["value","required","min","max","step","placeholder"],$e={key:0,class:"mt-2 text-sm text-red-600"},Ce={__name:"InputNumber",props:{modelValue:[String,Number],required:Boolean,min:[String,Number],max:[String,Number],step:[String,Number],placeholder:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(e,{emit:p}){const n=e,h=p,f=$=>{const d=$.target.value;h("update:modelValue",d),h("save",n.pointId)};return($,d)=>(l(),c("div",_e,[a("input",{value:e.modelValue,onInput:f,type:"number",required:e.required,min:e.min,max:e.max,step:e.step,placeholder:e.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,Ie),e.error?(l(),c("p",$e,L(e.error),1)):I("",!0)]))}},Se={class:"mt-1"},Me=["value","required","min","max"],Ve={key:0,class:"mt-2 text-sm text-red-600"},Re={__name:"InputDate",props:{modelValue:String,required:Boolean,minDate:String,maxDate:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(e,{emit:p}){const n=e,h=p,f=$=>{h("update:modelValue",$.target.value),h("save",n.pointId)};return($,d)=>(l(),c("div",Se,[a("input",{value:e.modelValue,onChange:f,type:"date",required:e.required,min:e.minDate,max:e.maxDate,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,Me),e.error?(l(),c("p",Ve,L(e.error),1)):I("",!0)]))}},Ue={class:"mt-1"},Le=["value","required"],Ne={key:0,class:"mt-2 text-sm text-red-600"},Pe={__name:"InputSelect",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(e,{emit:p}){const n=e,h=p,f=$=>{h("update:modelValue",$.target.value),h("save",n.pointId)};return($,d)=>(l(),c("div",Ue,[a("select",{value:e.modelValue,onChange:f,required:e.required,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},d[0]||(d[0]=[a("option",{value:"",disabled:""},"Select status",-1),a("option",{value:"good"},"Good",-1),a("option",{value:"bad"},"Bad",-1),a("option",{value:"na"},"N/A",-1)]),40,Le),e.error?(l(),c("p",Ne,L(e.error),1)):I("",!0)]))}},qe=K(Pe,[["__scopeId","data-v-c34a74db"]]),Be={class:"mt-2"},Te={class:"flex flex-col gap-2 sm:flex-row sm:items-center"},Ee=["name","value","checked","onChange","required"],Fe={class:"text-sm text-gray-700"},je={key:0,class:"mt-2 text-sm text-red-600"},Ae={__name:"InputRadio",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number],options:{type:Array,default:()=>[{value:"good",label:"Good"},{value:"bad",label:"Bad"},{value:"na",label:"N/A"}]}},emits:["update:modelValue","save"],setup(e,{emit:p}){const n=e,h=p,f=$=>{h("update:modelValue",$),h("save",n.pointId)};return($,d)=>(l(),c("div",Be,[a("div",Te,[(l(!0),c(J,null,Q(e.options,g=>(l(),c("label",{key:g.value,class:"inline-flex items-center space-x-2"},[a("input",{type:"radio",name:"radio-"+e.pointId,value:g.value,checked:e.modelValue===g.value,onChange:y=>f(g.value),required:e.required,class:"text-indigo-600 focus:ring-indigo-500 border-gray-300"},null,40,Ee),a("span",Fe,L(g.label),1)]))),128))]),e.error?(l(),c("p",je,L(e.error),1)):I("",!0)]))}},We={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm"},De={class:"bg-white rounded-xl p-8 w-full max-w-sm mx-auto shadow-2xl transform transition-all duration-300 scale-100 opacity-100"},ze={class:"flex flex-row space-x-4 mb-6"},He={class:"mt-4 text-right"},Ge={__name:"ImageSourceOptionsModal",props:{show:{type:Boolean,default:!1}},emits:["close","open-webcam","trigger-gallery"],setup(e){return(p,n)=>e.show?(l(),c("div",We,[a("div",De,[n[5]||(n[5]=a("h3",{class:"text-xl font-bold text-gray-800 mb-6 text-center"},"Pilih Sumber Gambar",-1)),a("div",ze,[a("button",{onClick:n[0]||(n[0]=h=>p.$emit("open-webcam")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},n[3]||(n[3]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),a("span",{class:"text-sm font-medium"},"Kamera",-1)])),a("button",{onClick:n[1]||(n[1]=h=>p.$emit("trigger-gallery")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},n[4]||(n[4]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),a("span",{class:"text-sm font-medium"},"Galeri",-1)]))]),a("div",He,[a("button",{onClick:n[2]||(n[2]=h=>p.$emit("close")),class:"px-5 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-colors duration-200 ease-in-out"}," Batal ")])])])):I("",!0)}},Xe={key:0,class:"fixed inset-0 z-40 p-0 webcam-modal-container"},Ke={class:"webcam-content-box"},Oe={class:"webcam-header"},Ye={class:"flex gap-4"},Je=["disabled"],Qe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ze={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},et={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},tt=["disabled"],at={key:0,class:"screen-flash-overlay"},st={__name:"WebcamModal",props:{show:Boolean,aspectRatio:Number,settings:Object},emits:["close","photoCaptured"],setup(e,{emit:p}){const n=e,h=p,f=R(null),$=R(null);let d=null,g=null;const y=R("environment"),b=R(!1),x=R(!1),s=R(!1),U=R(!1),B=async()=>{d&&d.getTracks().forEach(r=>r.stop()),s.value=!1;try{const r={facingMode:y.value,width:{ideal:1280},height:{ideal:960},aspectRatio:{exact:n.aspectRatio}};y.value==="environment"&&(r.advanced=[{focusMode:"continuous"}]),d=await navigator.mediaDevices.getUserMedia({video:r}),g=d.getVideoTracks()[0],f.value.srcObject=d,f.value.onloadedmetadata=async()=>{f.value.style.width="100%",f.value.style.height="auto",f.value.style.objectFit="cover",await F()}}catch(r){console.error("Error accessing camera: ",r),alert("Failed to access camera. Please ensure camera permissions are granted and try again."),h("close")}},_=()=>{d&&d.getTracks().forEach(r=>r.stop()),h("close")},F=async()=>{if(!g)return;const m=(await navigator.mediaDevices.enumerateDevices()).filter(C=>C.kind==="videoinput");b.value=m.length>1;const S=g.getCapabilities();x.value=S.torch||S.fillLightMode&&S.fillLightMode.includes("torch")},T=async()=>{if(!(!g||!n.settings.enable_flash)){if(y.value==="user"){s.value=!s.value;return}try{if(g.getCapabilities().torch)await g.applyConstraints({advanced:[{torch:!s.value}]}),s.value=!s.value;else{console.warn("Torch API not directly supported, checking fillLightMode.");const r=g.getCapabilities();r.fillLightMode&&r.fillLightMode.includes("torch")?(await g.applyConstraints({fillLightMode:s.value?"none":"torch"}),s.value=!s.value):(alert("Flash/Torch is not supported on this camera."),x.value=!1)}}catch(r){console.error("Error toggling flash: ",r),alert("Could not toggle flash. Feature might not be supported."),x.value=!1}}},N=async()=>{!b.value||!n.settings.enable_camera_switch||(y.value=y.value==="environment"?"user":"environment",await B())},u=async()=>{if(!g)return;const r=g.getCapabilities();if(r.focusMode&&r.focusMode.includes("continuous"))try{await g.applyConstraints({advanced:[{focusMode:"continuous"}]})}catch(m){console.warn("Failed to apply continuous focus constraint:",m)}else console.log("Autofocus not explicitly controllable or not supported.")},i=async()=>{if(!f.value||!$.value)return;y.value==="user"&&s.value&&(U.value=!0,await new Promise(w=>setTimeout(w,100)),U.value=!1);const r=f.value,m=$.value,S=m.getContext("2d"),C=r.videoWidth,V=r.videoHeight;let q=C,A=V,z=0,H=0;C/V>n.aspectRatio?(q=V*n.aspectRatio,z=(C-q)/2):C/V<n.aspectRatio&&(A=C/n.aspectRatio,H=(V-A)/2),m.width=q,m.height=A,S.drawImage(r,z,H,q,A,0,0,m.width,m.height),m.toBlob(w=>{if(w){const Z=new File([w],`captured_image_${Date.now()}.png`,{type:"image/png"});h("photoCaptured",Z)}else console.error("Failed to convert canvas to blob.")},"image/png")};return ae(()=>n.show,r=>{r?B():_()}),ue(()=>{d&&d.getTracks().forEach(r=>r.stop())}),(r,m)=>e.show?(l(),c("div",Xe,[a("div",Ke,[a("div",Oe,[a("button",{onClick:_,class:"p-2 rounded-full text-white hover:bg-gray-700 transition-colors"},m[0]||(m[0]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),a("div",Ye,[e.settings.enable_flash?(l(),c("button",{key:0,onClick:T,disabled:!x.value,class:X(["p-2 rounded-full text-white",{"bg-gray-700":s.value,"hover:bg-gray-700":x.value,"opacity-50 cursor-not-allowed":!x.value}])},[x.value?s.value?(l(),c("svg",Ze,m[2]||(m[2]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)]))):(l(),c("svg",et,m[3]||(m[3]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6"},null,-1)]))):(l(),c("svg",Qe,m[1]||(m[1]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.102 1.101m-.757 4.898l-4 4L9.828 9.828m4.899-.757l4-4L14.172 14.172"},null,-1)])))],10,Je)):I("",!0),e.settings.enable_camera_switch?(l(),c("button",{key:1,onClick:N,disabled:!b.value,class:X(["p-2 rounded-full text-white hover:bg-gray-700",{"opacity-50 cursor-not-allowed":!b.value}])},m[4]||(m[4]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16M6 4h.01M6 20h.01M10 4h.01M10 20h.01M14 4h.01M14 20h.01M18 4h.01M18 20h.01"})],-1)]),10,tt)):I("",!0)])]),a("div",{class:"webcam-video-container",onClick:u},[a("video",{ref_key:"webcamVideo",ref:f,autoplay:"",playsinline:"",class:"webcam-video"},null,512),a("canvas",{ref_key:"webcamCanvas",ref:$,class:"hidden"},null,512),U.value?(l(),c("div",at)):I("",!0)]),a("div",{class:"webcam-footer"},[a("button",{onClick:i,class:"capture-button"})])])])):I("",!0)}},ot=K(st,[["__scopeId","data-v-608abcc7"]]),rt={key:0,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex flex-col items-center justify-center"},nt={class:"w-full h-full flex flex-col"},it={class:"flex justify-between items-center p-4 bg-black bg-opacity-50 text-white"},lt={class:"text-lg font-medium"},dt={class:"flex-1 flex items-center justify-center overflow-hidden relative"},ut=["src"],ct={class:"flex flex-col gap-2 p-4 bg-black bg-opacity-50"},mt={class:"flex justify-between"},gt=["disabled"],ht={key:1,class:"px-4 py-2 bg-indigo-400 text-white rounded-lg cursor-not-allowed flex items-center justify-center",disabled:""},vt={key:0,class:"text-center mt-2"},pt=["disabled"],ft={__name:"ImagePreviewModal",props:{show:Boolean,images:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0},allowMultiple:Boolean,maxFiles:Number,isUploading:Boolean},emits:["close","saveImages","removePreviewImage","triggerAddMorePhotos"],setup(e,{emit:p}){const n=e,h=p,f=R(n.initialIndex),$=R(0),d=R(0),g=Y(()=>n.images.length>0?n.images[f.value]:null);ae(()=>n.initialIndex,u=>{f.value=u},{immediate:!0});const y=()=>{g.value&&(g.value.rotation=(g.value.rotation+90)%360)},b=()=>{f.value<n.images.length-1&&f.value++},x=()=>{f.value>0&&f.value--},s=u=>{$.value=u.touches[0].clientX},U=u=>{d.value=u.touches[0].clientX},B=()=>{$.value-d.value>50?b():d.value-$.value>50&&x()},_=()=>{n.images.length!==0&&(h("removePreviewImage",f.value),f.value>=n.images.length-1&&n.images.length>1?f.value=Math.max(0,n.images.length-2):n.images.length===1&&T())},F=()=>{h("saveImages",n.images)},T=()=>{h("close")},N=()=>{h("triggerAddMorePhotos")};return ae(()=>n.show,u=>{u?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open")},{immediate:!0}),(u,i)=>e.show?(l(),c("div",rt,[a("div",nt,[a("div",it,[a("button",{onClick:T,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors"},i[0]||(i[0]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),a("div",lt,"Preview ("+L(f.value+1)+"/"+L(e.images.length)+")",1),a("button",{onClick:y,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors"},i[1]||(i[1]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]))]),a("div",dt,[a("div",{class:"w-full h-full flex items-center justify-center",onTouchstart:s,onTouchmove:U,onTouchend:B},[g.value?(l(),c("img",{key:0,src:g.value.preview||(g.value.image_path?`/storage/${g.value.image_path}`:""),class:"max-w-full max-h-full object-contain",style:le({transform:`rotate(${g.value.rotation}deg)`})},null,12,ut)):I("",!0)],32),e.images.length>1?(l(),c("button",{key:0,onClick:x,class:"absolute left-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors"},i[2]||(i[2]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):I("",!0),e.images.length>1?(l(),c("button",{key:1,onClick:b,class:"absolute right-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors"},i[3]||(i[3]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):I("",!0)]),a("div",ct,[a("div",mt,[a("button",{onClick:_,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",disabled:e.isUploading}," Hapus ",8,gt),e.isUploading?(l(),c("button",ht,i[4]||(i[4]=[se(" Menyimpan"),a("span",{class:"loading-dots ml-1"},[a("span",null,"."),a("span",null,"."),a("span",null,".")],-1)]))):(l(),c("button",{key:0,onClick:F,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," Simpan "+L(e.images.length),1))]),e.allowMultiple&&e.images.length<e.maxFiles?(l(),c("div",vt,[a("button",{onClick:N,class:"inline-block px-4 py-2 rounded-lg text-sm font-medium bg-indigo-700 text-white hover:bg-indigo-800 transition-colors cursor-pointer",disabled:e.isUploading}," + Tambah Foto ",8,pt)])):I("",!0)])])])):I("",!0)}},wt=K(ft,[["__scopeId","data-v-407b388c"]]),bt=["multiple","disabled"],xt=["disabled"],yt={key:1,class:"block w-full border-2 border-dashed rounded-lg transition-colors duration-200 border-indigo-300 bg-indigo-50 h-auto p-2","aria-label":"Image gallery"},kt={class:"grid grid-cols-3 gap-2"},_t=["onClick"],It=["src"],$t={key:0,class:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center text-white text-xs font-bold"},Ct={key:0},St={key:1,class:"ml-1"},Mt=["onClick","disabled"],Vt=["disabled"],Rt={key:2,class:"mt-1 text-xs text-red-600"},Ut={__name:"InputImage",props:{modelValue:{type:Array,default:()=>[]},error:String,inspectionId:{type:[String,Number],required:!1},pointId:{type:[String,Number],required:!0},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0})}},emits:["update:modelValue","save","removeImage","uploaded"],setup(e,{emit:p}){const n=e,h=p,f=R(null),$=R(null),d=R(!1),g=R(!1),y=R(!1),b=R([]),x=R(0),s=R(!1),U=Y(()=>Number(n.settings.max_files)>1),B=Y(()=>{const o=n.settings.camera_aspect_ratio.split(":");if(o.length===2){const v=parseFloat(o[0]),t=parseFloat(o[1]);if(!isNaN(v)&&!isNaN(t)&&t!==0)return v/t}return 3/4}),_=Y(()=>{const o=[],v=new Set;for(const t of b.value)t.id&&v.add(t.id),o.push(t);for(const t of n.modelValue)v.has(t.id)||o.push({...t,rotation:t.rotation||0,isNew:!1,preview:t.preview||(t.image_path?`/${t.image_path}`:null)});return o}),F=o=>o.preview||(o.image_path?`/${o.image_path}`:""),T=o=>!o.width||!o.height||o.width===0||o.height===0?{paddingBottom:"100%",position:"relative"}:{paddingBottom:`${o.height/o.width*100}%`,position:"relative"},N=()=>{y.value&&(y.value=!1),d.value=!0},u=()=>{d.value=!1,f.value.click()},i=()=>{d.value=!1,g.value=!0},r=()=>{d.value=!1,_.value.length>0&&(y.value=!0)},m=()=>{g.value=!1,_.value.length>0&&(y.value=!0)},S=()=>{y.value=!1,b.value.forEach(o=>{o.preview&&o.preview.startsWith("blob:")&&URL.revokeObjectURL(o.preview)}),b.value=[]},C=o=>new Promise(v=>{const t=new FileReader;t.onload=k=>{const M=new Image;M.onload=()=>{v({file:o,preview:URL.createObjectURL(o),rotation:0,width:M.naturalWidth,height:M.naturalHeight,isNew:!0})},M.onerror=()=>{console.error("Failed to load image for dimensions:",o.name),v({file:o,preview:URL.createObjectURL(o),rotation:0,width:0,height:0,isNew:!0})},M.src=k.target.result},t.readAsDataURL(o)}),V=o=>{const v=Array.from(o.target.files);if(!v.length){d.value=!1,_.value.length>0&&(y.value=!0);return}Promise.all(v.map(C)).then(t=>{const k=_.value.length,M=n.settings.max_files-k,E=U.value?t.slice(0,M):t.slice(0,1);U.value?b.value.push(...E):(b.value.forEach(j=>j.preview&&j.preview.startsWith("blob:")&&URL.revokeObjectURL(j.preview)),b.value=E),d.value=!1,E.length>0?(x.value=_.value.length-E.length,x.value<0&&(x.value=0),y.value=!0):_.value.length>0&&(y.value=!0),o.target.value=""}).catch(t=>{console.error("Error processing selected images:",t),alert("Failed to process selected images. Please try again."),d.value=!1,_.value.length>0&&(y.value=!0)})},q=o=>{const v=_.value.length;if(!U.value||v<n.settings.max_files){const t=new Image;t.onload=()=>{const k={file:o,preview:URL.createObjectURL(o),rotation:0,width:t.naturalWidth,height:t.naturalHeight,isNew:!0};U.value?b.value.push(k):(b.value.forEach(M=>M.preview&&M.preview.startsWith("blob:")&&URL.revokeObjectURL(M.preview)),b.value=[k]),g.value=!1,d.value=!1,x.value=_.value.length-1,y.value=!0},t.onerror=()=>{console.error("Failed to load captured image for dimensions.");const k={file:o,preview:URL.createObjectURL(o),rotation:0,width:0,height:0,isNew:!0};U.value?b.value.push(k):(b.value.forEach(M=>M.preview&&M.preview.startsWith("blob:")&&URL.revokeObjectURL(M.preview)),b.value=[k]),x.value=_.value.length-1,g.value=!1,d.value=!1,y.value=!0},t.src=URL.createObjectURL(o)}else alert(`Maksimum ${n.settings.max_files} file diizinkan.`),g.value=!1,d.value=!1,_.value.length>0&&(y.value=!0)},A=(o=0)=>{x.value=o,y.value=!0},z=o=>new Promise(v=>{if(o.rotation===0||!$.value){if(!o.isNew&&!o.file){v({file:null,width:o.width,height:o.height,isOriginal:!0});return}v({file:o.file,width:o.width,height:o.height});return}const t=new Image;t.onload=()=>{const k=$.value,M=k.getContext("2d"),E=t.width,j=t.height;let P,O;o.rotation===90||o.rotation===270?(P=j,O=E):(P=E,O=j),k.width=P,k.height=O,M.clearRect(0,0,k.width,k.height),M.translate(k.width/2,k.height/2),M.rotate(o.rotation*Math.PI/180),M.drawImage(t,-E/2,-j/2,E,j),M.setTransform(1,0,0,1,0,0),k.toBlob(D=>{const oe=new File([D],o.file?o.file.name:`rotated_image_${Date.now()}.png`,{type:o.file?o.file.type:"image/png"});v({file:oe,width:P,height:O})},o.file?o.file.type:"image/png")},t.onerror=()=>{console.error("Failed to load image for rotation processing:",o.preview),v({file:o.file,width:o.width,height:o.height})},t.src=o.preview}),H=async o=>{s.value=!0;const v=[];if(!n.pointId){alert("Error: Point ID is missing. Cannot upload image. (Check parent component)"),s.value=!1;return}console.log("Uploading for Inspection ID:",n.inspectionId,"Point ID:",n.pointId);try{for(const t of o){if(!t.isNew&&t.rotation===0&&t.id&&t.image_path){v.push({id:t.id,image_path:t.image_path,width:t.width,height:t.height,rotation:0,preview:t.preview});continue}const{file:k,width:M,height:E,isOriginal:j}=await z(t);if(j&&!t.isNew){v.push({id:t.id,image_path:t.image_path,width:t.width,height:t.height,rotation:0,preview:t.preview});continue}const P=new FormData;P.append("inspection_id",n.inspectionId),P.append("point_id",n.pointId),P.append("image",k),P.append("width",M),P.append("height",E),P.append("rotation",0),t.id&&!t.isNew&&P.append("image_id",t.id);const D=(await re.post(route("inspections.upload-image"),P,{headers:{"Content-Type":"multipart/form-data"}})).data.image,oe=D.image_path,de=D.public_url;v.push({id:D.id,image_path:oe,width:D.width,height:D.height,rotation:D.rotation,preview:de}),t.preview&&t.preview.startsWith("blob:")&&URL.revokeObjectURL(t.preview)}h("update:modelValue",v),h("save",n.pointId),h("uploaded",{pointId:n.pointId,images:v}),S()}catch(t){if(console.error("Error during image processing/upload:",t),t.response&&t.response.data&&t.response.data.message)alert(`Failed to save images: ${t.response.data.message}`);else if(t.response&&t.response.data&&t.response.data.errors){const k=Object.values(t.response.data.errors).flat().join(`
`);alert(`Failed to save images:
${k}`)}else alert(`Failed to save images: ${t.message}`)}finally{s.value=!1}},w=o=>{const v=_.value[o];if(v){if(v.id&&!v.isNew)Z(v);else{const t=b.value.findIndex(k=>k.preview===v.preview&&k.isNew||k.id&&k.id===v.id);if(t!==-1){const k=b.value.splice(t,1)[0];k.preview&&k.preview.startsWith("blob:")&&URL.revokeObjectURL(k.preview)}}x.value>=_.value.length&&(x.value=Math.max(0,_.value.length-1)),_.value.length===0&&S()}},Z=async o=>{if(o.id||o.image_path)try{await re.delete(route("inspections.delete-image"),{data:{image_id:o.id,image_path:o.image_path}})}catch(t){console.error("Error deleting image from server:",t),t.response&&t.response.data&&t.response.data.message?alert(`Failed to delete image from server: ${t.response.data.message}`):alert(`Failed to delete image from server: ${t.message}`);return}o.preview&&o.preview.startsWith("blob:")&&URL.revokeObjectURL(o.preview);const v=n.modelValue.filter(t=>t.id!==o.id);h("update:modelValue",v),b.value=b.value.filter(t=>t.isNew&&o.isNew?t.preview!==o.preview:t.id!==o.id),h("removeImage",{image:o}),y.value&&_.value.length===0?S():y.value&&x.value>=_.value.length&&(x.value=Math.max(0,_.value.length-1))};return(o,v)=>(l(),c("div",null,[a("input",{ref_key:"galleryInput",ref:f,type:"file",accept:"image/*",class:"hidden",onChange:V,multiple:U.value,disabled:s.value},null,40,bt),a("canvas",{ref_key:"processingCanvas",ref:$,class:"hidden"},null,512),_.value.length===0?(l(),c("label",{key:0,onClick:N,class:X(["block w-full border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-200 h-28",{"border-gray-300 hover:border-indigo-400 bg-gray-50":!0}]),disabled:s.value},v[0]||(v[0]=[ce('<div class="h-full flex flex-col items-center justify-center p-4 text-center" data-v-69612fe6><svg class="w-8 h-8 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-69612fe6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-69612fe6></path></svg><p class="text-sm text-gray-600 font-medium" data-v-69612fe6>Upload Image</p><p class="text-xs text-gray-500" data-v-69612fe6>Click to open options</p></div>',1)]),8,xt)):(l(),c("div",yt,[a("div",kt,[(l(!0),c(J,null,Q(_.value,(t,k)=>(l(),c("div",{key:t.id||t.preview,class:"relative w-full overflow-hidden rounded-md border border-gray-200 cursor-pointer",style:le(T(t)),onClick:M=>A(k)},[a("img",{src:F(t),class:"absolute top-0 left-0 w-full h-full object-cover"},null,8,It),t.isNew||t.rotation!==0?(l(),c("div",$t,[t.isNew?(l(),c("span",Ct,"BARU")):I("",!0),t.rotation!==0?(l(),c("span",St,"ROTASI")):I("",!0)])):I("",!0),a("button",{onClick:me(M=>Z(t),["stop"]),type:"button",class:"absolute top-1 right-1 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs shadow-sm hover:bg-red-600 transition-colors z-10","aria-label":"Remove image",disabled:s.value}," × ",8,Mt)],12,_t))),128)),U.value&&_.value.length<e.settings.max_files?(l(),c("div",{key:0,class:"flex flex-col items-center justify-center p-2 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-colors",onClick:N,disabled:s.value},v[1]||(v[1]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),a("p",{class:"mt-1 text-xs text-gray-600"},"Tambah",-1)]),8,Vt)):I("",!0)])])),e.error?(l(),c("p",Rt,L(e.error),1)):I("",!0),te(Ge,{show:d.value,onClose:r,onOpenWebcam:i,onTriggerGallery:u},null,8,["show"]),te(ot,{show:g.value,"aspect-ratio":B.value,settings:e.settings,onClose:m,onPhotoCaptured:q},null,8,["show","aspect-ratio","settings"]),te(wt,{show:y.value,images:_.value,"initial-index":x.value,"allow-multiple":U.value,"max-files":e.settings.max_files,"is-uploading":s.value,onClose:S,onSaveImages:H,onRemovePreviewImage:w,onTriggerAddMorePhotos:N},null,8,["show","images","initial-index","allow-multiple","max-files","is-uploading"])]))}},Lt=K(Ut,[["__scopeId","data-v-69612fe6"]]),Nt={class:"bg-white shadow-lg rounded-xl overflow-hidden border border-gray-100"},Pt={class:"bg-indigo-50 px-6 py-2 border-b border-indigo-100"},qt={class:"text-xl font-semibold text-indigo-700"},Bt={class:"p-4 space-y-4"},Tt={class:"flex items-start justify-between"},Et={class:"block text-sm font-medium text-gray-700"},Ft={key:0,class:"text-red-500"},jt={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},At={__name:"CategorySection",props:{category:Object,form:Object,inspectionId:[String,Number]},emits:["saveResult","updateResult","removeImage"],setup(e,{emit:p}){const n=e,h=p,f=[{value:"good",label:"Good"},{value:"bad",label:"Bad"},{value:"na",label:"N/A"}],$=b=>{var s;const x=n.form.results[b.id];if(!x)return!1;switch(b.input_type){case"text":case"number":case"date":return!!x.note;case"select":case"radio":return!!x.status;case"image":return((s=x.images)==null?void 0:s.length)>0;default:return!1}},d=(b,x)=>{h("updateResult",{pointId:b,value:x})},g=b=>{h("saveResult",b)},y=(b,x)=>{h("removeImage",{pointId:b,imageIndex:x})};return(b,x)=>(l(),c("div",Nt,[a("div",Pt,[a("h2",qt,L(e.category.name),1)]),a("div",Bt,[(l(!0),c(J,null,Q(e.category.points,s=>{var U,B,_,F,T,N,u,i,r,m,S,C,V,q,A,z,H;return l(),c("div",{key:s.id,class:"space-y-2 pb-4 border-b border-gray-100 last:border-0 last:pb-0"},[a("div",Tt,[a("label",Et,[se(L(s.name)+" ",1),(U=s.settings)!=null&&U.is_required?(l(),c("span",Ft,"*")):I("",!0)]),$(s)?(l(),c("span",jt," ✓ ")):I("",!0)]),s.input_type==="text"?(l(),G(ke,{key:0,modelValue:e.form.results[s.id].note,"onUpdate:modelValue":[w=>e.form.results[s.id].note=w,w=>d(s.id,w)],required:(B=s.settings)==null?void 0:B.is_required,"min-length":(_=s.settings)==null?void 0:_.min_length,"max-length":(F=s.settings)==null?void 0:F.max_length,pattern:(T=s.settings)==null?void 0:T.pattern,placeholder:((N=s.settings)==null?void 0:N.placeholder)||"Enter text",error:e.form.errors[`results.${s.id}.note`],onSave:w=>g(s.id)},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","pattern","placeholder","error","onSave"])):I("",!0),s.input_type==="number"?(l(),G(Ce,{key:1,modelValue:e.form.results[s.id].note,"onUpdate:modelValue":[w=>e.form.results[s.id].note=w,w=>d(s.id,w)],required:(u=s.settings)==null?void 0:u.is_required,min:(i=s.settings)==null?void 0:i.min,max:(r=s.settings)==null?void 0:r.max,step:((m=s.settings)==null?void 0:m.step)||1,placeholder:((S=s.settings)==null?void 0:S.placeholder)||"Enter number",error:e.form.errors[`results.${s.id}.note`],onSave:w=>g(s.id)},null,8,["modelValue","onUpdate:modelValue","required","min","max","step","placeholder","error","onSave"])):I("",!0),s.input_type==="date"?(l(),G(Re,{key:2,modelValue:e.form.results[s.id].note,"onUpdate:modelValue":[w=>e.form.results[s.id].note=w,w=>d(s.id,w)],required:(C=s.settings)==null?void 0:C.is_required,"min-date":(V=s.settings)==null?void 0:V.min_date,"max-date":(q=s.settings)==null?void 0:q.max_date,error:e.form.errors[`results.${s.id}.note`],onSave:w=>g(s.id)},null,8,["modelValue","onUpdate:modelValue","required","min-date","max-date","error","onSave"])):I("",!0),s.input_type==="select"?(l(),G(qe,{key:3,modelValue:e.form.results[s.id].status,"onUpdate:modelValue":[w=>e.form.results[s.id].status=w,w=>d(s.id,w)],required:(A=s.settings)==null?void 0:A.is_required,error:e.form.errors[`results.${s.id}.status`],onSave:w=>g(s.id)},null,8,["modelValue","onUpdate:modelValue","required","error","onSave"])):I("",!0),s.input_type==="radio"?(l(),G(Ae,{key:4,modelValue:e.form.results[s.id].status,"onUpdate:modelValue":[w=>e.form.results[s.id].status=w,w=>d(s.id,w)],required:(z=s.settings)==null?void 0:z.is_required,options:((H=s.settings)==null?void 0:H.radios)||f,error:e.form.errors[`results.${s.id}.status`],onSave:w=>g(s.id)},null,8,["modelValue","onUpdate:modelValue","required","options","error","onSave"])):I("",!0),s.input_type==="image"?(l(),G(Lt,{key:5,modelValue:e.form.results[s.id].images,"onUpdate:modelValue":[w=>e.form.results[s.id].images=w,w=>d(s.id,w)],error:e.form.errors[`results.${s.id}.images`],"inspection-id":e.inspectionId,"point-id":s.id,settings:s.settings,onSave:w=>g(s.id),onRemoveImage:w=>y(s.id,w)},null,8,["modelValue","onUpdate:modelValue","error","inspection-id","point-id","settings","onSave","onRemoveImage"])):I("",!0)])}),128))])]))}},Wt=K(At,[["__scopeId","data-v-004ada53"]]),Dt={class:"container mx-auto px-4 py-2"},zt={class:"sticky top-0 z-10 bg-white shadow-sm mb-2"},Ht={class:"flex overflow-x-auto scrollbar-hide py-3 px-4 space-x-2"},Gt=["onClick","data-category-id"],Xt={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Kt={class:"relative overflow-hidden"},Ot={key:"summary-section",class:"bg-white rounded-xl shadow-md p-6"},Yt={class:"mb-4"},Jt={class:"mt-6"},Qt={class:"list-disc pl-5"},Zt={key:0},ea={key:1},ta={class:"flex justify-end gap-4 mt-8"},aa=["disabled"],sa={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oa={__name:"InspectionForm",props:{inspection:Object,categories:Array,existingResults:Array,existingImages:Object},setup(e){var N;const p=e,n=R(((N=p.categories[0])==null?void 0:N.id)||"summary"),h=R(0);R(null);const f=Y(()=>n.value!=="summary"?p.categories.find(u=>u.id===n.value):null),d=ge((()=>{const u={};return p.categories.forEach(i=>{(i.points||[]).forEach(r=>{var S,C;const m=Array.isArray(p.existingResults)?p.existingResults.find(V=>V.point_id===r.id):null;u[r.id]={status:(m==null?void 0:m.status)||"",note:(m==null?void 0:m.note)||"",images:((C=(S=p.existingImages)==null?void 0:S[r.id])==null?void 0:C.map(V=>({image_path:V.image_path,preview:null})))||[]}})}),{inspection_id:p.inspection.id,results:u,overall_note:p.inspection.overall_note||""}})()),g=ie.debounce(()=>{ee.post(route("inspections.save-overall-note"),{inspection_id:p.inspection.id,overall_note:d.overall_note},{preserveScroll:!0,preserveState:!0,only:["inspection"],onSuccess:()=>{},onError:u=>{console.error("Error menyimpan catatan keseluruhan:",u)}})},800),y=u=>u.points.every(i=>{var m;const r=d.results[i.id];if(!r)return!1;switch(i.input_type){case"text":case"number":case"date":return!!r.note;case"select":case"radio":return!!r.status;case"image":return((m=r.images)==null?void 0:m.length)>0;default:return!!r.status||!!r.note}}),b=u=>{if(u==="summary")h.value=p.categories.length;else{const i=p.categories.findIndex(r=>r.id===u);i>=0&&(h.value=i)}n.value=u},x=u=>{let i=h.value+u;const r=p.categories.length;i>=0&&i<=r&&(h.value=i,i===r?n.value="summary":n.value=p.categories[i].id)},s=()=>{let u=0,i=0;const r=V=>{u=V.changedTouches[0].screenX},m=V=>{i=V.changedTouches[0].screenX,S()},S=()=>{i<u-50?x(1):i>u+50&&x(-1)},C=document.querySelector(".relative.overflow-hidden");return C&&(C.addEventListener("touchstart",r,!1),C.addEventListener("touchend",m,!1)),()=>{C&&(C.removeEventListener("touchstart",r),C.removeEventListener("touchend",m))}},U=ie.debounce(async u=>{try{await ee.post(route("inspections.save-result"),{inspection_id:p.inspection.id,point_id:u,status:d.results[u].status,note:d.results[u].note},{preserveScroll:!0,preserveState:!0,only:["existingResults"],onSuccess:()=>{}})}catch(i){console.error("Error menyimpan hasil:",i)}},500),B=({pointId:u,type:i,value:r})=>{d.results[u].hasOwnProperty(i)&&(d.results[u][i]=r),U(u)},_=async(u,i)=>{const r=u.target.files[0];if(!r)return;const m=URL.createObjectURL(r);try{const S=new FormData;S.append("inspection_id",p.inspection.id),S.append("point_id",i),S.append("image",r),await ee.post(route("inspections.upload-image"),S,{preserveScroll:!0,onSuccess:C=>{var q;const V=((q=C.props.flash)==null?void 0:q.imagePath)||C.props.imagePath;V?d.results[i].images.push({image_path:V,preview:m}):console.error("Path gambar tidak dikembalikan dari unggahan, tidak dapat memperbarui UI.")},onError:C=>{console.error("Error mengunggah gambar:",C),alert("Gagal mengunggah gambar. Silakan coba lagi.")}})}catch(S){console.error("Error mengunggah gambar:",S),alert("Terjadi kesalahan tak terduga saat mengunggah gambar.")}finally{u.target.value=""}},F=async(u,i)=>{const r=d.results[u].images[i];if(r)try{await ee.delete(route("inspections.delete-image"),{data:{image_path:r.image_path,point_id:u,inspection_id:p.inspection.id},preserveScroll:!0,onSuccess:()=>{d.results[u].images.splice(i,1),r.preview&&URL.revokeObjectURL(r.preview)},onError:m=>{console.error("Error menghapus gambar:",m),alert("Gagal menghapus gambar. Silakan coba lagi.")}})}catch(m){console.error("Error menghapus gambar:",m),alert("Terjadi kesalahan tak terduga saat menghapus gambar.")}},T=()=>{d.post(route("inspections.final-submit"),{preserveScroll:!0,onSuccess:()=>{ne().props.flash.success="Inspeksi berhasil dikirim!"},onError:u=>{console.error("Kesalahan pengiriman:",u),ne().props.flash.error="Ada kesalahan dalam pengiriman Anda. Harap periksa semua bidang."}})};return he(()=>{s()}),ae(n,u=>{const i=document.querySelector(`.flex-shrink-0[data-category-id="${u}"]`);i&&i.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}),(u,i)=>(l(),c("div",Dt,[a("div",zt,[a("div",Ht,[(l(!0),c(J,null,Q(e.categories,r=>(l(),c("button",{key:r.id,onClick:m=>b(r.id),class:X(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200",{"bg-indigo-600 text-white":n.value===r.id,"bg-gray-100 text-gray-700 hover:bg-gray-200":n.value!==r.id}]),"data-category-id":r.id},[se(L(r.name)+" ",1),y(r)?(l(),c("span",Xt," ✓ ")):I("",!0)],10,Gt))),128)),a("button",{onClick:i[0]||(i[0]=r=>b("summary")),class:X(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200",{"bg-indigo-600 text-white":n.value==="summary","bg-gray-100 text-gray-700 hover:bg-gray-200":n.value!=="summary"}]),"data-category-id":"summary"}," Kesimpulan ",2)])]),a("div",Kt,[te(we,{name:"category-slide",mode:"out-in"},{default:ve(()=>[f.value&&n.value!=="summary"?(l(),G(Wt,{key:f.value.id,category:f.value,form:W(d),onSaveResult:W(U),onUpdateResult:B,onRemoveImage:F,onHandleImageUpload:_},null,8,["category","form","onSaveResult"])):n.value==="summary"?(l(),c("div",Ot,[i[6]||(i[6]=a("h3",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Kesimpulan Inspeksi",-1)),a("div",Yt,[i[3]||(i[3]=a("label",{for:"overall_note",class:"block text-sm font-medium text-gray-700 mb-1"},"Catatan Keseluruhan Inspeksi:",-1)),pe(a("textarea",{id:"overall_note","onUpdate:modelValue":i[1]||(i[1]=r=>W(d).overall_note=r),onInput:i[2]||(i[2]=(...r)=>W(g)&&W(g)(...r)),rows:"5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Tambahkan catatan penting atau ringkasan inspeksi di sini..."},null,544),[[fe,W(d).overall_note]])]),a("div",Jt,[i[4]||(i[4]=a("h4",{class:"text-lg font-semibold text-gray-700 mb-3"},"Status Kategori:",-1)),a("ul",Qt,[(l(!0),c(J,null,Q(e.categories,r=>(l(),c("li",{key:r.id,class:X({"text-green-600":y(r),"text-red-600":!y(r)})},[se(L(r.name)+" ",1),y(r)?(l(),c("span",Zt,"(Selesai ✓)")):(l(),c("span",ea,"(Belum Selesai ✗)"))],2))),128))])]),a("div",ta,[a("button",{type:"button",onClick:T,disabled:W(d).processing,class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[W(d).processing?(l(),c("svg",sa,i[5]||(i[5]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):I("",!0),a("span",null,L(W(d).processing?"Mengirim...":"Final Kirim Inspeksi"),1)],8,aa)])])):I("",!0)]),_:1})])]))}},la=K(oa,[["__scopeId","data-v-22fd310e"]]);export{la as default};
