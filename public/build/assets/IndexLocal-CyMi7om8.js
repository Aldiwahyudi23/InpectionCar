import{q as C,r as v,G as V,x as Ft,L as Rt,M as st,g as Kt,c as d,o as u,b as f,d as o,u as l,N as it,n as b,z as Se,I as at,f as De,F as ce,m as Me,k as A,j as Ht,w as de,t as B,T as lt,y as Wt,S as Gt,A as qt,D as Jt,W as ge}from"./vendor-DZyPVqc7.js";import"./lodash-CwXbc5n4.js";import{V as Yt,C as Xt,a as Zt,B as Qt,_ as en}from"./ConclusionSection-CykiWLKk.js";import{u as rt}from"./useDraggableButton-BCGMf6rx.js";import{_ as tn}from"./app-Cg-OenIi.js";import"./PrimaryButton-DYuTiD-E.js";import"./ActionMessage-Dtpus4ld.js";const nn={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},on={key:0,class:"fixed inset-0 bg-black bg-opacity-40 z-30 pointer-events-none transition-opacity duration-200"},sn={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},an={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},ln={class:"flex items-center space-x-2 flex-shrink-0"},rn=["aria-checked"],un={class:"flex items-center space-x-2 flex-shrink-0"},cn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},dn=["onClick","data-category"],gn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},vn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},pn={key:3,class:"fixed inset-0 z-30"},mn={class:"mt-2 space-y-2"},fn={class:"flex items-center space-x-2"},hn=["aria-checked"],yn={class:"flex items-center space-x-2"},xn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},wn=["onClick"],bn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},kn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},_n={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-400 text-white px-4 py-2 rounded shadow-lg z-50"},Cn={class:"relative overflow-hidden"},Sn={key:"vehicle"},Dn={key:"conclusion"},Mn={key:1},Tn=["disabled"],Pn={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},In={class:"space-y-4"},Ln={class:"relative"},En={class:"max-h-64 overflow-y-auto"},jn={key:0,class:"text-center py-4 text-gray-500"},Vn=["onClick"],An={class:"font-medium text-gray-900"},Bn={class:"text-sm text-gray-500"},On={class:"text-xs text-gray-400 mt-1"},zn={key:0,class:"text-xs text-green-600 mt-1"},Nn={key:3,class:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-center"},Un={__name:"IndexLocal",props:{inspection:Object,inspectionId:Object,category:Object,car:Object,appMenus:Array,damagePoints:Array,existingResults:Object,existingImages:Object,CarDetail:Array,allInspections:Array},setup(k){var Ge,qe,Je,Ye,Xe,Ze,Qe,et,tt,nt;const N=t=>{if(!t)return{};if(typeof t=="string")try{return JSON.parse(t)||{}}catch(e){return console.error("Error parsing settings JSON:",e),{}}return typeof t=="object"&&t!==null?t:{}},r=k,ve=C(()=>`inspection_data_${r.inspection.id}`),pe=C(()=>`swipe_toggle_${r.inspection.id}`),me=C(()=>`image_source_${r.inspection.id}`),fe=C(()=>`active_category_${r.inspection.id}`),Te=()=>{try{const t=localStorage.getItem(ve.value);return t?JSON.parse(t):{}}catch(t){return console.error("Error reading local storage:",t),{}}},ut=t=>{try{localStorage.setItem(ve.value,JSON.stringify(t))}catch(e){console.error("Error writing to local storage:",e)}},ct=()=>{try{localStorage.removeItem(ve.value),localStorage.removeItem(pe.value),localStorage.removeItem(me.value),localStorage.removeItem(fe.value)}catch(t){console.error("Error clearing local storage:",t)}},dt=()=>{try{const t=localStorage.getItem(pe.value);return t?JSON.parse(t):!0}catch(t){return console.error("Error reading swipe toggle state:",t),!0}},gt=t=>{try{localStorage.setItem(pe.value,JSON.stringify(t))}catch(e){console.error("Error writing swipe toggle state:",e)}},vt=()=>{try{return localStorage.getItem(me.value)||"all"}catch(t){return console.error("Error reading image source setting:",t),"all"}},pt=t=>{try{localStorage.setItem(me.value,t)}catch(e){console.error("Error writing image source setting:",e)}},mt=()=>{try{return localStorage.getItem(fe.value)||D.value[0]}catch(t){return console.error("Error reading active category:",t),D.value[0]}},Pe=t=>{try{localStorage.setItem(fe.value,t)}catch(e){console.error("Error writing active category:",e)}},U=v(((qe=(Ge=r.category)==null?void 0:Ge.settings)==null?void 0:qe.menu_model)||"horizontal"),S=v(((Ye=(Je=r.category)==null?void 0:Je.settings)==null?void 0:Ye.position)||"top"),$=v(!1),F=v(!1),{pos:Ie,dragging:ft,startLongPress:J,cancelLongPress:Le,onDrag:Y,stopDrag:X,handleClick:ht}=rt("toggleMenuButtonPos",{x:window.innerWidth-80,y:20}),yt=t=>{ht(t)&&xt()},xt=()=>{$.value=!$.value},R=()=>{$.value=!1},he=t=>t?"bg-gradient-to-r from-indigo-700 to-sky-600 text-white":"bg-gray-50 hover:bg-gray-100 text-gray-700",{pos:Ee,dragging:wt,startLongPress:Z,cancelLongPress:je,onDrag:Q,stopDrag:ee,handleClick:bt}=rt("damageButtonPos",{x:window.innerWidth-80,y:window.innerHeight-80}),kt=t=>{bt(t)&&(te.value=!0)},te=v(!1),ne=v(!1),K=v(""),y=v(null),H=v(""),W=v(""),O=v(""),oe=v(!1),se=v(null),_t=(t,e)=>{oe.value=!0,se.value=e,ge.visit(t,{onFinish:()=>{oe.value=!1,se.value=null}})},Ct=C(()=>r.appMenus.some(t=>t.input_type==="damage")),D=C(()=>["vehicle",...r.appMenus.map(t=>String(t.id)),"conclusion"]),p=v(D.value[0]),ye=v(0);V(p,t=>{ye.value=D.value.indexOf(t)});const xe=C(()=>{if(p.value==="vehicle"||p.value==="conclusion")return null;const t=r.appMenus.find(e=>String(e.id)===p.value);return t?{...t,points:we(t.menu_point,t.input_type==="damage")}:null}),we=(t,e)=>e?(t||[]).filter(i=>{const s=i.inspection_point_id;return ze(s)}):t||[],P=v({plate_number:r.inspection.plate_number,car_id:r.inspection.car_id,car_name:r.inspection.car_name}),h=v({notes:r.inspection.overall_note||"",flooded:((Ze=(Xe=N(r.inspection.settings))==null?void 0:Xe.conclusion)==null?void 0:Ze.flooded)||null,collision:((et=(Qe=N(r.inspection.settings))==null?void 0:Qe.conclusion)==null?void 0:et.collision)||null,collision_severity:((nt=(tt=N(r.inspection.settings))==null?void 0:tt.conclusion)==null?void 0:nt.collision_severity)||null}),a=Ft((()=>{const t=[...r.appMenus.flatMap(T=>T.menu_point||[]),...r.damagePoints||[]],e={},i={};t.forEach(T=>{const M=T.inspection_point_id,_=r.existingResults[M];e[M]={status:(_==null?void 0:_.status)||"",note:(_==null?void 0:_.note)||""},i[M]=r.existingImages[M]||[]});const s=Te(),c={...e,...s.results||{}},g={...i,...s.images||{}},x={...P.value,...s.vehicleDetails||{}},m=s.overall_note!==void 0?s.overall_note:r.inspection.overall_note||"";return{inspection_id:r.inspection.id,results:c,images:g,overall_note:m,plate_number:x.plate_number,car_id:x.car_id,car_name:x.car_name}})());V(a,t=>{ut({results:t.results,images:t.images,overall_note:t.overall_note,vehicleDetails:P.value,conclusion:h.value})},{deep:!0}),V(P,t=>{a.plate_number=t.plate_number,a.car_id=t.car_id,a.car_name=t.car_name},{deep:!0}),V(h,t=>{a.overall_note=t.notes},{deep:!0});const I=Rt("vehicleFeatures",v(null));I.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),st("vehicleFeatures",I);const St=t=>{var c,g;const e=t.settings;if(!Dt(t))return!0;const i=(c=r.car)==null?void 0:c.transmission,s=(g=r.car)==null?void 0:g.fuel_type;return!(e.transmission&&Array.isArray(e.transmission)&&e.transmission.length>0&&i&&!e.transmission.includes(i)||e.fuel_type&&e.fuel_type.trim()!==""&&s&&e.fuel_type!==s||e.rear_door&&(!I.value||!I.value.rear_door)||e.pick_up&&(!I.value||!I.value.pick_up)||e.box&&(!I.value||!I.value.box))},Dt=t=>{const e=t.settings;return!!(e!=null&&e.transmission&&Array.isArray(e.transmission)&&e.transmission.length>0||e!=null&&e.fuel_type&&e.fuel_type.trim()!==""||e!=null&&e.rear_door||e!=null&&e.pick_up||e!=null&&e.box)},Ve=v(!1),Ae=t=>{Ve.value=t},Be=v(!1),Mt=t=>{Be.value=t},ie=C(()=>{var c;const t=P.value.plate_number&&/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(P.value.plate_number),e=!!((c=P.value.car_name)!=null&&c.trim()),i=!Be.value,s=!Ve.value;return t&&e&&i&&s}),Oe=C(()=>{if(!K.value.trim())return r.damagePoints||[];const t=K.value.toLowerCase().trim();return(r.damagePoints||[]).filter(e=>{var i,s,c,g,x;return((s=(i=e.inspection_point)==null?void 0:i.name)==null?void 0:s.toLowerCase().includes(t))||((g=(c=e.inspection_point)==null?void 0:c.description)==null?void 0:g.toLowerCase().includes(t))||((x=Ne(e))==null?void 0:x.toLowerCase().includes(t))})}),ze=t=>{const e=a.results[t]&&(a.results[t].status||a.results[t].note),i=a.images[t]&&a.images[t].length>0;return e||i},Ne=t=>{var e;return((e=t.inspection_point.component)==null?void 0:e.name)||"Komponen Tidak Diketahui"},Tt=t=>a.results[t]||null,be=()=>{var g;const t=h.value,e=!!t.flooded,i=!!t.collision,s=t.collision==="yes"?!!t.collision_severity:!0,c=!!((g=t.notes)!=null&&g.trim());return e&&i&&s&&c},Ue=C(()=>({flooded:h.value.flooded||null,collision:h.value.collision||null,collision_severity:h.value.collision_severity||null,note:h.value.notes||null,isComplete:be()})),$e=C(()=>{const t=ie.value,e=r.appMenus.every(s=>ke(s)),i=be();return t&&e&&i}),ke=t=>t.input_type==="damage"?we(t.menu_point,!0).length>0:t.id==="conclusion"?be():t.id==="vehicle"?ie.value:(we(t.menu_point,!1)||[]).filter(s=>s.is_default&&St(s)).every(s=>{var m,T,M,_,G,q;const c=a.results[s.inspection_point_id],g=a.images[s.inspection_point_id];if(!c)return!1;const x=N(s.settings);switch(s.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!((m=c.note)!=null&&m.trim());case"select":case"radio":if(!c.status)return!1;const E=(T=x.radios)==null?void 0:T.find(j=>j.value===c.status);return!(E!=null&&E.settings&&(E.settings.show_textarea&&!((M=c.note)!=null&&M.trim())||E.settings.show_image_upload&&(g==null?void 0:g.length)===0));case"imageTOradio":if((g==null?void 0:g.length)===0||!c.status)return!1;const n=(_=x.radios)==null?void 0:_.find(j=>j.value===c.status);return!(n!=null&&n.settings&&n.settings.show_textarea&&n.settings.required&&!((G=c.note)!=null&&G.trim()));case"image":return(g==null?void 0:g.length)>0;default:return!!c.status||!!((q=c.note)!=null&&q.trim())}}),w=v(!0),L=v("all"),ae=v(null),_e=v([]),le=v(0),re=v(!1);st("imageSourceSetting",L);const Fe=()=>{w.value=!w.value,gt(w.value)},Re=()=>{pt(L.value),console.log("Image source setting updated to:",L.value)},ue=()=>{ae.value&&Jt(()=>{const t=ae.value.querySelector(`[data-category="${p.value}"]`);if(!t)return;const e=ae.value,i=e.clientWidth,s=t.offsetLeft,c=t.clientWidth,g=s-i/2+c/2;e.scrollTo({left:g,behavior:"smooth"})})},Pt=()=>le.value===0?(le.value=1,re.value=!0,setTimeout(()=>{le.value=0,re.value=!1},2e3),window.history.pushState(null,null,window.location.href),!1):(le.value=0,re.value=!1,ge.visit(route("job.index")),!0),It=()=>{window.history.state===null&&window.history.replaceState({isBackButtonControlled:!0},""),window.history.pushState({isBackButtonControlled:!0},""),window.addEventListener("popstate",t=>{t.state&&t.state.isBackButtonControlled&&(t.preventDefault(),Pt())})},Lt=t=>{y.value=t;const e=t.inspection_point_id,i=a.results[e]||{};H.value=i.status||"",W.value=i.note||"",te.value=!1,ne.value=!0},Et=t=>{y.value&&(a.images[y.value.inspection_point_id]=t)},jt=()=>{if(y.value){const t=y.value.inspection_point_id;a.results[t]={...a.results[t],status:H.value,note:W.value},O.value="Data berhasil disimpan di lokal!",setTimeout(()=>O.value="",1e3)}Ce()},Vt=({pointId:t,type:e,value:i})=>{var s;(s=a.results[t])!=null&&s.hasOwnProperty(e)&&(a.results[t][e]=i)},Ke=async t=>{if(t&&confirm("Apakah kamu yakin ingin menghapus data ini?")){try{await ge.post(route("inspections.delete-result"),{inspection_id:r.inspection.id,point_id:t},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{a.results[t]&&(a.results[t]={status:"",note:""}),a.images[t]&&(a.images[t]=[]),O.value="Data berhasil dihapus!",setTimeout(()=>O.value="",1e3)},onError:e=>{console.error("Error menghapus hasil:",e)}})}catch(e){console.error("Error menghapus hasil:",e)}Ce()}},At=t=>{Object.assign(P.value,t),Ae(!0)},Bt=t=>{console.log("Save car details locally:",t)},Ot=t=>{console.log("Received conclusion data from child:",t),h.value={...h.value,...t},a.overall_note=t.notes||"",console.log("Conclusion state updated:",h.value)},zt=()=>{if(!$e.value){alert("Harap lengkapi semua menu inspeksi termasuk kesimpulan sebelum submit final");return}if(!confirm("Apakah Anda yakin ingin mengirim semua data inspeksi? Data lokal akan dihapus setelah berhasil dikirim."))return;F.value=!0;const t={...a.data(),overall_note:h.value.notes,conclusion:{notes:h.value.notes,flooded:h.value.flooded,collision:h.value.collision,collision_severity:h.value.collision_severity}};ge.post(route("inspections.final-submit-local",{id:r.inspection.id}),t,{preserveScroll:!0,onSuccess:()=>{ct()},onError:e=>{console.error("Kesalahan pengiriman:",e),F.value=!1}})},Nt=({pointId:t,imageId:e})=>{a.images[t]&&(a.images[t]=a.images[t].filter(i=>i.id!==e))},He=()=>{te.value=!1,K.value=""},Ce=()=>{ne.value=!1,y.value=null,H.value="",W.value=""},Ut=()=>{},z=t=>{p.value=t,Pe(t),ue()},We=t=>{let e=ye.value+t;e>=0&&e<D.value.length&&(p.value=D.value[e],ue())},$t=()=>{let t=0,e=0,i=null;const s=m=>{w.value&&(t=m.changedTouches[0].screenX)},c=m=>{w.value&&(e=m.changedTouches[0].screenX,g())},g=()=>{if(!w.value)return;const m=250;e<t-m?We(1):e>t+m&&We(-1)},x=()=>{const m=document.querySelector(".relative.overflow-hidden");return m&&(m.addEventListener("touchstart",s,{passive:!0}),m.addEventListener("touchend",c,{passive:!0})),()=>{m&&(m.removeEventListener("touchstart",s),m.removeEventListener("touchend",c))}};return i=x(),V(w,m=>{i&&i(),m&&(i=x())}),()=>{i&&i()}};return V(p,(t,e)=>{ue()}),V(p,t=>{ye.value=D.value.indexOf(t)}),Kt(()=>{const t=Te();if(w.value=dt(),L.value=vt(),t.vehicleDetails&&(Object.assign(P.value,t.vehicleDetails),a.plate_number=t.vehicleDetails.plate_number,a.car_id=t.vehicleDetails.car_id,a.car_name=t.vehicleDetails.car_name),t.conclusion)console.log("Loading conclusion from localStorage:",t.conclusion),Object.assign(h.value,t.conclusion),a.overall_note=t.conclusion.notes||"";else{const s=N(r.inspection.settings).conclusion||{};h.value={notes:r.inspection.notes||"",flooded:s.flooded||"",collision:s.collision||"",collision_severity:s.collision_severity||""},a.overall_note=r.inspection.notes||""}t.results&&Object.assign(a.results,t.results),t.images&&Object.assign(a.images,t.images);const e=mt();D.value.includes(e)?p.value=e:(p.value=D.value[0],Pe(D.value[0])),$t(),It(),setTimeout(()=>{ue()},100)}),(t,e)=>{var i,s,c,g,x,m,T,M,_,G,q,E;return u(),d("div",nn,[l(wt)||l(ft)?(u(),d("div",on)):f("",!0),U.value==="vertical"?(u(),d("button",{key:1,onMousedown:e[0]||(e[0]=(...n)=>l(J)&&l(J)(...n)),onMouseup:e[1]||(e[1]=(...n)=>l(X)&&l(X)(...n)),onMouseleave:e[2]||(e[2]=(...n)=>l(Le)&&l(Le)(...n)),onMousemove:e[3]||(e[3]=(...n)=>l(Y)&&l(Y)(...n)),onTouchstart:e[4]||(e[4]=(...n)=>l(J)&&l(J)(...n)),onTouchend:e[5]||(e[5]=(...n)=>l(X)&&l(X)(...n)),onTouchmove:e[6]||(e[6]=(...n)=>l(Y)&&l(Y)(...n)),onClick:yt,class:"fixed z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white border shadow-lg rounded-full hover:shadow-xl transition",style:it({left:l(Ie).x+"px",top:l(Ie).y+"px"}),"aria-label":"Toggle vertical menu"},[$.value?(u(),d("svg",an,e[25]||(e[25]=[o("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(u(),d("svg",sn,e[24]||(e[24]=[o("path",{"fill-rule":"evenodd",d:"M3 5h14v2H3V5zm0 4h10v2H3V9zm0 4h6v2H3v-2z","clip-rule":"evenodd"},null,-1)])))],36)):f("",!0),U.value==="horizontal"?(u(),d("div",{key:2,class:b(["z-10 bg-white shadow-sm",{"sticky top-0 mb-2":S.value==="top","fixed bottom-0 left-0 right-0":S.value==="bottom"}])},[o("div",{ref_key:"menuContainer",ref:ae,class:"flex overflow-x-auto scrollbar-hide py-3 px-4 space-x-2 menu-container",onScroll:Ut},[o("div",ln,[e[26]||(e[26]=o("span",{class:"text-sm text-gray-600"},"Swipe",-1)),o("button",{onClick:Fe,type:"button",class:b(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",w.value?"bg-indigo-600":"bg-gray-200"]),role:"switch","aria-checked":w.value},[o("span",{"aria-hidden":"true",class:b(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",w.value?"translate-x-5":"translate-x-0"])},null,2)],10,rn)]),o("div",un,[e[28]||(e[28]=o("span",{class:"text-sm text-gray-600"},"Sumber",-1)),Se(o("select",{"onUpdate:modelValue":e[7]||(e[7]=n=>L.value=n),onChange:Re,class:"text-sm border border-gray-300 rounded-md px-5 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},e[27]||(e[27]=[o("option",{value:"all"},"Tanya",-1),o("option",{value:"camera"},"Kamera",-1),o("option",{value:"gallery"},"Galeri",-1)]),544),[[at,L.value]])]),o("button",{ref_key:"menuItems",ref:_e,onClick:e[8]||(e[8]=n=>z("vehicle")),class:b(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":p.value==="vehicle","bg-gray-100 text-gray-700 hover:bg-gray-200":p.value!=="vehicle"}]),"data-category":"vehicle"},[e[29]||(e[29]=De(" Detail Kendaraan ")),ie.value?(u(),d("span",cn," ✓ ")):f("",!0)],2),(u(!0),d(ce,null,Me(k.appMenus,n=>(u(),d("button",{key:n.id,ref_for:!0,ref_key:"menuItems",ref:_e,onClick:j=>z(String(n.id)),class:b(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":p.value===String(n.id),"bg-gray-100 text-gray-700 hover:bg-gray-200":p.value!==String(n.id)}]),"data-category":String(n.id)},[De(B(n.name)+" ",1),ke(n)?(u(),d("span",gn," ✓ ")):f("",!0)],10,dn))),128)),o("button",{ref_key:"menuItems",ref:_e,onClick:e[9]||(e[9]=n=>z("conclusion")),class:b(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":p.value==="conclusion","bg-gray-100 text-gray-700 hover:bg-gray-200":p.value!=="conclusion"}]),"data-category":"conclusion"},[e[30]||(e[30]=De(" Kesimpulan ")),Ue.value.isComplete?(u(),d("span",vn," ✓ ")):f("",!0)],2)],544)],2)):f("",!0),U.value==="vertical"&&$.value?(u(),d("div",pn,[o("div",{class:"absolute inset-0 bg-black bg-opacity-30",onClick:R}),o("div",{class:b(["absolute z-40 w-60 bg-white rounded-xl shadow-xl p-2 max-h-[75vh] overflow-y-auto",{"top-16 right-4":S.value==="top-right","top-16 left-4":S.value==="top-left","bottom-16 right-4":S.value==="bottom-right","bottom-16 left-4":S.value==="bottom-left"}])},[o("div",{class:"flex items-center justify-between px-2 py-1 border-b"},[e[31]||(e[31]=o("div",{class:"text-sm font-semibold"},"Pilih Menu",-1)),o("button",{onClick:R,class:"text-xs text-gray-500 hover:text-gray-700"},"Tutup")]),o("div",mn,[o("div",fn,[e[32]||(e[32]=o("span",{class:"text-sm text-gray-600"},"Swipe Gesture",-1)),o("button",{onClick:Fe,type:"button",class:b(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",w.value?"bg-indigo-600":"bg-gray-200"]),role:"switch","aria-checked":w.value},[o("span",{"aria-hidden":"true",class:b(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",w.value?"translate-x-5":"translate-x-0"])},null,2)],10,hn)]),o("div",yn,[e[34]||(e[34]=o("span",{class:"text-sm text-gray-600"},"Sumber",-1)),Se(o("select",{"onUpdate:modelValue":e[10]||(e[10]=n=>L.value=n),onChange:Re,class:"text-sm border border-gray-300 rounded-md px-6 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},e[33]||(e[33]=[o("option",{value:"all"},"Tanya",-1),o("option",{value:"camera"},"Kamera",-1),o("option",{value:"gallery"},"Galeri",-1)]),544),[[at,L.value]])]),o("button",{onClick:e[11]||(e[11]=n=>{z("vehicle"),R()}),class:b([he(p.value==="vehicle"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[e[35]||(e[35]=o("span",null,"Detail Kendaraan",-1)),ie.value?(u(),d("span",xn,"✓")):f("",!0)],2),(u(!0),d(ce,null,Me(k.appMenus,n=>(u(),d("button",{key:`vmenu-${n.id}`,onClick:()=>{z(String(n.id)),R()},class:b([he(p.value===String(n.id)),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[o("span",null,B(n.name),1),ke(n)?(u(),d("span",bn,"✓")):f("",!0)],10,wn))),128)),o("button",{onClick:e[12]||(e[12]=n=>{z("conclusion"),R()}),class:b([he(p.value==="conclusion"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[e[36]||(e[36]=o("span",null,"Kesimpulan",-1)),Ue.value.isComplete?(u(),d("span",kn,"✓")):f("",!0)],2)])],2)])):f("",!0),o("div",{class:b(["max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-1",{"pb-4 pt-1":S.value==="top","pb-20 pt-4":S.value==="bottom","pb-4 pt-4":U.value==="vertical"}])},[A(lt,{name:"fade"},{default:de(()=>[O.value?(u(),d("div",_n,B(O.value),1)):f("",!0)]),_:1}),o("div",Cn,[A(lt,{name:"category-slide",mode:"out-in"},{default:de(()=>[p.value==="vehicle"?(u(),d("div",Sn,[A(Yt,{inspection:k.inspection,CarDetail:k.CarDetail,allInspections:r.allInspections,onUpdateVehicle:At,onSaveCarDetails:Bt,"onUpdate:validation":Mt,"onUpdate:hasUnsavedChanges":Ae},null,8,["inspection","CarDetail","allInspections"])])):xe.value&&p.value!=="conclusion"?(u(),d("div",{key:xe.value.id},[A(Xt,{category:xe.value,"inspection-id":k.inspection.id,car:r.car,form:l(a),head:U.value,onUpdateResult:Vt,onHapusPoint:Ke,onRemoveImage:Nt},null,8,["category","inspection-id","car","form","head"])])):p.value==="conclusion"?(u(),d("div",Dn,[A(Zt,{form:{conclusion:h.value},"inspection-id":k.inspection.id,inspection:k.inspection,settings:k.inspection.settings||{},onUpdateConclusion:Ot},null,8,["form","inspection-id","inspection","settings"])])):f("",!0)]),_:1})]),p.value==="conclusion"?(u(),d("div",{key:0,class:b(["flex justify-end gap-4 mt-2 p-4 bg-white rounded-xl shadow-md",{"mb-4":S.value==="top","mb-20":S.value==="bottom"}])},[A(l(Gt),{href:t.route("inspections.pending",k.inspectionId),as:"button",type:"button",disabled:oe.value&&se.value==="pending",onClick:e[13]||(e[13]=Wt(n=>_t(t.route("inspections.pending",k.inspectionId),"pending"),["prevent"])),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md shadow-sm bg-yellow-500 text-white hover:bg-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed"},{default:de(()=>[oe.value&&se.value==="pending"?(u(),d(ce,{key:0},[e[37]||(e[37]=o("svg",{class:"animate-spin h-4 w-4 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e[38]||(e[38]=o("span",null,"Memproses...",-1))],64)):(u(),d("span",Mn,"Tunda"))]),_:1},8,["href","disabled"]),o("button",{type:"button",onClick:zt,disabled:!$e.value||F.value,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[F.value?(u(),d("svg",Pn,e[39]||(e[39]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):f("",!0),o("span",null,B(F.value?"Mengirim...":"Final Kirim Inspeksi"),1)],8,Tn)],2)):f("",!0),Ct.value?(u(),d("button",{key:1,onMousedown:e[14]||(e[14]=(...n)=>l(Z)&&l(Z)(...n)),onMouseup:e[15]||(e[15]=(...n)=>l(ee)&&l(ee)(...n)),onMouseleave:e[16]||(e[16]=(...n)=>l(je)&&l(je)(...n)),onMousemove:e[17]||(e[17]=(...n)=>l(Q)&&l(Q)(...n)),onTouchstart:e[18]||(e[18]=(...n)=>l(Z)&&l(Z)(...n)),onTouchend:e[19]||(e[19]=(...n)=>l(ee)&&l(ee)(...n)),onTouchmove:e[20]||(e[20]=(...n)=>l(Q)&&l(Q)(...n)),onClick:kt,class:"fixed z-5 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white rounded-full shadow-lg",style:it({left:l(Ee).x+"px",top:l(Ee).y+"px"})},e[40]||(e[40]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),36)):f("",!0),A(Qt,{show:te.value,title:"Cari Point Inspeksi",subtitle:"Pilih point inspeksi untuk ditambahkan",onClose:He},{default:de(()=>[o("button",{onClick:He,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10"},e[41]||(e[41]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),o("div",In,[o("div",Ln,[Se(o("input",{"onUpdate:modelValue":e[21]||(e[21]=n=>K.value=n),type:"text",placeholder:"Cari point inspeksi...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[qt,K.value]]),e[42]||(e[42]=o("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[o("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),o("div",En,[Oe.value.length===0?(u(),d("div",jn," Tidak ada point yang ditemukan ")):f("",!0),(u(!0),d(ce,null,Me(Oe.value,n=>{var j,ot;return u(),d("button",{key:n.id,onClick:Fn=>Lt(n),class:"w-full text-left p-3 border-b border-gray-200 hover:bg-gray-50 transition-colors"},[o("div",An,B((j=n.inspection_point)==null?void 0:j.name),1),o("div",Bn,B((ot=n.inspection_point)==null?void 0:ot.description),1),o("div",On,B(Ne(n)),1),ze(n.inspection_point_id)?(u(),d("div",zn," ✓ Sudah ada data ")):f("",!0)],8,Vn)}),128))])])]),_:1},8,["show"]),ne.value?(u(),Ht(en,{key:(i=y.value)==null?void 0:i.id,show:ne.value,title:((c=(s=y.value)==null?void 0:s.inspection_point)==null?void 0:c.name)||"Detail Point",subtitle:(x=(g=y.value)==null?void 0:g.inspection_point)==null?void 0:x.description,name:`point-${(m=y.value)==null?void 0:m.id}`,"inspection-id":k.inspection.id,"point-id":(T=y.value)==null?void 0:T.inspection_point_id,settings:((M=y.value)==null?void 0:M.settings)||{},options:((G=(_=y.value)==null?void 0:_.settings)==null?void 0:G.radios)||[],"selected-Point":y.value,"selected-value":H.value,"images-value":l(a).images[(q=y.value)==null?void 0:q.inspection_point_id],"notes-value":W.value,point:y.value,"existing-data":Tt((E=y.value)==null?void 0:E.inspection_point_id),"onUpdate:selectedValue":e[22]||(e[22]=n=>H.value=n),"onUpdate:notesValue":e[23]||(e[23]=n=>W.value=n),"onUpdate:imagesValue":Et,onSave:jt,onClose:Ce,onHapus:Ke},null,8,["show","title","subtitle","name","inspection-id","point-id","settings","options","selected-Point","selected-value","images-value","notes-value","point","existing-data"])):f("",!0),re.value?(u(),d("div",Nn,e[43]||(e[43]=[o("p",{class:"text-sm"},"Tekan sekali lagi untuk keluar dari inspeksi",-1),o("p",{class:"text-xs text-gray-300 mt-1"},"Data inspeksi telah disimpan secara lokal",-1)]))):f("",!0)],2)])}}},Yn=tn(Un,[["__scopeId","data-v-1fcb5ad1"]]);export{Yn as default};
