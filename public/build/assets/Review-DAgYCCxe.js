import{g as v,b as k,o as n,w as g,e as c,d as t,f as a,i as p,u as d,l as j,t as m,S as y,j as u,F as C,n as x,v as L,y as D,W as V}from"./vendor-BTHpbkmK.js";import{A as $}from"./AppLayout-DN0OSRb8.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as A,C as B}from"./car-BLs3-kkU.js";import{r as R}from"./ClipboardDocumentListIcon-B_drttNl.js";const S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},H={class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200"},E={class:"p-4 flex justify-between items-start"},F={class:"flex items-center mb-1"},N={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},T={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},K={class:"flex items-center"},O={class:"text-sm font-medium text-gray-800"},P={key:0},W={class:"text-gray-600"},q={key:1},J={class:"flex items-center mt-2"},U={class:"text-sm font-bold text-gray-900"},Y={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},G={class:"text-sm text-gray-800"},Q={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},X={class:"flex items-center mb-1"},Z={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1"},_={class:"mt-3"},ee={class:"text-sm text-gray-800"},te=["innerHTML"],se={class:"p-4 flex gap-2"},ie=["disabled"],ne={key:0},oe={key:1},ae=["href","disabled"],le={key:0},re={key:1},de=["disabled"],ue={key:0},ce={key:1},me={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},pe={class:"bg-white p-6 rounded-lg shadow-xl w-96"},ve={class:"flex justify-end space-x-4"},ge=["disabled"],ye={key:0,class:"flex items-center"},xe={key:1},fe={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},we={class:"bg-white p-6 rounded-lg shadow-xl w-96"},he={class:"flex justify-end space-x-4 mt-6"},be=["disabled"],ke={__name:"Review",props:{inspection:{type:Object,required:!0},encryptedIds:Object},setup(s){const f=v(!1),w=v(!1),b=v(""),i=v(!1),l=v(null),I=o=>{switch(o){case"draft":return"Dibuat";case"in_progress":return"Dalam Proses";case"pending":return"Menunggu";case"pending_review":return"Menunggu Review";case"approved":return"Disetujui";case"rejected":return"Ditolak";case"revision":return"Revisi";case"completed":return"Selesai";case"cancelled":return"Dibatalkan";default:return o}},h=(o,e)=>{i.value=!0,l.value=e,V.visit(o,{onFinish:()=>{i.value=!1,l.value=null}})},M=o=>{i.value=!0,l.value="download",setTimeout(()=>{i.value=!1,l.value=null},1500)};return(o,e)=>(n(),k($,null,{default:g(()=>[c(d(j),{title:"Review Inspeksi"}),t("div",S,[e[21]||(e[21]=t("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),t("div",H,[t("div",E,[t("div",null,[t("div",F,[c(d(A),{class:"h-5 w-5 text-blue-500 mr-2"}),e[10]||(e[10]=t("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),t("p",N,m(new Date(s.inspection.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),c(d(y),{href:o.route("inspection.log",s.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:g(()=>e[11]||(e[11]=[u(" Lihat Log ")])),_:1,__:[11]},8,["href"])]),t("div",T,[t("div",K,[c(d(B),{class:"h-5 w-5 text-gray-500 mr-2"}),t("div",O,[s.inspection.car?(n(),a("div",P,[u(m(`${s.inspection.car.brand.name} ${s.inspection.car.model.name} ${s.inspection.car.type.name} ${s.inspection.car.cc} ${s.inspection.car.transmission} ${s.inspection.car.year}`)+" ",1),t("span",W,"("+m(s.inspection.car.fuel_type)+")",1)])):(n(),a("div",q,m(s.inspection.car_name),1))])]),t("div",J,[e[12]||(e[12]=t("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),t("span",U,m(s.inspection.plate_number),1)])]),s.inspection.category?(n(),a("div",Y,[e[13]||(e[13]=t("p",{class:"text-xs font-medium text-gray-500 tracking-wide"}," Kategori Inspeksi ",-1)),t("p",G,m(s.inspection.category.name),1)])):p("",!0),t("div",Q,[t("div",X,[c(d(R),{class:"h-5 w-5 text-green-500 mr-2"}),e[14]||(e[14]=t("span",{class:"text-sm font-medium text-gray-600"},"Status",-1))]),t("p",Z,m(I(s.inspection.status)),1),t("div",_,[e[15]||(e[15]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"}," Catatan ",-1)),t("p",ee,[t("div",{innerHTML:s.inspection.notes||"-"},null,8,te)])])]),t("div",se,[s.inspection.status==="pending_review"?(n(),a(C,{key:0},[t("button",{onClick:e[0]||(e[0]=r=>f.value=!0),class:"flex-2 px-3 py-2 bg-yellow-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-yellow-600",disabled:i.value}," Revisi ",8,ie),c(d(y),{href:o.route("inspections.review.pdf",s.encryptedIds),disabled:i.value,onClick:e[1]||(e[1]=r=>h(o.route("inspections.review.pdf",s.encryptedIds),"lihat_laporan")),class:x(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":i.value&&l.value==="lihat_laporan"}])},{default:g(()=>[i.value&&l.value==="lihat_laporan"?(n(),a("span",ne,e[16]||(e[16]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Memuat Laporan... ")]))):(n(),a("span",oe,"Lihat Laporan PDF"))]),_:1},8,["href","disabled","class"])],64)):s.inspection.status==="approved"&&s.inspection.file?(n(),a(C,{key:1},[s.inspection.file?(n(),a("a",{key:0,href:o.route("inspections.download.approved.pdf",s.encryptedIds),onClick:e[2]||(e[2]=r=>M(o.route("inspections.download.approved.pdf",s.encryptedIds))),class:x(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-blue-700",{"opacity-50 cursor-not-allowed":i.value&&l.value==="download"}]),disabled:i.value,download:""},[i.value&&l.value==="download"?(n(),a("span",le,e[17]||(e[17]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Sedang di download... ")]))):(n(),a("span",re,e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),u(" Download PDF ")])))],10,ae)):p("",!0),t("button",{onClick:e[3]||(e[3]=r=>w.value=!0),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-teal-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-teal-600",disabled:i.value},e[19]||(e[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1),u(" Kirim Via Email ")]),8,de)],64)):p("",!0)]),s.inspection.status==="approved"&&s.inspection.file?(n(),k(d(y),{key:1,href:o.route("inspections.review.pdf",s.encryptedIds),disabled:i.value,onClick:e[4]||(e[4]=r=>h(o.route("inspections.review.pdf",s.encryptedIds),"lihat_laporan")),class:x(["inline-flex items-center justify-center w-full px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":i.value&&l.value==="lihat_laporan"}])},{default:g(()=>[i.value&&l.value==="lihat_laporan"?(n(),a("span",ue,e[20]||(e[20]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Memuat Laporan... ")]))):(n(),a("span",ce,"Lihat Laporan"))]),_:1},8,["href","disabled","class"])):p("",!0)])]),f.value?(n(),a("div",me,[t("div",pe,[e[23]||(e[23]=t("h3",{class:"text-lg font-bold mb-4"},"Konfirmasi Revisi",-1)),e[24]||(e[24]=t("p",{class:"text-gray-700 mb-2"}," Apakah Anda yakin ingin revisi pada laporan ini? ",-1)),e[25]||(e[25]=t("p",{class:"text-gray-700 mb-4"},"Setelah ini akan masuk ke halaman Inspeksi.",-1)),t("div",ve,[t("button",{onClick:e[5]||(e[5]=r=>f.value=!1),disabled:i.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,ge),c(d(y),{href:o.route("inspections.revisi",s.encryptedIds),disabled:i.value,onClick:e[6]||(e[6]=r=>h(o.route("inspections.revisi",s.encryptedIds),"revisi")),class:x(["bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600",{"opacity-50 cursor-not-allowed":i.value&&l.value==="revisi"}])},{default:g(()=>[i.value&&l.value==="revisi"?(n(),a("span",ye,e[22]||(e[22]=[t("svg",{class:"animate-spin h-5 w-5 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Memproses... ")]))):(n(),a("span",xe,"Ya, Revisi"))]),_:1},8,["href","disabled","class"])])])])):p("",!0),w.value?(n(),a("div",fe,[t("div",we,[e[26]||(e[26]=t("h3",{class:"text-lg font-bold mb-4"},"Kirim Laporan Via Email",-1)),e[27]||(e[27]=t("p",{class:"text-gray-700 mb-2"}," Masukkan alamat email tujuan: ",-1)),L(t("input",{type:"email","onUpdate:modelValue":e[7]||(e[7]=r=>b.value=r),class:"w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contoh@email.com"},null,512),[[D,b.value]]),t("div",he,[t("button",{onClick:e[8]||(e[8]=r=>w.value=!1),disabled:i.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,be),t("button",{onClick:e[9]||(e[9]=(...r)=>o.sendEmail&&o.sendEmail(...r)),disabled:"",class:"bg-teal-500 text-white px-4 py-2 rounded-md hover:bg-teal-600"}," Masih dalam pengembangan ")])])])):p("",!0)]),_:1}))}},De=z(ke,[["__scopeId","data-v-3996394a"]]);export{De as default};
