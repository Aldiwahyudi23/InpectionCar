import{x as T,d as v,k as V,l as E,m as S,e as n,o as r,a as e,t as b,j as w,p as _,b as h,v as M,u as l,n as y,g as u,F as D,h as H,f as K,w as L,q as $,W as z}from"./app-DKBrlfM2.js";import{_ as C}from"./InputError-CZxZJaVU.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4 sm:px-6 lg:px-8"},U={class:"w-full max-w-md"},W={class:"bg-white shadow-xl rounded-2xl p-8 border border-gray-200/50"},q={class:"text-center mb-8"},F={class:"text-xl font-semibold text-gray-800"},G={class:"text-gray-600 text-sm mt-1"},J=["disabled"],Q={key:0,class:"flex items-center"},R={key:1},X={class:"flex justify-center space-x-3"},Y=["onUpdate:modelValue","id","onInput","onKeydown"],Z={class:"text-center"},ee={key:0,class:"text-sm text-gray-600 mb-4"},te={class:"font-medium text-blue-600"},oe={key:1,class:"text-sm text-gray-600 mb-4"},se=["disabled"],ne=["disabled"],re={key:0,class:"flex items-center"},le={key:1},ae={class:"text-center mt-8 pt-6 border-t border-gray-200"},ie={__name:"OtpLogin",setup(de){const s=T({phone:"",otp:""}),c=v(!1),a=v(["","","",""]),d=v(90),m=V(()=>a.value.every(t=>t.length===1)),O=t=>{a.value[t].length===1&&t<3&&document.getElementById(`otp-${t+1}`).focus(),m.value&&(s.otp=a.value.join(""),f())},j=t=>{a.value[t].length===0&&t>0&&document.getElementById(`otp-${t-1}`).focus()},B=t=>{t.preventDefault();const o=t.clipboardData.getData("text").slice(0,4);/^\d+$/.test(o)&&(o.split("").forEach((p,i)=>{i<4&&(a.value[i]=p)}),s.otp=a.value.join(""),m.value&&f())},I=()=>{s.post("/check-phone",{onSuccess:()=>{c.value=!0,g(),setTimeout(()=>{var t;return(t=document.getElementById("otp-0"))==null?void 0:t.focus()},100)}})},f=()=>{s.post("/verify-otp",{onSuccess:()=>{z.visit("/dashboard")},onError:()=>{a.value=["","","",""],setTimeout(()=>{var t;return(t=document.getElementById("otp-0"))==null?void 0:t.focus()},100)}})},P=()=>{s.post("/resend-otp",{onSuccess:()=>{d.value=90,g(),a.value=["","","",""],setTimeout(()=>{var t;return(t=document.getElementById("otp-0"))==null?void 0:t.focus()},100)}})},g=()=>{const t=setInterval(()=>{d.value>0?d.value--:clearInterval(t)},1e3)};return E(()=>{c.value&&g()}),(t,o)=>{const k=S("Link");return r(),n("div",A,[e("div",U,[e("div",W,[e("div",q,[o[1]||(o[1]=e("div",{class:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-600 to-blue-700 mb-2"}," CekMobil ",-1)),e("h2",F,b(c.value?"Masukkan Kode OTP":"Login dengan Nomor HP"),1),e("p",G,b(c.value?"Masukkan 4 digit kode yang dikirim via SMS":"Masukkan nomor HP Anda untuk melanjutkan"),1)]),c.value?(r(),n("form",{key:1,onSubmit:w(f,["prevent"]),class:"space-y-6"},[e("div",X,[(r(!0),n(D,null,H(a.value,(p,i)=>_((r(),n("input",{key:i,"onUpdate:modelValue":x=>a.value[i]=x,type:"text",maxlength:"1",id:`otp-${i}`,class:y(["w-14 h-14 text-center border border-gray-300 rounded-lg shadow-sm","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","text-xl font-semibold transition-colors duration-200",l(s).errors.otp?"border-red-300":"border-gray-300"]),onInput:x=>O(i),onKeydown:$(x=>j(i),["delete"]),onPaste:B},null,42,Y)),[[M,a.value[i]]])),128))]),h(C,{class:"text-center text-sm text-red-600",message:l(s).errors.otp},null,8,["message"]),e("div",Z,[d.value>0?(r(),n("div",ee,[o[4]||(o[4]=u(" Kode OTP berlaku dalam ")),e("span",te,b(d.value),1),o[5]||(o[5]=u(" detik "))])):(r(),n("div",oe," Kode OTP sudah tidak berlaku ")),d.value<=0?(r(),n("button",{key:2,type:"button",onClick:P,disabled:l(s).processing,class:"text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200 flex items-center justify-center mx-auto"},o[6]||(o[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),u(" Kirim Ulang OTP ")]),8,se)):K("",!0)]),e("div",null,[e("button",{type:"submit",disabled:l(s).processing||!m.value,class:y(["w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white","bg-gradient-to-r from-sky-600 to-blue-700 hover:from-sky-700 hover:to-blue-800","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","transition-all duration-200 transform hover:scale-105",l(s).processing||!m.value?"opacity-50 cursor-not-allowed":""])},[l(s).processing?(r(),n("span",re,o[7]||(o[7]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Memverifikasi... ")]))):(r(),n("span",le,"Verifikasi OTP"))],10,ne)])],32)):(r(),n("form",{key:0,onSubmit:w(I,["prevent"]),class:"space-y-6"},[e("div",null,[o[2]||(o[2]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},"Nomor HP",-1)),_(e("input",{id:"phone","onUpdate:modelValue":o[0]||(o[0]=p=>l(s).phone=p),type:"text",required:"",class:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"08xxxxxxxxxx"},null,512),[[M,l(s).phone]]),h(C,{class:"mt-2 text-sm text-red-600",message:l(s).errors.phone},null,8,["message"])]),e("div",null,[e("button",{type:"submit",disabled:l(s).processing,class:y(["w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white","bg-gradient-to-r from-sky-600 to-blue-700 hover:from-sky-700 hover:to-blue-800","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","transition-all duration-200 transform hover:scale-105",l(s).processing?"opacity-50 cursor-not-allowed":""])},[l(s).processing?(r(),n("span",Q,o[3]||(o[3]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Mengirim... ")]))):(r(),n("span",R,"Kirim OTP"))],10,J)])],32)),e("div",ae,[h(k,{href:"/login",class:"text-sm text-blue-600 hover:text-blue-500 transition-colors duration-200 font-medium flex items-center justify-center"},{default:L(()=>o[8]||(o[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),u(" Masuk Menggunakan Email ")])),_:1,__:[8]})]),o[9]||(o[9]=e("div",{class:"text-center mt-8"},[e("p",{class:"text-xs text-gray-500"}," Â© 2024 CekMobil. Aldi Wahyudi ")],-1))])])])}}},pe=N(ie,[["__scopeId","data-v-ed0bcc4a"]]);export{pe as default};
