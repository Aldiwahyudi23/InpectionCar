import{e as o,o as i,a as e,d as f,c as y,w as p,b as l,f as u,u as d,i as k,t as n,g as x,F as h,S as v,p as j,v as V,W as C}from"./app-DT7J50oG.js";import{A as L}from"./AppLayout-Dt7gaPQ7.js";import{r as D,C as I}from"./CalendarDaysIcon-xLo8XJwE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function $(s,g){return i(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}const M={class:"py-6 md:py-10"},B={class:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8"},R={class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200"},A={class:"p-4"},H={class:"flex items-center mb-1"},S={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},E={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},K={class:"flex items-center"},N={class:"text-sm font-medium text-gray-800"},P={key:0},F={class:"text-gray-600"},O={key:1},Z={class:"flex items-center mt-2"},T={class:"text-sm font-bold text-gray-900"},W={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},q={class:"text-sm text-gray-800"},J={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},U={class:"flex items-center mb-1"},Y={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1"},z={class:"mt-3"},G={class:"text-sm text-gray-800"},Q={class:"p-4 flex gap-2"},X=["href"],_={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center"},ee={class:"bg-white p-6 rounded-lg shadow-xl w-96"},te={class:"flex justify-end space-x-4"},se={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center"},ie={class:"bg-white p-6 rounded-lg shadow-xl w-96"},ne={class:"flex justify-end space-x-4 mt-6"},le={__name:"Review",props:{inspection:{type:Object,required:!0},encryptedIds:Object},setup(s){const g=f(!1),m=f(!1),a=f(""),b=r=>{switch(r){case"draft":return"Draft";case"in_progress":return"Sedang Berjalan";case"pending_review":return"Menunggu Review";case"revisi":return"Perlu Revisi";case"jeda":return"Ditunda";case"approved":return"Disetujui";default:return r}},w=()=>{a.value&&(C.post(route("inspections.send.email",props.encryptedIds),{email:a.value}).then(()=>{m.value=!1,a.value="",alert("Laporan berhasil dikirim via email!")}),m.value=!1,a.value="",alert("Laporan berhasil dikirim ke "+a.value))};return(r,t)=>(i(),y(L,null,{default:p(()=>[l(d(k),{title:"Review Inspeksi"}),e("div",M,[e("div",B,[t[13]||(t[13]=e("h1",{class:"text-2xl md:text-3xl font-bold text-indigo-900 mb-6 text-center"}," Review Pemeriksaan ",-1)),e("div",R,[e("div",A,[e("div",H,[l(d(D),{class:"h-5 w-5 text-blue-500 mr-2"}),t[5]||(t[5]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",S,n(new Date(s.inspection.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),e("div",E,[e("div",K,[l(d(I),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",N,[s.inspection.car?(i(),o("div",P,[x(n(`${s.inspection.car.brand.name} ${s.inspection.car.model.name} ${s.inspection.car.type.name} ${s.inspection.car.cc} ${s.inspection.car.transmission} ${s.inspection.car.year}`)+" ",1),e("span",F,"("+n(s.inspection.car.fuel_type)+")",1)])):(i(),o("div",O,n(s.inspection.car_name),1))])]),e("div",Z,[t[6]||(t[6]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),e("span",T,n(s.inspection.plate_number),1)])]),s.inspection.category?(i(),o("div",W,[t[7]||(t[7]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"}," Kategori Inspeksi ",-1)),e("p",q,n(s.inspection.category.name),1)])):u("",!0),e("div",J,[e("div",U,[l(d($),{class:"h-5 w-5 text-green-500 mr-2"}),t[8]||(t[8]=e("span",{class:"text-sm font-medium text-gray-600"},"Status",-1))]),e("p",Y,n(b(s.inspection.status)),1),e("div",z,[t[9]||(t[9]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"}," Catatan ",-1)),e("p",G,n(s.inspection.notes??"-"),1)])]),e("div",Q,[s.inspection.status==="pending_review"?(i(),o(h,{key:0},[e("button",{onClick:t[0]||(t[0]=c=>g.value=!0),class:"flex-1 px-3 py-2 bg-yellow-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-yellow-600"}," Revisi "),l(d(v),{href:r.route("inspections.review.pdf",s.encryptedIds),class:"flex-2 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700"},{default:p(()=>t[10]||(t[10]=[x(" Lihat Laporan PDF ")])),_:1,__:[10]},8,["href"])],64)):s.inspection.status==="approved"&&s.inspection.file?(i(),o(h,{key:1},[e("a",{href:r.route("inspections.download.approved.pdf",s.encryptedIds),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-blue-700",download:""}," Download Laporan PDF ",8,X),e("button",{onClick:t[1]||(t[1]=c=>m.value=!0),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-teal-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-teal-600"},t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1),x(" Kirim Via Email ")]))],64)):u("",!0)]),s.inspection.status==="approved"&&s.inspection.file?(i(),y(d(v),{key:1,href:r.route("inspections.review.pdf",s.encryptedIds),class:"inline-flex items-center justify-center w-full px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700"},{default:p(()=>t[12]||(t[12]=[x(" Lihat Laporan ")])),_:1,__:[12]},8,["href"])):u("",!0)])])]),g.value?(i(),o("div",_,[e("div",ee,[t[15]||(t[15]=e("h3",{class:"text-lg font-bold mb-4"},"Konfirmasi Revisi",-1)),t[16]||(t[16]=e("p",{class:"text-gray-700 mb-6"}," Apakah Anda yakin ingin mengajukan revisi pada laporan ini? ",-1)),e("div",te,[e("button",{onClick:t[2]||(t[2]=c=>g.value=!1),class:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400"}," Batal "),l(d(v),{href:r.route("inspections.revisi",s.encryptedIds),class:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600"},{default:p(()=>t[14]||(t[14]=[x(" Ya, Ajukan Revisi ")])),_:1,__:[14]},8,["href"])])])])):u("",!0),m.value?(i(),o("div",se,[e("div",ie,[t[17]||(t[17]=e("h3",{class:"text-lg font-bold mb-4"},"Kirim Laporan Via Email",-1)),t[18]||(t[18]=e("p",{class:"text-gray-700 mb-2"}," Masukkan alamat email tujuan: ",-1)),j(e("input",{type:"email","onUpdate:modelValue":t[3]||(t[3]=c=>a.value=c),class:"w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contoh@email.com"},null,512),[[V,a.value]]),e("div",ne,[e("button",{onClick:t[4]||(t[4]=c=>m.value=!1),class:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400"}," Batal "),e("button",{onClick:w,class:"bg-teal-500 text-white px-4 py-2 rounded hover:bg-teal-600"}," Kirim ")])])])):u("",!0)]),_:1}))}};export{le as default};
