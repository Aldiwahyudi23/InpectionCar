import{f as r,o,d as e,g as v,x as R,q,b as K,w as _,e as d,i as y,u as i,l as E,F as J,k as U,t as a,S as k,j as c,v as G,y as Q}from"./vendor-BTHpbkmK.js";import{A as W}from"./AppLayout-DfBZcBN2.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as Y,C as I}from"./car-BLs3-kkU.js";import{r as Z}from"./XMarkIcon-DPBCh8Zc.js";function ee(u,x){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function te(u,x){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}const se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ae={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2"},ne={class:"p-4 flex justify-between items-start"},oe={class:"flex items-center mb-1"},re={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},ie={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},le={class:"flex items-center"},de={class:"text-sm font-medium text-gray-800"},ce={key:0},ue={class:"text-gray-600"},me={key:1},pe={class:"flex items-center mt-2"},xe={class:"text-sm font-bold text-gray-900"},ge={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},ye={class:"text-sm text-gray-800"},ve={class:"p-4 flex space-x-2"},_e=["onClick"],be=["onClick","disabled"],fe={key:1,class:"text-center py-8"},he={class:"text-center mt-6"},we={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},ke={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},Ie={class:"p-6"},Ce={class:"flex items-start mb-4"},$e={key:0},je={class:"font-medium text-gray-800"},Me={class:"text-sm text-gray-600"},Le={class:"text-gray-500"},Be={key:1,class:"text-sm font-medium text-gray-800"},De={class:"flex items-center mt-2"},Te={class:"text-base font-bold text-gray-900"},Ae={class:"text-gray-600 mb-6"},Se={key:0,class:"font-semibold text-gray-800"},He={class:"flex justify-end space-x-3"},Re=["disabled"],Fe={key:0},Ne={key:1},Ve={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},Pe={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},ze={class:"p-6"},Oe={class:"flex items-center justify-between mb-4"},qe={class:"flex items-start mb-4"},Ke={key:0},Ee={class:"font-medium text-gray-800"},Je={class:"text-sm text-gray-600"},Ue={class:"text-gray-500"},Ge={key:1,class:"text-sm font-medium text-gray-800"},Qe={class:"flex items-center mt-2"},We={class:"text-base font-bold text-gray-900"},Xe={class:"mb-6"},Ye={key:0,class:"text-red-500 text-sm mt-1"},Ze={class:"flex justify-end space-x-3"},et=["disabled"],tt={key:0},st={key:1},at={__name:"Index",props:{tasks:Array,encryptedIds:Object},setup(u){const x=u,b=v(!1),f=v(!1),t=v(null),m=v(""),h=R({}),F=l=>{t.value=l,b.value=!0},N=l=>{t.value=l,f.value=!0},g=()=>{b.value=!1,f.value=!1,m.value=""},p=R({reason:""}),V=()=>{t.value&&(p.reason=m.value,p.post(route("inspections.cancel",{inspection:x.encryptedIds[t.value.id]}),{onSuccess:()=>{g(),m.value=""}}))},P=()=>{t.value&&h.get(route("inspections.start",{inspection:x.encryptedIds[t.value.id]}),{onFinish:()=>{g()}})},C=q(()=>x.tasks.some(l=>l.status==="in_progress"||l.status==="revision")),w=l=>{switch(l){case"draft":return"Mulai Inspeksi";case"in_progress":return"Lanjutkan Inspeksi";case"pending_review":return"Periksa Laporan";case"revision":return"Lanjutkan Revisi";case"pending":return"Ditunda => Lanjutkan Inspeksi";default:return"Detail"}},z=l=>{switch(l){case"draft":return"Memuat Halaman Inspeksi...";case"in_progress":return"Membuka Halaman Inspeksi...";case"pending_review":return"Memuat Halaman Review...";case"revision":return"Memual Halaman Revisi...";case"pending":return"Lanjutkan Inspeksi...";default:return"Detail"}};return(l,s)=>(o(),K(W,null,{default:_(()=>{var $,j,M,L,B,D,T,A,S,H;return[d(i(E),{title:"Tugas"}),e("div",se,[s[7]||(s[7]=e("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),u.tasks.length>0?(o(),r("div",ae,[(o(!0),r(J,null,U(u.tasks,n=>(o(),r("div",{key:n.id,class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition"},[e("div",ne,[e("div",null,[e("div",oe,[d(i(Y),{class:"h-5 w-5 text-blue-500 mr-2"}),s[1]||(s[1]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",re,a(new Date(n.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),d(i(k),{href:l.route("inspection.log",{inspection:u.encryptedIds[n.id]}),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:_(()=>s[2]||(s[2]=[c(" Lihat Log ")])),_:2,__:[2]},1032,["href"])]),e("div",ie,[e("div",le,[d(i(I),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",de,[n.car?(o(),r("div",ce,[c(a(`${n.car.brand.name} ${n.car.model.name} ${n.car.type.name} ${n.car.cc} ${n.car.transmission} ${n.car.year}`)+" ",1),e("span",ue,"("+a(n.car.fuel_type)+")",1)])):(o(),r("div",me,a(n.car_name),1))])]),e("div",pe,[s[3]||(s[3]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),e("span",xe,a(n.plate_number),1)])]),n.category?(o(),r("div",ge,[s[4]||(s[4]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"},"Kategori Inspek",-1)),e("p",ye,a(n.category.name),1)])):y("",!0),e("div",ve,[e("button",{onClick:O=>N(n),class:"flex-6 px-3 py-2 bg-gray-200 text-gray-700 font-medium rounded-md text-sm hover:bg-gray-300 transition-colors"}," Batal ",8,_e),e("button",{onClick:O=>F(n),disabled:C.value&&n.status!=="in_progress"&&n.status!=="revision",class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[c(a(w(n.status))+" ",1),d(i(ee),{class:"ml-2 h-4 w-4"})],8,be)])]))),128))])):(o(),r("div",fe,s[5]||(s[5]=[e("p",{class:"text-gray-500"},"Tidak ada tugas inspeksi yang tersedia.",-1)]))),e("div",he,[d(i(k),{href:l.route("inspections.history"),class:"inline-block px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-600 rounded-md hover:bg-blue-50"},{default:_(()=>s[6]||(s[6]=[c(" Lihat Inspeksi Lainnya ")])),_:1,__:[6]},8,["href"])])]),d(i(k),{href:l.route("inspections.create.new"),class:"fixed bottom-24 right-6 z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white rounded-full transition-colors duration-200 animate-bounce",title:"Buat Inspeksi Baru"},{default:_(()=>[d(i(te),{class:"h-6 w-6"})]),_:1},8,["href"]),b.value?(o(),r("div",we,[e("div",ke,[e("div",Ie,[s[10]||(s[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Konfirmasi",-1)),e("div",Ce,[d(i(I),{class:"h-8 w-8 text-blue-500 mr-3 mt-1"}),e("div",null,[($=t.value)!=null&&$.car?(o(),r("div",$e,[e("p",je,a(`${t.value.car.brand.name} ${t.value.car.model.name} ${t.value.car.type.name}`),1),e("p",Me,[c(a(t.value.car.cc)+" • "+a(t.value.car.transmission)+" • "+a(t.value.car.year)+" ",1),e("span",Le,"("+a(t.value.car.fuel_type)+")",1)])])):(o(),r("div",Be,a((j=t.value)==null?void 0:j.car_name),1)),e("div",De,[s[8]||(s[8]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",Te,a((M=t.value)==null?void 0:M.plate_number),1)])])]),e("p",Ae,[c(" Anda yakin ingin "+a(w((L=t.value)==null?void 0:L.status).toLowerCase())+" inspeksi ini ",1),(B=t.value)!=null&&B.category?(o(),r("span",Se," berdasarkan Type Inspek: "+a(t.value.category.name),1)):y("",!0),s[9]||(s[9]=c("? "))]),e("div",He,[e("button",{onClick:g,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{onClick:P,type:"button",disabled:i(h).processing||C.value&&t.value.status!=="in_progress"&&t.value.status!=="revision",class:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white border border-transparent rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[i(h).processing?(o(),r("span",Fe,a(z((D=t.value)==null?void 0:D.status)),1)):(o(),r("span",Ne,a(w((T=t.value)==null?void 0:T.status)),1))],8,Re)])])])])):y("",!0),f.value?(o(),r("div",Ve,[e("div",Pe,[e("div",ze,[e("div",Oe,[s[11]||(s[11]=e("h3",{class:"text-lg font-medium text-gray-900"},"Batalkan Inspeksi",-1)),e("button",{onClick:g,class:"text-gray-400 hover:text-gray-600"},[d(i(Z),{class:"h-6 w-6"})])]),e("div",qe,[d(i(I),{class:"h-8 w-8 text-red-500 mr-3 mt-1"}),e("div",null,[(A=t.value)!=null&&A.car?(o(),r("div",Ke,[e("p",Ee,a(`${t.value.car.brand.name} ${t.value.car.model.name} ${t.value.car.type.name}`),1),e("p",Je,[c(a(t.value.car.cc)+" • "+a(t.value.car.transmission)+" • "+a(t.value.car.year)+" ",1),e("span",Ue,"("+a(t.value.car.fuel_type)+")",1)])])):(o(),r("div",Ge,a((S=t.value)==null?void 0:S.car_name),1)),e("div",Qe,[s[12]||(s[12]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",We,a((H=t.value)==null?void 0:H.plate_number),1)])])]),e("div",Xe,[s[13]||(s[13]=e("label",{for:"cancelReason",class:"block text-sm font-medium text-gray-700 mb-2"}," Alasan Pembatalan * ",-1)),G(e("textarea",{id:"cancelReason","onUpdate:modelValue":s[0]||(s[0]=n=>m.value=n),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan alasan pembatalan inspeksi...",required:""},null,512),[[Q,m.value]]),i(p).errors.reason?(o(),r("p",Ye,a(i(p).errors.reason),1)):y("",!0)]),e("div",Ze,[e("button",{onClick:g,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Tutup "),e("button",{onClick:V,disabled:!m.value.trim()||i(p).processing,class:"px-4 py-2 bg-red-600 text-white border border-transparent rounded-md text-sm font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"},[i(p).processing?(o(),r("span",tt,"Memproses...")):(o(),r("span",st,"Batalkan Inspeksi"))],8,et)])])])])):y("",!0)]}),_:1}))}},dt=X(at,[["__scopeId","data-v-5978a59a"]]);export{dt as default};
