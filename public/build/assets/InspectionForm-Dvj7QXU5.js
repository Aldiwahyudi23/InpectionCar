import{e as c,o as d,a,f as $,t as L,F as J,h as Q,d as V,C as ae,D as ue,n as X,k as Y,E as le,g as se,b as te,p as ce,j as me,G as re,c as G,x as ge,W as ee,q as he,w as ve,u as D,l as pe,s as fe,T as we,B as ne}from"./app-C97_v6II.js";import{l as ie}from"./lodash-Damo9j3S.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const be={class:"mt-1"},xe=["value","required","minlength","maxlength","pattern","placeholder"],ye={key:0,class:"mt-2 text-sm text-red-600"},ke={__name:"InputText",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],pattern:String,placeholder:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(s,{emit:w}){const n=s,g=w,v=x=>{g("update:modelValue",x.target.value),g("save",n.pointId)};return(x,i)=>(d(),c("div",be,[a("input",{value:s.modelValue,onInput:v,type:"text",required:s.required,minlength:s.minLength,maxlength:s.maxLength,pattern:s.pattern,placeholder:s.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,xe),s.error?(d(),c("p",ye,L(s.error),1)):$("",!0)]))}},_e={class:"mt-1"},Ie=["value","required","min","max","step","placeholder"],$e={key:0,class:"mt-2 text-sm text-red-600"},Se={__name:"InputNumber",props:{modelValue:[String,Number],required:Boolean,min:[String,Number],max:[String,Number],step:[String,Number],placeholder:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(s,{emit:w}){const n=s,g=w,v=x=>{const i=x.target.value;g("update:modelValue",i),g("save",n.pointId)};return(x,i)=>(d(),c("div",_e,[a("input",{value:s.modelValue,onInput:v,type:"number",required:s.required,min:s.min,max:s.max,step:s.step,placeholder:s.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,Ie),s.error?(d(),c("p",$e,L(s.error),1)):$("",!0)]))}},Ce={class:"mt-1"},Me=["value","required","min","max"],Ve={key:0,class:"mt-2 text-sm text-red-600"},Re={__name:"InputDate",props:{modelValue:String,required:Boolean,minDate:String,maxDate:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(s,{emit:w}){const n=s,g=w,v=x=>{g("update:modelValue",x.target.value),g("save",n.pointId)};return(x,i)=>(d(),c("div",Ce,[a("input",{value:s.modelValue,onChange:v,type:"date",required:s.required,min:s.minDate,max:s.maxDate,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,Me),s.error?(d(),c("p",Ve,L(s.error),1)):$("",!0)]))}},Ue={class:"mt-1"},Le=["value","required"],Ne={key:0,class:"mt-2 text-sm text-red-600"},Pe={__name:"InputSelect",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(s,{emit:w}){const n=s,g=w,v=x=>{g("update:modelValue",x.target.value),g("save",n.pointId)};return(x,i)=>(d(),c("div",Ue,[a("select",{value:s.modelValue,onChange:v,required:s.required,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},i[0]||(i[0]=[a("option",{value:"",disabled:""},"Select status",-1),a("option",{value:"good"},"Good",-1),a("option",{value:"bad"},"Bad",-1),a("option",{value:"na"},"N/A",-1)]),40,Le),s.error?(d(),c("p",Ne,L(s.error),1)):$("",!0)]))}},qe=K(Pe,[["__scopeId","data-v-c34a74db"]]),Be={class:"mt-2"},Te={class:"flex flex-col gap-2 sm:flex-row sm:items-center"},Ee=["name","value","checked","onChange","required"],Fe={class:"text-sm text-gray-700"},je={key:0,class:"mt-2 text-sm text-red-600"},Ae={__name:"InputRadio",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number],options:{type:Array,default:()=>[{value:"good",label:"Good"},{value:"bad",label:"Bad"},{value:"na",label:"N/A"}]}},emits:["update:modelValue","save"],setup(s,{emit:w}){const n=s,g=w,v=x=>{g("update:modelValue",x),g("save",n.pointId)};return(x,i)=>(d(),c("div",Be,[a("div",Te,[(d(!0),c(J,null,Q(s.options,p=>(d(),c("label",{key:p.value,class:"inline-flex items-center space-x-2"},[a("input",{type:"radio",name:"radio-"+s.pointId,value:p.value,checked:s.modelValue===p.value,onChange:h=>v(p.value),required:s.required,class:"text-indigo-600 focus:ring-indigo-500 border-gray-300"},null,40,Ee),a("span",Fe,L(p.label),1)]))),128))]),s.error?(d(),c("p",je,L(s.error),1)):$("",!0)]))}},De={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm"},We={class:"bg-white rounded-xl p-8 w-full max-w-sm mx-auto shadow-2xl transform transition-all duration-300 scale-100 opacity-100"},ze={class:"flex flex-row space-x-4 mb-6"},He={class:"mt-4 text-right"},Ge={__name:"ImageSourceOptionsModal",props:{show:{type:Boolean,default:!1}},emits:["close","open-webcam","trigger-gallery"],setup(s){return(w,n)=>s.show?(d(),c("div",De,[a("div",We,[n[5]||(n[5]=a("h3",{class:"text-xl font-bold text-gray-800 mb-6 text-center"},"Pilih Sumber Gambar",-1)),a("div",ze,[a("button",{onClick:n[0]||(n[0]=g=>w.$emit("open-webcam")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},n[3]||(n[3]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),a("span",{class:"text-sm font-medium"},"Kamera",-1)])),a("button",{onClick:n[1]||(n[1]=g=>w.$emit("trigger-gallery")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},n[4]||(n[4]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),a("span",{class:"text-sm font-medium"},"Galeri",-1)]))]),a("div",He,[a("button",{onClick:n[2]||(n[2]=g=>w.$emit("close")),class:"px-5 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-colors duration-200 ease-in-out"}," Batal ")])])])):$("",!0)}},Xe={key:0,class:"fixed inset-0 z-40 p-0 webcam-modal-container"},Ke={class:"webcam-content-box"},Oe={class:"webcam-header"},Ye={class:"flex gap-4"},Je=["disabled"],Qe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ze={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},et={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},tt=["disabled"],at={key:0,class:"screen-flash-overlay"},st={__name:"WebcamModal",props:{show:Boolean,aspectRatio:Number,settings:Object},emits:["close","photoCaptured"],setup(s,{emit:w}){const n=s,g=w,v=V(null),x=V(null);let i=null,p=null;const h=V("environment"),y=V(!1),k=V(!1),o=V(!1),R=V(!1),B=async()=>{i&&i.getTracks().forEach(e=>e.stop()),o.value=!1;try{const e={facingMode:h.value,width:{ideal:1280},height:{ideal:960},aspectRatio:{exact:n.aspectRatio}};h.value==="environment"&&(e.advanced=[{focusMode:"continuous"}]),i=await navigator.mediaDevices.getUserMedia({video:e}),p=i.getVideoTracks()[0],v.value.srcObject=i,v.value.onloadedmetadata=async()=>{v.value.style.width="100%",v.value.style.height="auto",v.value.style.objectFit="cover",await E()}}catch(e){console.error("Error accessing camera: ",e),alert("Failed to access camera. Please ensure camera permissions are granted and try again."),g("close")}},I=()=>{i&&i.getTracks().forEach(e=>e.stop()),g("close")},E=async()=>{if(!p)return;const l=(await navigator.mediaDevices.enumerateDevices()).filter(S=>S.kind==="videoinput");y.value=l.length>1;const C=p.getCapabilities();k.value=C.torch||C.fillLightMode&&C.fillLightMode.includes("torch")},F=async()=>{if(!(!p||!n.settings.enable_flash)){if(h.value==="user"){o.value=!o.value;return}try{if(p.getCapabilities().torch)await p.applyConstraints({advanced:[{torch:!o.value}]}),o.value=!o.value;else{console.warn("Torch API not directly supported, checking fillLightMode.");const e=p.getCapabilities();e.fillLightMode&&e.fillLightMode.includes("torch")?(await p.applyConstraints({fillLightMode:o.value?"none":"torch"}),o.value=!o.value):(alert("Flash/Torch is not supported on this camera."),k.value=!1)}}catch(e){console.error("Error toggling flash: ",e),alert("Could not toggle flash. Feature might not be supported."),k.value=!1}}},N=async()=>{!y.value||!n.settings.enable_camera_switch||(h.value=h.value==="environment"?"user":"environment",await B())},m=async()=>{if(!p)return;const e=p.getCapabilities();if(e.focusMode&&e.focusMode.includes("continuous"))try{await p.applyConstraints({advanced:[{focusMode:"continuous"}]})}catch(l){console.warn("Failed to apply continuous focus constraint:",l)}else console.log("Autofocus not explicitly controllable or not supported.")},u=async()=>{if(!v.value||!x.value)return;h.value==="user"&&o.value&&(R.value=!0,await new Promise(b=>setTimeout(b,100)),R.value=!1);const e=v.value,l=x.value,C=l.getContext("2d"),S=e.videoWidth,U=e.videoHeight;let q=S,A=U,z=0,H=0;S/U>n.aspectRatio?(q=U*n.aspectRatio,z=(S-q)/2):S/U<n.aspectRatio&&(A=S/n.aspectRatio,H=(U-A)/2),l.width=q,l.height=A,C.drawImage(e,z,H,q,A,0,0,l.width,l.height),l.toBlob(b=>{if(b){const Z=new File([b],`captured_image_${Date.now()}.png`,{type:"image/png"});g("photoCaptured",Z)}else console.error("Failed to convert canvas to blob.")},"image/png")};return ae(()=>n.show,e=>{e?B():I()}),ue(()=>{i&&i.getTracks().forEach(e=>e.stop())}),(e,l)=>s.show?(d(),c("div",Xe,[a("div",Ke,[a("div",Oe,[a("button",{onClick:I,class:"p-2 rounded-full text-white hover:bg-gray-700 transition-colors"},l[0]||(l[0]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),a("div",Ye,[s.settings.enable_flash?(d(),c("button",{key:0,onClick:F,disabled:!k.value,class:X(["p-2 rounded-full text-white",{"bg-gray-700":o.value,"hover:bg-gray-700":k.value,"opacity-50 cursor-not-allowed":!k.value}])},[k.value?o.value?(d(),c("svg",Ze,l[2]||(l[2]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)]))):(d(),c("svg",et,l[3]||(l[3]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6"},null,-1)]))):(d(),c("svg",Qe,l[1]||(l[1]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.102 1.101m-.757 4.898l-4 4L9.828 9.828m4.899-.757l4-4L14.172 14.172"},null,-1)])))],10,Je)):$("",!0),s.settings.enable_camera_switch?(d(),c("button",{key:1,onClick:N,disabled:!y.value,class:X(["p-2 rounded-full text-white hover:bg-gray-700",{"opacity-50 cursor-not-allowed":!y.value}])},l[4]||(l[4]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16M6 4h.01M6 20h.01M10 4h.01M10 20h.01M14 4h.01M14 20h.01M18 4h.01M18 20h.01"})],-1)]),10,tt)):$("",!0)])]),a("div",{class:"webcam-video-container",onClick:m},[a("video",{ref_key:"webcamVideo",ref:v,autoplay:"",playsinline:"",class:"webcam-video"},null,512),a("canvas",{ref_key:"webcamCanvas",ref:x,class:"hidden"},null,512),R.value?(d(),c("div",at)):$("",!0)]),a("div",{class:"webcam-footer"},[a("button",{onClick:u,class:"capture-button"})])])])):$("",!0)}},ot=K(st,[["__scopeId","data-v-608abcc7"]]),rt={key:0,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex flex-col items-center justify-center"},nt={class:"w-full h-full flex flex-col"},it={class:"flex justify-between items-center p-4 bg-black bg-opacity-50 text-white"},lt={class:"text-lg font-medium"},dt={class:"flex-1 flex items-center justify-center overflow-hidden relative"},ut=["src"],ct={class:"flex flex-col gap-2 p-4 bg-black bg-opacity-50"},mt={class:"flex justify-between"},gt=["disabled"],ht={key:1,class:"px-4 py-2 bg-indigo-400 text-white rounded-lg cursor-not-allowed flex items-center justify-center",disabled:""},vt={key:0,class:"text-center mt-2"},pt=["disabled"],ft={__name:"ImagePreviewModal",props:{show:Boolean,images:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0},allowMultiple:Boolean,maxFiles:Number,isUploading:Boolean},emits:["close","saveImages","removePreviewImage","triggerAddMorePhotos"],setup(s,{emit:w}){const n=s,g=w,v=V(0),x=V([]),i=V(0),p=V(0),h=Y(()=>x.value.length>0?x.value[v.value]:null);ae(()=>n.images,e=>{x.value=e.map(l=>({...l})),n.show&&e.length>0?n.initialIndex===-1||n.initialIndex>=e.length?v.value=e.length-1:v.value=n.initialIndex:v.value=0,e.length===0&&n.show&&m()},{deep:!0,immediate:!0});const y=e=>e.preview||(e.image_path?`/${e.image_path}`:""),k=()=>{h.value&&(h.value.rotation=(h.value.rotation+90)%360)},o=()=>{v.value<x.value.length-1?v.value++:v.value=0},R=()=>{v.value>0?v.value--:v.value=x.value.length-1},B=e=>{i.value=e.touches[0].clientX},I=e=>{p.value=e.touches[0].clientX},E=()=>{i.value-p.value>50?o():p.value-i.value>50&&R(),i.value=0,p.value=0},F=()=>{h.value&&g("removePreviewImage",h.value)},N=()=>{g("saveImages",x.value)},m=()=>{g("close")},u=()=>{g("triggerAddMorePhotos")};return ae(()=>n.show,e=>{e?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open")},{immediate:!0}),(e,l)=>s.show?(d(),c("div",rt,[a("div",nt,[a("div",it,[a("button",{onClick:m,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors"},l[0]||(l[0]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),a("div",lt,"Preview ("+L(v.value+1)+"/"+L(x.value.length)+")",1),a("button",{onClick:k,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors"},l[1]||(l[1]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]))]),a("div",dt,[a("div",{class:"w-full h-full flex items-center justify-center",onTouchstart:B,onTouchmove:I,onTouchend:E},[h.value?(d(),c("img",{key:0,src:y(h.value),class:"max-w-full max-h-full object-contain",style:le({transform:`rotate(${h.value.rotation}deg)`})},null,12,ut)):$("",!0)],32),x.value.length>1?(d(),c("button",{key:0,onClick:R,class:"absolute left-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors"},l[2]||(l[2]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):$("",!0),x.value.length>1?(d(),c("button",{key:1,onClick:o,class:"absolute right-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors"},l[3]||(l[3]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):$("",!0)]),a("div",ct,[a("div",mt,[a("button",{onClick:F,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",disabled:s.isUploading}," Hapus ",8,gt),s.isUploading?(d(),c("button",ht,l[4]||(l[4]=[se(" Menyimpan"),a("span",{class:"loading-dots ml-1"},[a("span",null,"."),a("span",null,"."),a("span",null,".")],-1)]))):(d(),c("button",{key:0,onClick:N,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," Simpan "+L(x.value.length),1))]),s.allowMultiple&&x.value.length<s.maxFiles?(d(),c("div",vt,[a("button",{onClick:u,class:"inline-block px-4 py-2 rounded-lg text-sm font-medium bg-indigo-700 text-white hover:bg-indigo-800 transition-colors cursor-pointer",disabled:s.isUploading}," + Tambah Foto ",8,pt)])):$("",!0)])])])):$("",!0)}},wt=K(ft,[["__scopeId","data-v-c92a6be5"]]),bt=["multiple","disabled"],xt=["disabled"],yt={key:1,class:"block w-full border-2 border-dashed rounded-lg transition-colors duration-200 border-indigo-300 bg-indigo-50 h-auto p-2","aria-label":"Image gallery"},kt={class:"grid grid-cols-3 gap-2"},_t=["onClick"],It=["src"],$t={key:0,class:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center text-white text-xs font-bold"},St={key:0},Ct={key:1,class:"ml-1"},Mt=["onClick","disabled"],Vt=["disabled"],Rt={key:2,class:"mt-1 text-xs text-red-600"},Ut={__name:"InputImage",props:{modelValue:{type:Array,default:()=>[]},error:String,inspectionId:{type:[String,Number],required:!1},pointId:{type:[String,Number],required:!0},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0})}},emits:["update:modelValue","save","removeImage","uploaded"],setup(s,{emit:w}){const n=s,g=w,v=V(null),x=V(null),i=V(!1),p=V(!1),h=V(!1),y=V([]),k=V(0),o=V(!1),R=Y(()=>Number(n.settings.max_files)>1),B=Y(()=>{const r=n.settings.camera_aspect_ratio.split(":");if(r.length===2){const f=parseFloat(r[0]),t=parseFloat(r[1]);if(!isNaN(f)&&!isNaN(t)&&t!==0)return f/t}return 4/3}),I=Y(()=>{const r=[],f=new Set;for(const t of y.value)t.id&&f.add(t.id),r.push(t);for(const t of n.modelValue)f.has(t.id)||r.push({...t,rotation:t.rotation||0,isNew:!1,preview:t.preview||(t.image_path?`/${t.image_path}`:null)});return r}),E=r=>r.preview||(r.image_path?`/${r.image_path}`:""),F=r=>!r.width||!r.height||r.width===0||r.height===0?{paddingBottom:"100%",position:"relative"}:{paddingBottom:`${r.height/r.width*100}%`,position:"relative"},N=()=>{h.value&&(h.value=!1),i.value=!0},m=()=>{i.value=!1,v.value.click()},u=()=>{i.value=!1,p.value=!0},e=()=>{i.value=!1,I.value.length>0&&(h.value=!0)},l=()=>{p.value=!1,I.value.length>0&&(h.value=!0)},C=()=>{h.value=!1,y.value.forEach(r=>{r.preview&&r.preview.startsWith("blob:")&&URL.revokeObjectURL(r.preview)}),y.value=[]},S=r=>new Promise(f=>{const t=new FileReader;t.onload=_=>{const M=new Image;M.onload=()=>{f({file:r,preview:URL.createObjectURL(r),rotation:0,width:M.naturalWidth,height:M.naturalHeight,isNew:!0})},M.onerror=()=>{console.error("Failed to load image for dimensions:",r.name),f({file:r,preview:URL.createObjectURL(r),rotation:0,width:0,height:0,isNew:!0})},M.src=_.target.result},t.readAsDataURL(r)}),U=r=>{const f=Array.from(r.target.files);if(!f.length){i.value=!1,I.value.length>0&&(h.value=!0);return}Promise.all(f.map(S)).then(t=>{const _=I.value.length,M=n.settings.max_files-_,T=R.value?t.slice(0,M):t.slice(0,1);R.value?y.value.push(...T):(y.value.forEach(j=>j.preview&&j.preview.startsWith("blob:")&&URL.revokeObjectURL(j.preview)),y.value=T),i.value=!1,T.length>0?(k.value=I.value.length-T.length,k.value<0&&(k.value=0),h.value=!0):I.value.length>0&&(h.value=!0),r.target.value=""}).catch(t=>{console.error("Error processing selected images:",t),alert("Failed to process selected images. Please try again."),i.value=!1,I.value.length>0&&(h.value=!0)})},q=r=>{const f=I.value.length;if(!R.value||f<n.settings.max_files){const t=new Image;t.onload=()=>{const _={file:r,preview:URL.createObjectURL(r),rotation:0,width:t.naturalWidth,height:t.naturalHeight,isNew:!0};R.value?y.value.push(_):(y.value.forEach(M=>M.preview&&M.preview.startsWith("blob:")&&URL.revokeObjectURL(M.preview)),y.value=[_]),p.value=!1,i.value=!1,k.value=I.value.length-1,h.value=!0},t.onerror=()=>{console.error("Failed to load captured image for dimensions.");const _={file:r,preview:URL.createObjectURL(r),rotation:0,width:0,height:0,isNew:!0};R.value?y.value.push(_):(y.value.forEach(M=>M.preview&&M.preview.startsWith("blob:")&&URL.revokeObjectURL(M.preview)),y.value=[_]),k.value=I.value.length-1,p.value=!1,i.value=!1,h.value=!0},t.src=URL.createObjectURL(r)}else alert(`Maksimum ${n.settings.max_files} file diizinkan.`),p.value=!1,i.value=!1,I.value.length>0&&(h.value=!0)},A=(r=0)=>{k.value=r,h.value=!0},z=r=>new Promise(f=>{if(r.rotation===0||!x.value){if(!r.isNew&&!r.file){f({file:null,width:r.width,height:r.height,isOriginal:!0});return}f({file:r.file,width:r.width,height:r.height});return}const t=new Image;t.onload=()=>{const _=x.value,M=_.getContext("2d"),T=t.width,j=t.height;let P,O;r.rotation===90||r.rotation===270?(P=j,O=T):(P=T,O=j),_.width=P,_.height=O,M.clearRect(0,0,_.width,_.height),M.translate(_.width/2,_.height/2),M.rotate(r.rotation*Math.PI/180),M.drawImage(t,-T/2,-j/2,T,j),M.setTransform(1,0,0,1,0,0),_.toBlob(W=>{const oe=new File([W],r.file?r.file.name:`rotated_image_${Date.now()}.png`,{type:r.file?r.file.type:"image/png"});f({file:oe,width:P,height:O})},r.file?r.file.type:"image/png")},t.onerror=()=>{console.error("Failed to load image for rotation processing:",r.preview),f({file:r.file,width:r.width,height:r.height})},t.src=r.preview}),H=async r=>{o.value=!0;const f=[];if(!n.pointId){alert("Error: Point ID is missing. Cannot upload image. (Check parent component)"),o.value=!1;return}console.log("Uploading for Inspection ID:",n.inspectionId,"Point ID:",n.pointId);try{for(const t of r){if(!t.isNew&&t.rotation===0&&t.id&&t.image_path){f.push({id:t.id,image_path:t.image_path,width:t.width,height:t.height,rotation:0,preview:t.preview});continue}const{file:_,width:M,height:T,isOriginal:j}=await z(t);if(j&&!t.isNew){f.push({id:t.id,image_path:t.image_path,width:t.width,height:t.height,rotation:0,preview:t.preview});continue}const P=new FormData;P.append("inspection_id",n.inspectionId),P.append("point_id",n.pointId),P.append("image",_),P.append("width",M),P.append("height",T),P.append("rotation",0),t.id&&!t.isNew&&P.append("image_id",t.id);const W=(await re.post(route("inspections.upload-image"),P,{headers:{"Content-Type":"multipart/form-data"}})).data.image,oe=W.image_path,de=W.public_url;f.push({id:W.id,image_path:oe,width:W.width,height:W.height,rotation:W.rotation,preview:de}),t.preview&&t.preview.startsWith("blob:")&&URL.revokeObjectURL(t.preview)}g("update:modelValue",f),g("save",n.pointId),g("uploaded",{pointId:n.pointId,images:f}),C()}catch(t){if(console.error("Error during image processing/upload:",t),t.response&&t.response.data&&t.response.data.message)alert(`Failed to save images: ${t.response.data.message}`);else if(t.response&&t.response.data&&t.response.data.errors){const _=Object.values(t.response.data.errors).flat().join(`
`);alert(`Failed to save images:
${_}`)}else alert(`Failed to save images: ${t.message}`)}finally{o.value=!1}},b=r=>{const f=I.value[r];if(f){if(f.id&&!f.isNew)Z(f);else{const t=y.value.findIndex(_=>_.preview===f.preview&&_.isNew||_.id&&_.id===f.id);if(t!==-1){const _=y.value.splice(t,1)[0];_.preview&&_.preview.startsWith("blob:")&&URL.revokeObjectURL(_.preview)}}k.value>=I.value.length&&(k.value=Math.max(0,I.value.length-1)),I.value.length===0&&C()}},Z=async r=>{if(r.id||r.image_path)try{await re.delete(route("inspections.delete-image"),{data:{image_id:r.id,image_path:r.image_path}})}catch(t){console.error("Error deleting image from server:",t),t.response&&t.response.data&&t.response.data.message?alert(`Failed to delete image from server: ${t.response.data.message}`):alert(`Failed to delete image from server: ${t.message}`);return}r.preview&&r.preview.startsWith("blob:")&&URL.revokeObjectURL(r.preview);const f=n.modelValue.filter(t=>t.id!==r.id);g("update:modelValue",f),y.value=y.value.filter(t=>t.isNew&&r.isNew?t.preview!==r.preview:t.id!==r.id),g("removeImage",{image:r}),h.value&&I.value.length===0?C():h.value&&k.value>=I.value.length&&(k.value=Math.max(0,I.value.length-1))};return(r,f)=>(d(),c("div",null,[a("input",{ref_key:"galleryInput",ref:v,type:"file",accept:"image/*",class:"hidden",onChange:U,multiple:R.value,disabled:o.value},null,40,bt),a("canvas",{ref_key:"processingCanvas",ref:x,class:"hidden"},null,512),I.value.length===0?(d(),c("label",{key:0,onClick:N,class:X(["block w-full border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-200 h-28",{"border-gray-300 hover:border-indigo-400 bg-gray-50":!0}]),disabled:o.value},f[0]||(f[0]=[ce('<div class="h-full flex flex-col items-center justify-center p-4 text-center" data-v-8e61fda7><svg class="w-8 h-8 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-8e61fda7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-8e61fda7></path></svg><p class="text-sm text-gray-600 font-medium" data-v-8e61fda7>Upload Image</p><p class="text-xs text-gray-500" data-v-8e61fda7>Click to open options</p></div>',1)]),8,xt)):(d(),c("div",yt,[a("div",kt,[(d(!0),c(J,null,Q(I.value,(t,_)=>(d(),c("div",{key:t.id||t.preview,class:"relative w-full overflow-hidden rounded-md border border-gray-200 cursor-pointer",style:le(F(t)),onClick:M=>A(_)},[a("img",{src:E(t),class:"absolute top-0 left-0 w-full h-full object-cover"},null,8,It),t.isNew||t.rotation!==0?(d(),c("div",$t,[t.isNew?(d(),c("span",St,"BARU")):$("",!0),t.rotation!==0?(d(),c("span",Ct,"ROTASI")):$("",!0)])):$("",!0),a("button",{onClick:me(M=>Z(t),["stop"]),type:"button",class:"absolute top-1 right-1 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs shadow-sm hover:bg-red-600 transition-colors z-10","aria-label":"Remove image",disabled:o.value}," × ",8,Mt)],12,_t))),128)),R.value&&I.value.length<s.settings.max_files?(d(),c("div",{key:0,class:"flex flex-col items-center justify-center p-2 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-colors",onClick:N,disabled:o.value},f[1]||(f[1]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),a("p",{class:"mt-1 text-xs text-gray-600"},"Tambah",-1)]),8,Vt)):$("",!0)])])),s.error?(d(),c("p",Rt,L(s.error),1)):$("",!0),te(Ge,{show:i.value,onClose:e,onOpenWebcam:u,onTriggerGallery:m},null,8,["show"]),te(ot,{show:p.value,"aspect-ratio":B.value,settings:s.settings,onClose:l,onPhotoCaptured:q},null,8,["show","aspect-ratio","settings"]),te(wt,{show:h.value,images:I.value,"initial-index":k.value,"allow-multiple":R.value,"max-files":s.settings.max_files,"is-uploading":o.value,onClose:C,onSaveImages:H,onRemovePreviewImage:b,onTriggerAddMorePhotos:N},null,8,["show","images","initial-index","allow-multiple","max-files","is-uploading"])]))}},Lt=K(Ut,[["__scopeId","data-v-8e61fda7"]]),Nt={class:"bg-white shadow-lg rounded-xl overflow-hidden border border-gray-100"},Pt={class:"bg-indigo-50 px-6 py-2 border-b border-indigo-100"},qt={class:"text-xl font-semibold text-indigo-700"},Bt={class:"p-4 space-y-4"},Tt={class:"flex items-start justify-between"},Et={class:"block text-sm font-medium text-gray-700"},Ft={key:0,class:"text-red-500"},jt={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},At={__name:"CategorySection",props:{category:Object,form:Object,inspectionId:[String,Number]},emits:["saveResult","updateResult","removeImage"],setup(s,{emit:w}){const n=s,g=w,v=[{value:"good",label:"Good"},{value:"bad",label:"Bad"},{value:"na",label:"N/A"}],x=y=>{var o;const k=n.form.results[y.id];if(!k)return!1;switch(y.input_type){case"text":case"number":case"date":return!!k.note;case"select":case"radio":return!!k.status;case"image":return((o=k.images)==null?void 0:o.length)>0;default:return!1}},i=(y,k)=>{g("updateResult",{pointId:y,value:k})},p=y=>{g("saveResult",y)},h=(y,k)=>{g("removeImage",{pointId:y,imageIndex:k})};return(y,k)=>(d(),c("div",Nt,[a("div",Pt,[a("h2",qt,L(s.category.name),1)]),a("div",Bt,[(d(!0),c(J,null,Q(s.category.points,o=>{var R,B,I,E,F,N,m,u,e,l,C,S,U,q,A,z,H;return d(),c("div",{key:o.id,class:"space-y-2 pb-4 border-b border-gray-100 last:border-0 last:pb-0"},[a("div",Tt,[a("label",Et,[se(L(o.name)+" ",1),(R=o.settings)!=null&&R.is_required?(d(),c("span",Ft,"*")):$("",!0)]),x(o)?(d(),c("span",jt," ✓ ")):$("",!0)]),o.input_type==="text"?(d(),G(ke,{key:0,modelValue:s.form.results[o.id].note,"onUpdate:modelValue":[b=>s.form.results[o.id].note=b,b=>i(o.id,b)],required:(B=o.settings)==null?void 0:B.is_required,"min-length":(I=o.settings)==null?void 0:I.min_length,"max-length":(E=o.settings)==null?void 0:E.max_length,pattern:(F=o.settings)==null?void 0:F.pattern,placeholder:((N=o.settings)==null?void 0:N.placeholder)||"Enter text",error:s.form.errors[`results.${o.id}.note`],onSave:b=>p(o.id)},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","pattern","placeholder","error","onSave"])):$("",!0),o.input_type==="number"?(d(),G(Se,{key:1,modelValue:s.form.results[o.id].note,"onUpdate:modelValue":[b=>s.form.results[o.id].note=b,b=>i(o.id,b)],required:(m=o.settings)==null?void 0:m.is_required,min:(u=o.settings)==null?void 0:u.min,max:(e=o.settings)==null?void 0:e.max,step:((l=o.settings)==null?void 0:l.step)||1,placeholder:((C=o.settings)==null?void 0:C.placeholder)||"Enter number",error:s.form.errors[`results.${o.id}.note`],onSave:b=>p(o.id)},null,8,["modelValue","onUpdate:modelValue","required","min","max","step","placeholder","error","onSave"])):$("",!0),o.input_type==="date"?(d(),G(Re,{key:2,modelValue:s.form.results[o.id].note,"onUpdate:modelValue":[b=>s.form.results[o.id].note=b,b=>i(o.id,b)],required:(S=o.settings)==null?void 0:S.is_required,"min-date":(U=o.settings)==null?void 0:U.min_date,"max-date":(q=o.settings)==null?void 0:q.max_date,error:s.form.errors[`results.${o.id}.note`],onSave:b=>p(o.id)},null,8,["modelValue","onUpdate:modelValue","required","min-date","max-date","error","onSave"])):$("",!0),o.input_type==="select"?(d(),G(qe,{key:3,modelValue:s.form.results[o.id].status,"onUpdate:modelValue":[b=>s.form.results[o.id].status=b,b=>i(o.id,b)],required:(A=o.settings)==null?void 0:A.is_required,error:s.form.errors[`results.${o.id}.status`],onSave:b=>p(o.id)},null,8,["modelValue","onUpdate:modelValue","required","error","onSave"])):$("",!0),o.input_type==="radio"?(d(),G(Ae,{key:4,modelValue:s.form.results[o.id].status,"onUpdate:modelValue":[b=>s.form.results[o.id].status=b,b=>i(o.id,b)],required:(z=o.settings)==null?void 0:z.is_required,options:((H=o.settings)==null?void 0:H.radios)||v,error:s.form.errors[`results.${o.id}.status`],onSave:b=>p(o.id)},null,8,["modelValue","onUpdate:modelValue","required","options","error","onSave"])):$("",!0),o.input_type==="image"?(d(),G(Lt,{key:5,modelValue:s.form.results[o.id].images,"onUpdate:modelValue":[b=>s.form.results[o.id].images=b,b=>i(o.id,b)],error:s.form.errors[`results.${o.id}.images`],"inspection-id":s.inspectionId,"point-id":o.id,settings:o.settings,onSave:b=>p(o.id),onRemoveImage:b=>h(o.id,b)},null,8,["modelValue","onUpdate:modelValue","error","inspection-id","point-id","settings","onSave","onRemoveImage"])):$("",!0)])}),128))])]))}},Dt=K(At,[["__scopeId","data-v-004ada53"]]),Wt={class:"container mx-auto px-4 py-2"},zt={class:"sticky top-0 z-10 bg-white shadow-sm mb-2"},Ht={class:"flex overflow-x-auto scrollbar-hide py-3 px-4 space-x-2"},Gt=["onClick","data-category-id"],Xt={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Kt={class:"relative overflow-hidden"},Ot={key:"summary-section",class:"bg-white rounded-xl shadow-md p-6"},Yt={class:"mb-4"},Jt={class:"mt-6"},Qt={class:"list-disc pl-5"},Zt={key:0},ea={key:1},ta={class:"flex justify-end gap-4 mt-8"},aa=["disabled"],sa={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oa={__name:"InspectionForm",props:{inspection:Object,categories:Array,existingResults:Array,existingImages:Object},setup(s){var N;const w=s,n=V(((N=w.categories[0])==null?void 0:N.id)||"summary"),g=V(0);V(null);const v=Y(()=>n.value!=="summary"?w.categories.find(m=>m.id===n.value):null),i=ge((()=>{const m={};return w.categories.forEach(u=>{(u.points||[]).forEach(e=>{var C,S;const l=Array.isArray(w.existingResults)?w.existingResults.find(U=>U.point_id===e.id):null;m[e.id]={status:(l==null?void 0:l.status)||"",note:(l==null?void 0:l.note)||"",images:((S=(C=w.existingImages)==null?void 0:C[e.id])==null?void 0:S.map(U=>({image_path:U.image_path,preview:null})))||[]}})}),{inspection_id:w.inspection.id,results:m,overall_note:w.inspection.overall_note||""}})()),p=ie.debounce(()=>{ee.post(route("inspections.save-overall-note"),{inspection_id:w.inspection.id,overall_note:i.overall_note},{preserveScroll:!0,preserveState:!0,only:["inspection"],onSuccess:()=>{},onError:m=>{console.error("Error menyimpan catatan keseluruhan:",m)}})},800),h=m=>m.points.every(u=>{var l;const e=i.results[u.id];if(!e)return!1;switch(u.input_type){case"text":case"number":case"date":return!!e.note;case"select":case"radio":return!!e.status;case"image":return((l=e.images)==null?void 0:l.length)>0;default:return!!e.status||!!e.note}}),y=m=>{if(m==="summary")g.value=w.categories.length;else{const u=w.categories.findIndex(e=>e.id===m);u>=0&&(g.value=u)}n.value=m},k=m=>{let u=g.value+m;const e=w.categories.length;u>=0&&u<=e&&(g.value=u,u===e?n.value="summary":n.value=w.categories[u].id)},o=()=>{let m=0,u=0;const e=U=>{m=U.changedTouches[0].screenX},l=U=>{u=U.changedTouches[0].screenX,C()},C=()=>{u<m-50?k(1):u>m+50&&k(-1)},S=document.querySelector(".relative.overflow-hidden");return S&&(S.addEventListener("touchstart",e,!1),S.addEventListener("touchend",l,!1)),()=>{S&&(S.removeEventListener("touchstart",e),S.removeEventListener("touchend",l))}},R=ie.debounce(async m=>{try{await ee.post(route("inspections.save-result"),{inspection_id:w.inspection.id,point_id:m,status:i.results[m].status,note:i.results[m].note},{preserveScroll:!0,preserveState:!0,only:["existingResults"],onSuccess:()=>{}})}catch(u){console.error("Error menyimpan hasil:",u)}},500),B=({pointId:m,type:u,value:e})=>{i.results[m].hasOwnProperty(u)&&(i.results[m][u]=e),R(m)},I=async(m,u)=>{const e=m.target.files[0];if(!e)return;const l=URL.createObjectURL(e);try{const C=new FormData;C.append("inspection_id",w.inspection.id),C.append("point_id",u),C.append("image",e),await ee.post(route("inspections.upload-image"),C,{preserveScroll:!0,onSuccess:S=>{var q;const U=((q=S.props.flash)==null?void 0:q.imagePath)||S.props.imagePath;U?i.results[u].images.push({image_path:U,preview:l}):console.error("Path gambar tidak dikembalikan dari unggahan, tidak dapat memperbarui UI.")},onError:S=>{console.error("Error mengunggah gambar:",S),alert("Gagal mengunggah gambar. Silakan coba lagi.")}})}catch(C){console.error("Error mengunggah gambar:",C),alert("Terjadi kesalahan tak terduga saat mengunggah gambar.")}finally{m.target.value=""}},E=async(m,u)=>{const e=i.results[m].images[u];if(e)try{await ee.delete(route("inspections.delete-image"),{data:{image_path:e.image_path,point_id:m,inspection_id:w.inspection.id},preserveScroll:!0,onSuccess:()=>{i.results[m].images.splice(u,1),e.preview&&URL.revokeObjectURL(e.preview)},onError:l=>{console.error("Error menghapus gambar:",l),alert("Gagal menghapus gambar. Silakan coba lagi.")}})}catch(l){console.error("Error menghapus gambar:",l),alert("Terjadi kesalahan tak terduga saat menghapus gambar.")}},F=()=>{i.post(route("inspections.final-submit"),{preserveScroll:!0,onSuccess:()=>{ne().props.flash.success="Inspeksi berhasil dikirim!"},onError:m=>{console.error("Kesalahan pengiriman:",m),ne().props.flash.error="Ada kesalahan dalam pengiriman Anda. Harap periksa semua bidang."}})};return he(()=>{o()}),ae(n,m=>{const u=document.querySelector(`.flex-shrink-0[data-category-id="${m}"]`);u&&u.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}),(m,u)=>(d(),c("div",Wt,[a("div",zt,[a("div",Ht,[(d(!0),c(J,null,Q(s.categories,e=>(d(),c("button",{key:e.id,onClick:l=>y(e.id),class:X(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200",{"bg-indigo-600 text-white":n.value===e.id,"bg-gray-100 text-gray-700 hover:bg-gray-200":n.value!==e.id}]),"data-category-id":e.id},[se(L(e.name)+" ",1),h(e)?(d(),c("span",Xt," ✓ ")):$("",!0)],10,Gt))),128)),a("button",{onClick:u[0]||(u[0]=e=>y("summary")),class:X(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200",{"bg-indigo-600 text-white":n.value==="summary","bg-gray-100 text-gray-700 hover:bg-gray-200":n.value!=="summary"}]),"data-category-id":"summary"}," Kesimpulan ",2)])]),a("div",Kt,[te(we,{name:"category-slide",mode:"out-in"},{default:ve(()=>[v.value&&n.value!=="summary"?(d(),G(Dt,{key:v.value.id,category:v.value,form:D(i),onSaveResult:D(R),onUpdateResult:B,onRemoveImage:E,onHandleImageUpload:I},null,8,["category","form","onSaveResult"])):n.value==="summary"?(d(),c("div",Ot,[u[6]||(u[6]=a("h3",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Kesimpulan Inspeksi",-1)),a("div",Yt,[u[3]||(u[3]=a("label",{for:"overall_note",class:"block text-sm font-medium text-gray-700 mb-1"},"Catatan Keseluruhan Inspeksi:",-1)),pe(a("textarea",{id:"overall_note","onUpdate:modelValue":u[1]||(u[1]=e=>D(i).overall_note=e),onInput:u[2]||(u[2]=(...e)=>D(p)&&D(p)(...e)),rows:"5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Tambahkan catatan penting atau ringkasan inspeksi di sini..."},null,544),[[fe,D(i).overall_note]])]),a("div",Jt,[u[4]||(u[4]=a("h4",{class:"text-lg font-semibold text-gray-700 mb-3"},"Status Kategori:",-1)),a("ul",Qt,[(d(!0),c(J,null,Q(s.categories,e=>(d(),c("li",{key:e.id,class:X({"text-green-600":h(e),"text-red-600":!h(e)})},[se(L(e.name)+" ",1),h(e)?(d(),c("span",Zt,"(Selesai ✓)")):(d(),c("span",ea,"(Belum Selesai ✗)"))],2))),128))])]),a("div",ta,[a("button",{type:"button",onClick:F,disabled:D(i).processing,class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[D(i).processing?(d(),c("svg",sa,u[5]||(u[5]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):$("",!0),a("span",null,L(D(i).processing?"Mengirim...":"Final Kirim Inspeksi"),1)],8,aa)])])):$("",!0)]),_:1})])]))}},la=K(oa,[["__scopeId","data-v-22fd310e"]]);export{la as default};
