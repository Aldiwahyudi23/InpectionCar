import{x as j,q as B,e as r,o as i,a as s,l as u,s as p,u as n,y as C,F as g,h,j as G,W as U,t as b,f,g as N,z as y,p as A,v as E}from"./app-DoD9EldT.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"max-w-4xl mx-auto p-6 bg-gray-50 min-h-screen"},I={class:"bg-white p-6 rounded-lg shadow-md"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O=["value"],R={class:"text-lg font-semibold mb-4 text-blue-600 border-b pb-2"},z={class:"block text-sm font-medium text-gray-700 mb-1"},Y={key:0,class:"text-red-500"},q=["onUpdate:modelValue","placeholder"],H=["onUpdate:modelValue"],W=["onUpdate:modelValue","onInput","placeholder"],J=["onUpdate:modelValue"],Q={key:4,class:"mt-1"},X={key:0},Z={class:"flex space-x-4 mb-2"},ee={class:"inline-flex items-center"},te=["onUpdate:modelValue","onChange"],oe={class:"inline-flex items-center"},se=["onUpdate:modelValue","onChange"],ae=["onClick"],ne=["id","onChange"],le={key:2,class:"mt-4"},de=["src"],re=["onClick"],ie={key:5,class:"mt-2"},ue={class:"inline-flex items-center"},ce=["onUpdate:modelValue","id"],pe={class:"ml-2 text-sm text-gray-700"},me={key:6,class:"mt-2 space-y-2"},be={class:"flex space-x-4"},fe={class:"inline-flex items-center"},ge=["onUpdate:modelValue","onChange"],he={class:"inline-flex items-center"},ye=["onUpdate:modelValue","onChange"],_e=["onUpdate:modelValue"],xe=["onUpdate:modelValue","placeholder"],ke=["onUpdate:modelValue"],ve=["value"],we={class:"bg-white p-6 rounded-lg shadow-md"},Ce={__name:"Check copy",props:{categories:Array,cars:Array,draftData:Object},setup(_){const m=_,e=j({car_id:null,inspection_date:new Date().toISOString().slice(0,16),points:{},notes:null});B(()=>{m.draftData&&(e.car_id=m.draftData.car_id,e.inspection_date=m.draftData.inspection_date,e.notes=m.draftData.notes,e.points=m.draftData.points||{}),m.categories&&m.categories.forEach(l=>{l.points.forEach(t=>{e.points[t.id]||(e.points[t.id]={}),t.input_type==="checkbox-T/F-Gambar"&&e.points[t.id].option===void 0&&(e.points[t.id].option=""),t.input_type==="checkbox-Y/N-textarea"&&e.points[t.id].option===void 0&&(e.points[t.id].option="")})})});const V=l=>{let t=e.points[l].replace(/\D/g,"");t=t.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),e.points[l]=t?"Rp "+t:""},D=(l,t)=>{const d=t.target.files[0];if(d){if(d.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}e.points[l]={...e.points[l],file:d,preview:URL.createObjectURL(d)},c()}},S=l=>{e.points[l]={...e.points[l],file:null,preview:null},c()},$=l=>{document.getElementById(`file-input-${l}`).click()},x=(l,t)=>{e.points[l]||(e.points[l]={}),e.points[l].option=t.toString(),c()},k=l=>{e.points[l]||(e.points[l]={}),e.points[l].option=value.toString(),c()},T=l=>{var t;return l.input_type==="checkbox-T/F-Gambar"?((t=e.points[l.id])==null?void 0:t.option)==="true":!0},c=()=>{U.post(route("inspections.save-draft"),{...e.data(),_method:"put"},{preserveScroll:!0,preserveState:!0})},F=()=>{const l=new FormData;l.append("car_id",e.car_id),l.append("inspection_date",e.inspection_date),l.append("notes",e.notes),Object.entries(e.points).forEach(([t,d])=>{d&&typeof d=="object"?(d.file&&l.append(`points[${t}][file]`,d.file),d.option&&l.append(`points[${t}][option]`,d.option),d.notes&&l.append(`points[${t}][notes]`,d.notes)):l.append(`points[${t}]`,d)}),e.post(route("inspections.store"),{forceFormData:!0,onSuccess:()=>{U.delete(route("inspections.clear-draft"))}})};return(l,t)=>(i(),r("div",P,[t[15]||(t[15]=s("h1",{class:"text-2xl font-bold mb-6 text-gray-800"},"Form Inspeksi Kendaraan",-1)),s("form",{onSubmit:G(F,["prevent"]),class:"space-y-6"},[s("div",I,[t[6]||(t[6]=s("h2",{class:"text-lg font-semibold mb-4 text-blue-600 border-b pb-2"},"Detail Inspeksi",-1)),s("div",K,[s("div",null,[t[3]||(t[3]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Inspeksi",-1)),u(s("input",{type:"datetime-local","onUpdate:modelValue":t[0]||(t[0]=d=>n(e).inspection_date=d),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border"},null,512),[[p,n(e).inspection_date]])]),s("div",null,[t[5]||(t[5]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Pilih Kendaraan",-1)),u(s("select",{"onUpdate:modelValue":t[1]||(t[1]=d=>n(e).car_id=d),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border"},[t[4]||(t[4]=s("option",{value:null},"-- Pilih Kendaraan --",-1)),(i(!0),r(g,null,h(_.cars,d=>(i(),r("option",{key:d.id,value:d.id},b(d.brand.name)+" "+b(d.model.name)+" ("+b(d.license_plate)+") ",9,O))),128))],512),[[C,n(e).car_id]])])])]),(i(!0),r(g,null,h(_.categories,d=>(i(),r("div",{key:d.id,class:"bg-white p-6 rounded-lg shadow-md"},[s("h2",R,b(d.name),1),(i(!0),r(g,null,h(d.points,o=>{var v,w;return i(),r("div",{key:o.id,class:"mb-6"},[s("label",z,[N(b(o.name)+" ",1),o.is_required?(i(),r("span",Y,"*")):f("",!0)]),o.input_type==="text"?u((i(),r("input",{key:0,"onUpdate:modelValue":a=>n(e).points[o.id]=a,placeholder:o.placeholder,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border",onChange:c},null,40,q)),[[p,n(e).points[o.id]]]):o.input_type==="number"?u((i(),r("input",{key:1,type:"number","onUpdate:modelValue":a=>n(e).points[o.id]=a,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border",onChange:c},null,40,H)),[[p,n(e).points[o.id],void 0,{number:!0}]]):o.input_type==="account"?u((i(),r("input",{key:2,"onUpdate:modelValue":a=>n(e).points[o.id]=a,onInput:a=>V(o.id),placeholder:o.placeholder,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border text-right",onChange:c},null,40,W)),[[p,n(e).points[o.id]]]):o.input_type==="date"?u((i(),r("input",{key:3,type:"date","onUpdate:modelValue":a=>n(e).points[o.id]=a,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border",onChange:c},null,40,J)),[[p,n(e).points[o.id]]]):o.input_type==="image"||o.input_type==="checkbox-T/F-Gambar"?(i(),r("div",Q,[o.input_type==="checkbox-T/F-Gambar"?(i(),r("div",X,[s("div",Z,[s("label",ee,[u(s("input",{type:"radio","onUpdate:modelValue":a=>n(e).points[o.id].option=a,value:"true",onChange:a=>x(o.id,!0),class:"text-blue-600 focus:ring-blue-500"},null,40,te),[[y,n(e).points[o.id].option]]),t[7]||(t[7]=s("span",{class:"ml-2"},"Ada",-1))]),s("label",oe,[u(s("input",{type:"radio","onUpdate:modelValue":a=>n(e).points[o.id].option=a,value:"false",onChange:a=>x(o.id,!1),class:"text-blue-600 focus:ring-blue-500"},null,40,se),[[y,n(e).points[o.id].option]]),t[8]||(t[8]=s("span",{class:"ml-2"},"Tidak Ada",-1))])])])):f("",!0),T(o)?(i(),r("div",{key:1,onClick:a=>$(o.id),class:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500 transition-colors"},[t[9]||(t[9]=A('<div class="flex flex-col items-center justify-center py-6" data-v-689a3dbc><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-689a3dbc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-689a3dbc></path></svg><p class="mt-2 text-sm text-gray-600" data-v-689a3dbc>Klik untuk upload gambar</p><p class="text-xs text-gray-500" data-v-689a3dbc>Format: JPG, PNG (Max 2MB)</p></div>',1)),s("input",{type:"file",id:"file-input-"+o.id,onChange:a=>D(o.id,a),accept:"image/*",capture:"camera",class:"hidden"},null,40,ne)],8,ae)):f("",!0),(v=n(e).points[o.id])!=null&&v.preview?(i(),r("div",le,[s("img",{src:n(e).points[o.id].preview,class:"max-h-40 rounded-md shadow-sm border border-gray-200"},null,8,de),s("button",{type:"button",onClick:a=>S(o.id),class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Hapus Gambar ",8,re)])):f("",!0)])):o.input_type==="checkbox"?(i(),r("div",ie,[s("label",ue,[u(s("input",{type:"checkbox","onUpdate:modelValue":a=>n(e).points[o.id]=a,id:"point_"+o.id,class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",onChange:c},null,40,ce),[[E,n(e).points[o.id]]]),s("span",pe,b(o.placeholder||"Centang jika sesuai"),1)])])):o.input_type==="checkbox-Y/N-textarea"?(i(),r("div",me,[s("div",be,[s("label",fe,[u(s("input",{type:"radio","onUpdate:modelValue":a=>n(e).points[o.id].option=a,value:"true",class:"text-blue-600 focus:ring-blue-500",onChange:a=>k(o.id)},null,40,ge),[[y,n(e).points[o.id].option]]),t[10]||(t[10]=s("span",{class:"ml-2"},"Ya",-1))]),s("label",he,[u(s("input",{type:"radio","onUpdate:modelValue":a=>n(e).points[o.id].option=a,value:"false",class:"text-blue-600 focus:ring-blue-500",onChange:a=>k(o.id)},null,40,ye),[[y,n(e).points[o.id].option]]),t[11]||(t[11]=s("span",{class:"ml-2"},"Tidak",-1))])]),((w=n(e).points[o.id])==null?void 0:w.option)==="false"?u((i(),r("textarea",{key:0,"onUpdate:modelValue":a=>n(e).points[o.id].notes=a,placeholder:"Alasan ketidaksesuaian",rows:"2",class:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border",onChange:c},null,40,_e)),[[p,n(e).points[o.id].notes]]):f("",!0)])):o.input_type==="textarea"?u((i(),r("textarea",{key:7,"onUpdate:modelValue":a=>n(e).points[o.id]=a,placeholder:o.placeholder,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border",onChange:c},null,40,xe)),[[p,n(e).points[o.id]]]):o.input_type==="select"?u((i(),r("select",{key:8,"onUpdate:modelValue":a=>n(e).points[o.id]=a,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border",onChange:c},[t[12]||(t[12]=s("option",{value:""},"-- Pilih --",-1)),(i(!0),r(g,null,h(o.placeholder.split(","),(a,M)=>(i(),r("option",{key:M,value:a.trim()},b(a.trim()),9,ve))),128))],40,ke)),[[C,n(e).points[o.id]]]):f("",!0)])}),128))]))),128)),s("div",we,[t[13]||(t[13]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Catatan Tambahan",-1)),u(s("textarea",{"onUpdate:modelValue":t[2]||(t[2]=d=>n(e).notes=d),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border",onChange:c},null,544),[[p,n(e).notes]])]),s("div",{class:"flex justify-between items-center"},[s("button",{type:"button",onClick:c,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"}," Simpan Draft "),t[14]||(t[14]=s("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," Simpan Inspeksi ",-1))])],32)]))}},De=L(Ce,[["__scopeId","data-v-689a3dbc"]]);export{De as default};
