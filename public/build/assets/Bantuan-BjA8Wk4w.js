import{N as $,I as we,g as q,q as Te,W as je,s as Ce,B as D,b as Se,o as d,w as Ie,e as qe,d as a,f as v,i as C,u as V,l as Le,v as Oe,y as Re,F as ne,k as ie,t as M,n as Me,j as oe,p as B}from"./vendor-BTHpbkmK.js";import{A as Be}from"./AppLayout-DN0OSRb8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";var A,se;function xe(){if(se)return A;se=1;function i(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}return A=i,A}var F,ae;function Ee(){if(ae)return F;ae=1;var i=typeof $=="object"&&$&&$.Object===Object&&$;return F=i,F}var W,le;function _e(){if(le)return W;le=1;var i=Ee(),r=typeof self=="object"&&self&&self.Object===Object&&self,o=i||r||Function("return this")();return W=o,W}var H,ue;function Ne(){if(ue)return H;ue=1;var i=_e(),r=function(){return i.Date.now()};return H=r,H}var z,ce;function Pe(){if(ce)return z;ce=1;var i=/\s/;function r(o){for(var l=o.length;l--&&i.test(o.charAt(l)););return l}return z=r,z}var U,de;function $e(){if(de)return U;de=1;var i=Pe(),r=/^\s+/;function o(l){return l&&l.slice(0,i(l)+1).replace(r,"")}return U=o,U}var Q,fe;function ke(){if(fe)return Q;fe=1;var i=_e(),r=i.Symbol;return Q=r,Q}var X,ve;function Ge(){if(ve)return X;ve=1;var i=ke(),r=Object.prototype,o=r.hasOwnProperty,l=r.toString,u=i?i.toStringTag:void 0;function y(g){var p=o.call(g,u),h=g[u];try{g[u]=void 0;var s=!0}catch{}var m=l.call(g);return s&&(p?g[u]=h:delete g[u]),m}return X=y,X}var J,ge;function De(){if(ge)return J;ge=1;var i=Object.prototype,r=i.toString;function o(l){return r.call(l)}return J=o,J}var K,me;function Ve(){if(me)return K;me=1;var i=ke(),r=Ge(),o=De(),l="[object Null]",u="[object Undefined]",y=i?i.toStringTag:void 0;function g(p){return p==null?p===void 0?u:l:y&&y in Object(p)?r(p):o(p)}return K=g,K}var Y,be;function Ae(){if(be)return Y;be=1;function i(r){return r!=null&&typeof r=="object"}return Y=i,Y}var Z,pe;function Fe(){if(pe)return Z;pe=1;var i=Ve(),r=Ae(),o="[object Symbol]";function l(u){return typeof u=="symbol"||r(u)&&i(u)==o}return Z=l,Z}var ee,he;function We(){if(he)return ee;he=1;var i=$e(),r=xe(),o=Fe(),l=NaN,u=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,g=/^0o[0-7]+$/i,p=parseInt;function h(s){if(typeof s=="number")return s;if(o(s))return l;if(r(s)){var m=typeof s.valueOf=="function"?s.valueOf():s;s=r(m)?m+"":m}if(typeof s!="string")return s===0?s:+s;s=i(s);var x=y.test(s);return x||g.test(s)?p(s.slice(2),x?2:8):u.test(s)?l:+s}return ee=h,ee}var te,ye;function He(){if(ye)return te;ye=1;var i=xe(),r=Ne(),o=We(),l="Expected a function",u=Math.max,y=Math.min;function g(p,h,s){var m,x,_,w,b,T,k=0,E=!1,S=!1,O=!0;if(typeof p!="function")throw new TypeError(l);h=o(h)||0,i(s)&&(E=!!s.leading,S="maxWait"in s,_=S?u(o(s.maxWait)||0,h):_,O="trailing"in s?!!s.trailing:O);function L(f){var I=m,R=x;return m=x=void 0,k=f,w=p.apply(R,I),w}function N(f){return k=f,b=setTimeout(e,h),E?L(f):w}function P(f){var I=f-T,R=f-k,re=h-I;return S?y(re,_-R):re}function t(f){var I=f-T,R=f-k;return T===void 0||I>=h||I<0||S&&R>=_}function e(){var f=r();if(t(f))return n(f);b=setTimeout(e,P(f))}function n(f){return b=void 0,O&&m?L(f):(m=x=void 0,w)}function c(){b!==void 0&&clearTimeout(b),k=0,m=T=x=b=void 0}function j(){return b===void 0?w:n(r())}function G(){var f=r(),I=t(f);if(m=arguments,x=this,T=f,I){if(b===void 0)return N(T);if(S)return clearTimeout(b),b=setTimeout(e,h),L(T)}return b===void 0&&(b=setTimeout(e,h)),w}return G.cancel=c,G.flush=j,G}return te=g,te}var ze=He();const Ue=we(ze),Qe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 relative"},Xe={class:"space-y-4 bg-white rounded-xl shadow-md p-4"},Je={class:"relative mb-4"},Ke={key:0,class:"space-y-4"},Ye=["onClick"],Ze={class:"text-lg md:text-xl font-semibold text-indigo-700"},et={key:0,class:"p-2 border-t border-gray-200"},tt={class:"text-gray-700 mb-4"},rt={key:0},nt=["onClick"],it=["innerHTML"],ot={key:2,class:"mt-4"},st=["src","onClick"],at={key:0,class:"mt-2"},lt={class:"space-y-4"},ut={class:"flex justify-between items-start"},ct={class:"font-medium text-gray-800"},dt=["onClick"],ft=["innerHTML"],vt={key:1,class:"text-gray-600 mt-2"},gt=["onClick"],mt={key:2,class:"mt-2"},bt=["src","onClick"],pt={key:1},ht={key:1,class:"text-center py-12"},yt={class:"relative max-w-full max-h-full flex items-center justify-center"},xt=["src"],Tt={__name:"Bantuan",props:{components:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(i){const r=i,o=q(r.filters.search||""),l=q(null),u=q(null),y=q([]),g=q({}),p=q({}),h=(t,e)=>{e&&(g.value[t]=e)},s=(t,e)=>{e&&(p.value[t]=e)},m=q(!1),x=q(""),_=t=>{if(!t)return"";const e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText||""},w=(t,e)=>t?t.length<=e?t:t.substring(0,e)+"...":"",b=t=>t.inspection_point&&t.inspection_point.length>0,T=t=>{if(!o.value||!b(t))return t.inspection_point||[];const e=o.value.toLowerCase();return t.inspection_point.filter(n=>n.name.toLowerCase().includes(e)||_(n.description).toLowerCase().includes(e))},k=Te(()=>{if(!o.value)return r.components;const t=o.value.toLowerCase();return r.components.filter(e=>{const n=e.name.toLowerCase().includes(t)||_(e.description).toLowerCase().includes(t),c=b(e)&&e.inspection_point.some(j=>j.name.toLowerCase().includes(t)||_(j.description).toLowerCase().includes(t));return n||c})}),E=async t=>{if(l.value===t)l.value=null;else{l.value=t,u.value=null,await D();const e=g.value[t];e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},S=async t=>{if(u.value===t)u.value=null;else{u.value=t,await D();const e=p.value[t];e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},O=t=>{y.value.includes(t)||y.value.push(t)},L=t=>{x.value=t,m.value=!0},N=()=>{m.value=!1,x.value=""},P=Ue(()=>{je.get("/bantuan",{search:o.value},{preserveState:!0,replace:!0})},300);return Ce(async()=>{if(o.value&&k.value.length>0){l.value=k.value[0].id,await D();const t=g.value[l.value];t&&t.scrollIntoView({behavior:"smooth",block:"start"})}}),(t,e)=>(d(),Se(Be,{title:"Pusat Bantuan"},{default:Ie(()=>[qe(V(Le),{title:"Pusat Bantuan"}),a("div",Qe,[a("div",Xe,[e[7]||(e[7]=a("div",{class:"flex justify-between items-center mb-4"},[a("h1",{class:"text-xl md:text-3xl font-bold text-gray-900 text-center flex-grow"}," Pusat Bantuan ")],-1)),a("div",Je,[e[2]||(e[2]=a("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[a("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),Oe(a("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.value=n),type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Cari komponen, inspection point, atau deskripsi...",onInput:e[1]||(e[1]=(...n)=>V(P)&&V(P)(...n))},null,544),[[Re,o.value]])]),k.value.length>0?(d(),v("div",Ke,[(d(!0),v(ne,null,ie(k.value,n=>(d(),v("div",{key:n.id,ref_for:!0,ref:c=>h(n.id,c),class:"bg-white rounded-xl shadow-md overflow-hidden component-item"},[a("div",{class:"p-2 flex justify-between items-center cursor-pointer bg-indigo-50 hover:bg-indigo-100 transition-colors",onClick:c=>E(n.id)},[a("h2",Ze,M(n.name),1),(d(),v("svg",{class:Me([{"rotate-180":l.value===n.id},"h-5 w-5 text-indigo-600 transform transition-transform"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[3]||(e[3]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],8,Ye),l.value===n.id?(d(),v("div",et,[a("div",tt,[n.description&&!y.value.includes(n.id)?(d(),v("div",rt,[oe(M(w(_(n.description),300))+" ",1),_(n.description).length>300?(d(),v("button",{key:0,onClick:B(c=>O(n.id),["stop"]),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium ml-1"}," Selengkapnya ",8,nt)):C("",!0)])):C("",!0),y.value.includes(n.id)?(d(),v("div",{key:1,class:"prose max-w-none text-gray-700",innerHTML:n.description},null,8,it)):C("",!0),n.file_path?(d(),v("div",ot,[a("img",{src:`/storage/${n.file_path}`,alt:"Component Image",class:"w-full h-auto rounded-lg shadow-md cursor-pointer",onClick:B(c=>L(`/storage/${n.file_path}`),["stop"])},null,8,st)])):C("",!0)]),b(n)?(d(),v("div",at,[e[4]||(e[4]=a("h3",{class:"text-lg font-medium text-gray-800 mb-2"},"Point:",-1)),a("div",lt,[(d(!0),v(ne,null,ie(T(n),c=>(d(),v("div",{key:c.id,ref_for:!0,ref:j=>s(c.id,j),class:"bg-gray-50 rounded-lg p-4 border border-gray-200 point-item"},[a("div",ut,[a("h4",ct,M(c.name),1),a("button",{onClick:j=>S(c.id),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"},M(u.value===c.id?"Sembunyikan":"Selengkapnya"),9,dt)]),u.value===c.id?(d(),v("div",{key:0,class:"text-gray-600 mt-2 prose max-w-none",innerHTML:c.description},null,8,ft)):(d(),v("div",vt,[oe(M(w(_(c.description),200))+" ",1),_(c.description).length>200?(d(),v("button",{key:0,onClick:B(j=>S(c.id),["stop"]),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium ml-1"}," Selengkapnya ",8,gt)):C("",!0)])),u.value===c.id&&c.file_path?(d(),v("div",mt,[a("img",{src:`/storage/${c.file_path}`,alt:"Inspection Point Image",class:"w-full h-auto rounded-lg shadow-md cursor-pointer",onClick:B(j=>L(`/storage/${c.file_path}`),["stop"])},null,8,bt)])):C("",!0)]))),128))])])):n.inspection_point&&n.inspection_point.length===0?(d(),v("div",pt,e[5]||(e[5]=[a("p",{class:"text-gray-500 italic"},"Tidak ada inspection points untuk komponen ini.",-1)]))):C("",!0)])):C("",!0)]))),128))])):(d(),v("div",ht,e[6]||(e[6]=[a("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),a("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"Tidak ada hasil ditemukan",-1),a("p",{class:"mt-1 text-gray-500"},"Coba dengan kata kunci pencarian yang berbeda.",-1)])))])]),m.value?(d(),v("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-90",onClick:N},[a("div",yt,[a("button",{onClick:B(N,["stop"]),class:"absolute top-4 right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 transition-colors"},e[8]||(e[8]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),a("img",{src:x.value,alt:"Full-screen image",class:"max-w-full max-h-full object-contain"},null,8,xt)])])):C("",!0)]),_:1}))}};export{Tt as default};
