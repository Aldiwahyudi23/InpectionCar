import{e as r,o as n,a as e,d as _,x as z,c as F,w as v,b as d,f as x,u as i,i as O,F as P,h as R,t as a,g as c,S as w,p as H,v as K}from"./app-DT7J50oG.js";import{A as q}from"./AppLayout-Dt7gaPQ7.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as J,C as k}from"./CalendarDaysIcon-xLo8XJwE.js";function U(u,g){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function G(u,g){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Q(u,g){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const W={class:"py-2 md:py-10"},X={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Y={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2"},Z={class:"p-4"},ee={class:"flex items-center mb-1"},te={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},se={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},ae={class:"flex items-center"},oe={class:"text-sm font-medium text-gray-800"},ne={key:0},re={class:"text-gray-600"},ie={key:1},de={class:"flex items-center mt-2"},le={class:"text-sm font-bold text-gray-900"},ce={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},ue={class:"text-sm text-gray-800"},me={class:"p-4 flex space-x-2"},pe=["onClick"],xe=["onClick"],ge={key:1,class:"text-center py-8"},ye={class:"text-center mt-6"},_e={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},ve={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},fe={class:"p-6"},he={class:"flex items-start mb-4"},be={key:0},we={class:"font-medium text-gray-800"},ke={class:"text-sm text-gray-600"},Ce={class:"text-gray-500"},Ie={key:1,class:"text-sm font-medium text-gray-800"},$e={class:"flex items-center mt-2"},Be={class:"text-base font-bold text-gray-900"},Me={class:"text-gray-600 mb-6"},je={key:0,class:"font-semibold text-gray-800"},Le={class:"flex justify-end space-x-3"},De={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},Te={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},Se={class:"p-6"},Ae={class:"flex items-center justify-between mb-4"},Ne={class:"flex items-start mb-4"},Ve={key:0},ze={class:"font-medium text-gray-800"},Fe={class:"text-sm text-gray-600"},Oe={class:"text-gray-500"},Pe={key:1,class:"text-sm font-medium text-gray-800"},Re={class:"flex items-center mt-2"},He={class:"text-base font-bold text-gray-900"},Ke={class:"mb-6"},qe={key:0,class:"text-red-500 text-sm mt-1"},Ee={class:"flex justify-end space-x-3"},Je=["disabled"],Ue={key:0},Ge={key:1},Qe={__name:"Index",props:{tasks:Array,encryptedIds:Object},setup(u){const g=u,f=_(!1),h=_(!1),t=_(null),m=_(""),S=l=>{t.value=l,f.value=!0},A=l=>{t.value=l,h.value=!0},y=()=>{f.value=!1,h.value=!1,m.value=""},p=z({reason:""}),N=()=>{t.value&&(p.reason=m.value,p.post(route("inspections.cancel",{inspection:g.encryptedIds[t.value.id]}),{onSuccess:()=>{y(),m.value=""}}))},b=l=>{switch(l){case"draft":return"Mulai Inspeksi";case"in_progress":return"Lanjutkan Inspeksi";case"pending_review":return"Periksa Laporan";default:return"Detail"}};return(l,s)=>(n(),F(q,null,{default:v(()=>{var C,I,$,B,M,j,L,D,T;return[d(i(O),{title:"Tugas"}),e("div",W,[e("div",X,[s[6]||(s[6]=e("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),u.tasks.length>0?(n(),r("div",Y,[(n(!0),r(P,null,R(u.tasks,o=>(n(),r("div",{key:o.id,class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition"},[e("div",Z,[e("div",ee,[d(i(J),{class:"h-5 w-5 text-blue-500 mr-2"}),s[1]||(s[1]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",te,a(new Date(o.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),e("div",se,[e("div",ae,[d(i(k),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",oe,[o.car?(n(),r("div",ne,[c(a(`${o.car.brand.name} ${o.car.model.name} ${o.car.type.name} ${o.car.cc} ${o.car.transmission} ${o.car.year}`)+" ",1),e("span",re,"("+a(o.car.fuel_type)+")",1)])):(n(),r("div",ie,a(o.car_name),1))])]),e("div",de,[s[2]||(s[2]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),e("span",le,a(o.plate_number),1)])]),o.category?(n(),r("div",ce,[s[3]||(s[3]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"},"Kategori Inspek",-1)),e("p",ue,a(o.category.name),1)])):x("",!0),e("div",me,[e("button",{onClick:V=>A(o),class:"flex-6 px-3 py-2 bg-gray-200 text-gray-700 font-medium rounded-md text-sm hover:bg-gray-300 transition-colors"}," Batal ",8,pe),e("button",{onClick:V=>S(o),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors"},[c(a(b(o.status))+" ",1),d(i(U),{class:"ml-2 h-4 w-4"})],8,xe)])]))),128))])):(n(),r("div",ge,s[4]||(s[4]=[e("p",{class:"text-gray-500"},"Tidak ada tugas inspeksi yang tersedia.",-1)]))),e("div",ye,[d(i(w),{href:l.route("inspections.history"),class:"inline-block px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-600 rounded-md hover:bg-blue-50"},{default:v(()=>s[5]||(s[5]=[c(" Lihat Inspeksi Lainnya ")])),_:1,__:[5]},8,["href"])])])]),d(i(w),{href:l.route("inspections.create.new"),class:"fixed bottom-24 right-6 z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white rounded-full transition-colors duration-200 animate-bounce",title:"Buat Inspeksi Baru"},{default:v(()=>[d(i(G),{class:"h-6 w-6"})]),_:1},8,["href"]),f.value?(n(),r("div",_e,[e("div",ve,[e("div",fe,[s[9]||(s[9]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Konfirmasi",-1)),e("div",he,[d(i(k),{class:"h-8 w-8 text-blue-500 mr-3 mt-1"}),e("div",null,[(C=t.value)!=null&&C.car?(n(),r("div",be,[e("p",we,a(`${t.value.car.brand.name} ${t.value.car.model.name} ${t.value.car.type.name}`),1),e("p",ke,[c(a(t.value.car.cc)+" • "+a(t.value.car.transmission)+" • "+a(t.value.car.year)+" ",1),e("span",Ce,"("+a(t.value.car.fuel_type)+")",1)])])):(n(),r("div",Ie,a((I=t.value)==null?void 0:I.car_name),1)),e("div",$e,[s[7]||(s[7]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",Be,a(($=t.value)==null?void 0:$.plate_number),1)])])]),e("p",Me,[c(" Anda yakin ingin "+a(b((B=t.value)==null?void 0:B.status).toLowerCase())+" inspeksi ini ",1),(M=t.value)!=null&&M.category?(n(),r("span",je," berdasarkan Type Inspek: "+a(t.value.category.name),1)):x("",!0),s[8]||(s[8]=c("? "))]),e("div",Le,[e("button",{onClick:y,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),d(i(w),{href:l.route("inspections.start",{inspection:u.encryptedIds[(j=t.value)==null?void 0:j.id]}),method:"get",class:"px-4 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white border border-transparent rounded-md text-sm font-medium hover:bg-blue-700"},{default:v(()=>{var o;return[c(a(b((o=t.value)==null?void 0:o.status)),1)]}),_:1},8,["href"])])])])])):x("",!0),h.value?(n(),r("div",De,[e("div",Te,[e("div",Se,[e("div",Ae,[s[10]||(s[10]=e("h3",{class:"text-lg font-medium text-gray-900"},"Batalkan Inspeksi",-1)),e("button",{onClick:y,class:"text-gray-400 hover:text-gray-600"},[d(i(Q),{class:"h-6 w-6"})])]),e("div",Ne,[d(i(k),{class:"h-8 w-8 text-red-500 mr-3 mt-1"}),e("div",null,[(L=t.value)!=null&&L.car?(n(),r("div",Ve,[e("p",ze,a(`${t.value.car.brand.name} ${t.value.car.model.name} ${t.value.car.type.name}`),1),e("p",Fe,[c(a(t.value.car.cc)+" • "+a(t.value.car.transmission)+" • "+a(t.value.car.year)+" ",1),e("span",Oe,"("+a(t.value.car.fuel_type)+")",1)])])):(n(),r("div",Pe,a((D=t.value)==null?void 0:D.car_name),1)),e("div",Re,[s[11]||(s[11]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",He,a((T=t.value)==null?void 0:T.plate_number),1)])])]),e("div",Ke,[s[12]||(s[12]=e("label",{for:"cancelReason",class:"block text-sm font-medium text-gray-700 mb-2"}," Alasan Pembatalan * ",-1)),H(e("textarea",{id:"cancelReason","onUpdate:modelValue":s[0]||(s[0]=o=>m.value=o),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan alasan pembatalan inspeksi...",required:""},null,512),[[K,m.value]]),i(p).errors.reason?(n(),r("p",qe,a(i(p).errors.reason),1)):x("",!0)]),e("div",Ee,[e("button",{onClick:y,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Tutup "),e("button",{onClick:N,disabled:!m.value.trim()||i(p).processing,class:"px-4 py-2 bg-red-600 text-white border border-transparent rounded-md text-sm font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"},[i(p).processing?(n(),r("span",Ue,"Memproses...")):(n(),r("span",Ge,"Batalkan Inspeksi"))],8,Je)])])])])):x("",!0)]}),_:1}))}},et=E(Qe,[["__scopeId","data-v-36b530a1"]]);export{et as default};
