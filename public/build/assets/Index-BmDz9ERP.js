import{c as r,o as n,d as e,r as v,x as R,q,j as K,w as _,k as d,b as u,u as i,v as E,F as J,m as U,t as o,S as k,f as c,z as W,A as G}from"./vendor-BBdeZBHu.js";import{A as Q}from"./AppLayout-BqLOyvHo.js";import{r as X,C as I}from"./car-Z5MeJJLM.js";import{r as Y}from"./XMarkIcon-CR1m7MS4.js";import"./app-DJ305Ikz.js";function Z(m,g){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function ee(m,g){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}const te={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},se={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2"},ae={class:"p-4 flex justify-between items-start"},oe={class:"flex items-center mb-1"},ne={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},re={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},ie={class:"flex items-center"},le={class:"text-sm font-medium text-gray-800"},de={key:0},ce={class:"text-gray-600"},ue={key:1},me={class:"flex items-center mt-2"},pe={class:"text-sm font-bold text-gray-900"},xe={class:"mt-3 border-t pt-2"},ge={key:0,class:"flex justify-between items-center mt-1"},ye={class:"text-sm font-semibold text-gray-800"},ve={class:"text-xs text-gray-600"},_e=["href"],be={key:1,class:"text-sm text-gray-500"},fe={key:0,class:"mt-3 border-t pt-2"},he={class:"text-sm text-gray-800"},we={class:"text-xs text-gray-600"},ke={class:"font-semibold"},Ie={class:"text-xs text-gray-600"},Ce={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},je={class:"text-sm text-gray-800"},Me={class:"p-4 flex space-x-2"},$e=["onClick"],Be=["onClick","disabled"],Le={key:1,class:"text-center py-8"},Ae={class:"text-center mt-6"},De={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},Te={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},Se={class:"p-6"},He={class:"flex items-start mb-4"},Re={key:0},Fe={class:"font-medium text-gray-800"},Ne={class:"text-sm text-gray-600"},Ve={class:"text-gray-500"},ze={key:1,class:"text-sm font-medium text-gray-800"},Oe={class:"flex items-center mt-2"},Pe={class:"text-base font-bold text-gray-900"},qe={class:"text-gray-600 mb-6"},Ke={key:0,class:"font-semibold text-gray-800"},Ee={class:"flex justify-end space-x-3"},Je=["disabled"],Ue={key:0},We={key:1},Ge={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},Qe={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},Xe={class:"p-6"},Ye={class:"flex items-center justify-between mb-4"},Ze={class:"flex items-start mb-4"},et={key:0},tt={class:"font-medium text-gray-800"},st={class:"text-sm text-gray-600"},at={class:"text-gray-500"},ot={key:1,class:"text-sm font-medium text-gray-800"},nt={class:"flex items-center mt-2"},rt={class:"text-base font-bold text-gray-900"},it={class:"mb-6"},lt={key:0,class:"text-red-500 text-sm mt-1"},dt={class:"flex justify-end space-x-3"},ct=["disabled"],ut={key:0},mt={key:1},_t={__name:"Index",props:{tasks:Array,encryptedIds:Object,transaction:Object},setup(m){const g=m,b=v(!1),f=v(!1),s=v(null),p=v(""),h=R({}),F=l=>{s.value=l,b.value=!0},N=l=>{s.value=l,f.value=!0},y=()=>{b.value=!1,f.value=!1,p.value=""},x=R({reason:""}),V=()=>{s.value&&(x.reason=p.value,x.post(route("inspections.cancel",{inspection:g.encryptedIds[s.value.id]}),{onSuccess:()=>{y(),p.value=""}}))},z=()=>{s.value&&h.get(route("inspections.start",{inspection:g.encryptedIds[s.value.id]}),{onFinish:()=>{y()}})},C=q(()=>g.tasks.some(l=>l.status==="in_progress"||l.status==="revision")),w=l=>{switch(l){case"draft":return"Mulai Inspeksi";case"in_progress":return"Lanjutkan Inspeksi";case"pending_review":return"Periksa Laporan";case"revision":return"Lanjutkan Revisi";case"pending":return"Ditunda => Lanjutkan Inspeksi";default:return"Detail"}},O=l=>{switch(l){case"draft":return"Memuat Halaman Inspeksi...";case"in_progress":return"Membuka Halaman Inspeksi...";case"pending_review":return"Memuat Halaman Review...";case"revision":return"Memual Halaman Revisi...";case"pending":return"Lanjutkan Inspeksi...";default:return"Detail"}};return(l,t)=>(n(),K(Q,null,{default:_(()=>{var j,M,$,B,L,A,D,T,S,H;return[d(i(E),{title:"Tugas"}),e("div",te,[t[11]||(t[11]=e("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),m.tasks.length>0?(n(),r("div",se,[(n(!0),r(J,null,U(m.tasks,a=>(n(),r("div",{key:a.id,class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition"},[e("div",ae,[e("div",null,[e("div",oe,[d(i(X),{class:"h-5 w-5 text-blue-500 mr-2"}),t[1]||(t[1]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",ne,o(new Date(a.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),d(i(k),{href:l.route("inspection.log",{inspection:m.encryptedIds[a.id]}),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:_(()=>t[2]||(t[2]=[c(" Lihat Log ")])),_:2,__:[2]},1032,["href"])]),e("div",re,[e("div",ie,[d(i(I),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",le,[a.car?(n(),r("div",de,[c(o(`${a.car.brand.name} ${a.car.model.name} ${a.car.type.name} ${a.car.cc} ${a.car.transmission} ${a.car.year}`)+" ",1),e("span",ce,"("+o(a.car.fuel_type)+")",1)])):(n(),r("div",ue,o(a.car_name),1))])]),e("div",me,[t[3]||(t[3]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),e("span",pe,o(a.plate_number),1)]),e("div",xe,[t[5]||(t[5]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"},"Customer",-1)),a.customer?(n(),r("div",ge,[e("div",null,[e("p",ye,o(a.customer.name),1),e("p",ve,o(a.customer.phone),1)]),a.customer.phone?(n(),r("a",{key:0,href:`https://wa.me/62${a.customer.phone.replace(/^0/,"")}`,target:"_blank",class:"text-green-600 hover:text-green-800",title:"Hubungi via WhatsApp"},t[4]||(t[4]=[e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1)]),8,_e)):u("",!0)])):(n(),r("p",be,"Belum ada data customer"))]),a.transaction?(n(),r("div",fe,[t[7]||(t[7]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"},"Transaksi",-1)),e("p",he," Rp "+o(new Intl.NumberFormat("id-ID").format(a.transaction.amount)),1),e("p",we,[t[6]||(t[6]=c(" Status: ")),e("span",ke,o(a.transaction.status),1)]),e("p",Ie," Metode: "+o(a.transaction.payment_method),1)])):u("",!0)]),a.category?(n(),r("div",Ce,[t[8]||(t[8]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"},"Kategori Inspek",-1)),e("p",je,o(a.category.name),1)])):u("",!0),e("div",Me,[e("button",{onClick:P=>N(a),class:"flex-6 px-3 py-2 bg-gray-200 text-gray-700 font-medium rounded-md text-sm hover:bg-gray-300 transition-colors"}," Batal ",8,$e),e("button",{onClick:P=>F(a),disabled:C.value&&a.status!=="in_progress"&&a.status!=="revision",class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[c(o(w(a.status))+" ",1),d(i(Z),{class:"ml-2 h-4 w-4"})],8,Be)])]))),128))])):(n(),r("div",Le,t[9]||(t[9]=[e("p",{class:"text-gray-500"},"Tidak ada tugas inspeksi yang tersedia.",-1)]))),e("div",Ae,[d(i(k),{href:l.route("inspections.history"),class:"inline-block px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-600 rounded-md hover:bg-blue-50"},{default:_(()=>t[10]||(t[10]=[c(" Lihat Inspeksi Lainnya ")])),_:1,__:[10]},8,["href"])])]),d(i(k),{href:l.route("inspections.create.new"),class:"fixed bottom-24 right-6 z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white rounded-full transition-colors duration-200 animate-bounce",title:"Buat Inspeksi Baru"},{default:_(()=>[d(i(ee),{class:"h-6 w-6"})]),_:1},8,["href"]),b.value?(n(),r("div",De,[e("div",Te,[e("div",Se,[t[14]||(t[14]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Konfirmasi",-1)),e("div",He,[d(i(I),{class:"h-8 w-8 text-blue-500 mr-3 mt-1"}),e("div",null,[(j=s.value)!=null&&j.car?(n(),r("div",Re,[e("p",Fe,o(`${s.value.car.brand.name} ${s.value.car.model.name} ${s.value.car.type.name}`),1),e("p",Ne,[c(o(s.value.car.cc)+" • "+o(s.value.car.transmission)+" • "+o(s.value.car.year)+" ",1),e("span",Ve,"("+o(s.value.car.fuel_type)+")",1)])])):(n(),r("div",ze,o((M=s.value)==null?void 0:M.car_name),1)),e("div",Oe,[t[12]||(t[12]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",Pe,o(($=s.value)==null?void 0:$.plate_number),1)])])]),e("p",qe,[c(" Anda yakin ingin "+o(w((B=s.value)==null?void 0:B.status).toLowerCase())+" inspeksi ini ",1),(L=s.value)!=null&&L.category?(n(),r("span",Ke," berdasarkan Type Inspek: "+o(s.value.category.name),1)):u("",!0),t[13]||(t[13]=c("? "))]),e("div",Ee,[e("button",{onClick:y,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{onClick:z,type:"button",disabled:i(h).processing||C.value&&s.value.status!=="in_progress"&&s.value.status!=="revision",class:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white border border-transparent rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[i(h).processing?(n(),r("span",Ue,o(O((A=s.value)==null?void 0:A.status)),1)):(n(),r("span",We,o(w((D=s.value)==null?void 0:D.status)),1))],8,Je)])])])])):u("",!0),f.value?(n(),r("div",Ge,[e("div",Qe,[e("div",Xe,[e("div",Ye,[t[15]||(t[15]=e("h3",{class:"text-lg font-medium text-gray-900"},"Batalkan Inspeksi",-1)),e("button",{onClick:y,class:"text-gray-400 hover:text-gray-600"},[d(i(Y),{class:"h-6 w-6"})])]),e("div",Ze,[d(i(I),{class:"h-8 w-8 text-red-500 mr-3 mt-1"}),e("div",null,[(T=s.value)!=null&&T.car?(n(),r("div",et,[e("p",tt,o(`${s.value.car.brand.name} ${s.value.car.model.name} ${s.value.car.type.name}`),1),e("p",st,[c(o(s.value.car.cc)+" • "+o(s.value.car.transmission)+" • "+o(s.value.car.year)+" ",1),e("span",at,"("+o(s.value.car.fuel_type)+")",1)])])):(n(),r("div",ot,o((S=s.value)==null?void 0:S.car_name),1)),e("div",nt,[t[16]||(t[16]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",rt,o((H=s.value)==null?void 0:H.plate_number),1)])])]),e("div",it,[t[17]||(t[17]=e("label",{for:"cancelReason",class:"block text-sm font-medium text-gray-700 mb-2"}," Alasan Pembatalan * ",-1)),W(e("textarea",{id:"cancelReason","onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan alasan pembatalan inspeksi...",required:""},null,512),[[G,p.value]]),i(x).errors.reason?(n(),r("p",lt,o(i(x).errors.reason),1)):u("",!0)]),e("div",dt,[e("button",{onClick:y,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Tutup "),e("button",{onClick:V,disabled:!p.value.trim()||i(x).processing,class:"px-4 py-2 bg-red-600 text-white border border-transparent rounded-md text-sm font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"},[i(x).processing?(n(),r("span",ut,"Memproses...")):(n(),r("span",mt,"Batalkan Inspeksi"))],8,ct)])])])])):u("",!0)]}),_:1}))}};export{_t as default};
