import{x as ct,r as N,g as Te,q as ne,E as Ee,G as be,c as o,o as s,d as t,b as u,k as he,z as xe,A as Ne,n as ae,t as E,u as Ae,e as pt,F as fe,m as ye,f as me,y as _e,w as ke,M as $e,N as mt,a as Ve,j as we,l as tt,T as Ce,p as gt,O as at,D as nt,J as Me,B as vt}from"./vendor-lhzHoW6A.js";import{l as st}from"./lodash-DrtvmM31.js";import{_ as ht}from"./PrimaryButton-DFMRt6cP.js";import{_ as ft}from"./ActionMessage-DmI1ZVVZ.js";import{_ as Ie}from"./app-Da3-dAnJ.js";const bt={class:"bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100"},yt={key:0,class:"p-4 space-y-2"},wt={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},xt={class:"flex items-center space-x-2"},kt={key:0,class:"text-xs text-red-500 font-normal ml-2"},It={key:1,class:"text-xs text-red-500 font-normal ml-2"},At={key:2,class:"text-xs text-green-500 font-normal ml-2"},$t={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},St={class:"relative"},Nt={key:0,class:"absolute right-3 top-3"},Tt={key:1,class:"text-xs text-red-500 font-normal ml-2"},_t={key:2,class:"mt-1 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},Ct={key:3,class:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Et={key:0},Vt=["onMousedown"],Mt={class:"font-medium text-gray-900"},Rt={class:"text-sm text-gray-500"},Ut={key:1,class:"p-4 text-sm text-gray-500 text-center"},Pt={key:0,class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200"},Dt={key:0,class:"mb-4"},Bt=["innerHTML"],Lt={key:1},jt={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},Ot=["onClick"],qt=["src","alt"],Ft={key:0,class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center p-2"},Ht={class:"text-white text-xs text-center"},Kt={key:2,class:"text-center py-4 text-gray-500 text-sm"},Gt={class:"relative max-w-4xl max-h-full w-full h-full flex items-center justify-center"},zt=["src","alt"],Wt={key:2,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 px-3 py-1 rounded-full text-sm"},Zt={key:3,class:"absolute bottom-4 left-4 text-white bg-black bg-opacity-50 px-3 py-1 rounded text-sm max-w-md"},Yt={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Jt={__name:"VehicleDetails",props:{inspection:{type:Object,default:null},CarDetail:Array,allInspections:{type:Array,default:()=>[]}},emits:["update-vehicle","update:validation","update:hasUnsavedChanges"],setup(e,{emit:G}){var _,V,J,Z,Y,K;const a=e,b=G,l=ct({plate_number:((_=a.inspection)==null?void 0:_.plate_number)||"",car_id:((V=a.inspection)==null?void 0:V.car_id)||null,car_name:((J=a.inspection)==null?void 0:J.car_name)||""}),c=N(((Z=a.inspection)==null?void 0:Z.plate_number)||""),v=N(((Y=a.inspection)==null?void 0:Y.car_id)||null),d=N(((K=a.inspection)==null?void 0:K.car_name)||""),i=N(""),w=N(""),A=N(""),I=N(!1),D=N(""),O=N(""),j=N(l.car_name),F=N(!1),H=N(!1),T=N([]),y=N(null),h=N([]),k=N(!1),n=N(0);Te(()=>{var x,g,X,B,oe;if(U((x=a.inspection)==null?void 0:x.plate_number),(g=a.inspection)!=null&&g.car_id&&((X=a.CarDetail)==null?void 0:X.length)>0){const de=a.CarDetail.find(ue=>ue.id===a.inspection.car_id);de&&se(de)}else!((B=a.inspection)!=null&&B.car_id)&&((oe=a.inspection)!=null&&oe.car_name)&&(j.value=a.inspection.car_name,l.car_id=null);window.addEventListener("keydown",r),b("update:hasUnsavedChanges",M.value),b("update:validation",f.value)}),Ee(()=>{window.removeEventListener("keydown",r)});const U=x=>{if(!x){i.value="",w.value="",A.value="";return}const g=x.toUpperCase().trim(),X=g.match(/^([A-Z]{1,2})?([0-9]{1,4})?([A-Z]{1,3})?$/);if(X)i.value=X[1]||"",w.value=X[2]||"",A.value=X[3]||"";else{let B="area",oe="",de="",ue="";for(const ce of g)B==="area"&&/[A-Z]/.test(ce)?oe+=ce:B==="area"&&/[0-9]/.test(ce)?(B="number",de+=ce):B==="number"&&/[0-9]/.test(ce)?de+=ce:B==="number"&&/[A-Z]/.test(ce)?(B="suffix",ue+=ce):B==="suffix"&&/[A-Z]/.test(ce)&&(ue+=ce);i.value=oe,w.value=de,A.value=ue}L()},L=()=>{const x=`${i.value}${w.value}${A.value}`;l.plate_number=x,S()},z=x=>{x==="area"?i.value=i.value.toUpperCase().replace(/[^A-Z]/g,""):x==="number"?w.value=w.value.replace(/[^0-9]/g,""):x==="suffix"&&(A.value=A.value.toUpperCase().replace(/[^A-Z]/g,"")),L()},Q=ne(()=>{const x=l.plate_number;return/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(x)}),te=ne(()=>!j.value||j.value.trim()===""),$=ne(()=>l.plate_number.length>0&&!Q.value?"Format plat nomor tidak valid.":null),f=ne(()=>{const x=!l.plate_number||l.plate_number.trim()==="",g=!j.value||j.value.trim()==="";return x||g||!Q.value||I.value}),M=ne(()=>{const x=l.plate_number!==c.value,g=l.car_id!==v.value||j.value!==d.value;return x||g}),ie=ne(()=>M.value&&!f.value),C=x=>{var X,B,oe;if(!x)return"";const g=[];return(X=x.brand)!=null&&X.name&&g.push(x.brand.name),(B=x.model)!=null&&B.name&&g.push(x.model.name),(oe=x.type)!=null&&oe.name&&g.push(x.type.name),x.cc&&g.push((x.cc/1e3).toFixed(1)),x.transmission&&g.push(x.transmission),x.year&&g.push(x.year.toString()),x.fuel_type&&g.push(x.fuel_type),x.production_period&&g.push(`(${x.production_period})`),g.join(" ")},P=()=>{l.car_id&&(l.car_id=null,y.value=null,h.value=[]),W()},W=st.debounce(()=>{if(!j.value.trim()){T.value=[],F.value=!1;return}H.value=!0;try{const x=j.value.toLowerCase().trim();T.value=a.CarDetail.filter(g=>C(g).toLowerCase().includes(x)),F.value=!0}finally{H.value=!1}},300),ee=()=>{setTimeout(()=>{F.value=!1,l.car_name=j.value,S()},200)},se=async x=>{y.value=x,j.value=C(x),l.car_id=x.id,l.car_name=C(x),F.value=!1,await re(x.id),S(),b("update:hasUnsavedChanges",M.value),b("update:validation",f.value)},le=x=>!x||!x.file_path?"":`/storage/${x.file_path}`,re=async x=>{try{const g=await fetch(`/api/cars/${x}/images`);if(g.ok){const X=await g.json();h.value=Array.isArray(X)?X:[]}else h.value=[]}catch(g){console.error("Error loading car images:",g),h.value=[]}},ge=x=>{n.value=x,k.value=!0,document.body.style.overflow="hidden"},q=()=>{k.value=!1,document.body.style.overflow=""},ve=()=>{n.value=(n.value+1)%h.value.length},pe=()=>{n.value=(n.value-1+h.value.length)%h.value.length},r=x=>{if(k.value)switch(x.key){case"Escape":q();break;case"ArrowRight":ve();break;case"ArrowLeft":pe();break}},S=()=>{const x={plate_number:l.plate_number,car_id:l.car_id,car_name:l.car_name};b("update-vehicle",x)},m=()=>{a.inspection&&l.post(route("inspections.updateVehicleDetails",{inspection:a.inspection.id}),{preserveScroll:!0,onSuccess:()=>{c.value=l.plate_number,v.value=l.car_id,d.value=l.car_name,b("update:hasUnsavedChanges",!1),console.log("Data berhasil disimpan!")},onError:x=>{console.error("Gagal menyimpan data:",x)}})};return be([()=>l.plate_number,()=>l.car_name],x=>{D.value="",I.value=!1,O.value="";const g=x[0];if(g&&g.length>=6){const X=a.allInspections.filter(B=>{var oe;return B.plate_number===g&&B.id!==((oe=a.inspection)==null?void 0:oe.id)});if(X.length>0){const B=["draft","in_progress","pending","pending_review","revision"],oe=X.find(de=>B.includes(de.status));if(oe)I.value=!0,D.value=`Nomor plat ini sedang dalam proses inspeksi dengan status: ${oe.status.replace(/_/g," ").toUpperCase()}.`;else{const de=X.filter(ue=>["approved","rejected","completed","cancelled"].includes(ue.status));if(de.length>0){de.sort((ce,Se)=>new Date(Se.created_at)-new Date(ce.created_at));const ue=de[0];if(ue.car_id){const ce=a.CarDetail.find(Se=>Se.id===ue.car_id);ce&&se(ce)}else ue.car_name&&(j.value=ue.car_name,l.car_name=ue.car_name,l.car_id=null);O.value=`Nomor plat ini sudah pernah diperiksa ${de.length} kali sebelumnya.`}}}}b("update:hasUnsavedChanges",M.value),b("update:validation",f.value)},{deep:!0}),(x,g)=>{var X;return s(),o("div",bt,[g[21]||(g[21]=t("div",{class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[t("h4",{class:"text-base font-semibold text-indigo-700"}," Detail Kendaraan ")],-1)),e.inspection?(s(),o("div",yt,[t("div",wt,[g[9]||(g[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Nomor Plat Kendaraan ",-1)),t("div",xt,[xe(t("input",{"onUpdate:modelValue":g[0]||(g[0]=B=>i.value=B),type:"text",placeholder:"Contoh: B",class:ae(["w-1/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!Q.value||I.value}]),onInput:g[1]||(g[1]=B=>z("area")),maxlength:"2"},null,34),[[Ne,i.value]]),xe(t("input",{"onUpdate:modelValue":g[2]||(g[2]=B=>w.value=B),type:"tel",pattern:"[0-9]*",placeholder:"1234",class:ae(["w-2/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!Q.value||I.value}]),onInput:g[3]||(g[3]=B=>z("number")),maxlength:"4"},null,34),[[Ne,w.value]]),xe(t("input",{"onUpdate:modelValue":g[4]||(g[4]=B=>A.value=B),type:"text",placeholder:"ABC",class:ae(["w-1/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!Q.value||I.value}]),onInput:g[5]||(g[5]=B=>z("suffix")),maxlength:"3"},null,34),[[Ne,A.value]])]),$.value?(s(),o("span",kt,E($.value),1)):u("",!0),D.value?(s(),o("span",It,E(D.value),1)):u("",!0),O.value?(s(),o("span",At,E(O.value),1)):u("",!0)]),t("div",$t,[g[13]||(g[13]=t("label",{class:"block text-sm font-medium text-gray-700"}," Nama Mobil ",-1)),t("div",St,[xe(t("input",{"onUpdate:modelValue":g[6]||(g[6]=B=>j.value=B),type:"text",placeholder:"Cari atau ketik nama mobil...",class:ae(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",{"border-red-500 focus:border-red-500":te.value}]),onInput:P,onFocus:g[7]||(g[7]=B=>F.value=!0),onBlur:ee},null,34),[[Ne,j.value]]),H.value?(s(),o("div",Nt,g[10]||(g[10]=[t("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):u("",!0),te.value?(s(),o("span",Tt,"Nama mobil tidak boleh kosong.")):u("",!0),!Ae(l).car_id&&j.value?(s(),o("div",_t,g[11]||(g[11]=[pt('<div class="flex items-start" data-v-0872c2f2><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-0872c2f2><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-0872c2f2></path></svg><div data-v-0872c2f2><p class="text-yellow-800 font-medium mb-1" data-v-0872c2f2>Informasi Penting</p><p class="text-yellow-700 text-sm mb-2" data-v-0872c2f2> Anda memasukkan nama mobil secara manual. Data detail mobil (spesifikasi, gambar, deskripsi) <span class="font-semibold" data-v-0872c2f2>tidak akan tersedia</span> dalam laporan inspeksi. </p><p class="text-yellow-700 text-sm mb-2" data-v-0872c2f2> Untuk laporan yang lengkap dengan semua detail mobil, silakan pilih mobil dari hasil pencarian. </p><p class="text-yellow-700 text-sm" data-v-0872c2f2> Jika tidak ingin mengubah data mobil dan anda tidak sengaja sudah menghapus atau edit, <span class="font-semibold" data-v-0872c2f2>jangan klik tombol &quot;Perbarui Detail Kendaraan&quot;</span>. Sebagai gantinya, <span class="font-semibold" data-v-0872c2f2>refresh halaman</span> untuk kembali ke data awal. </p></div></div>',1)]))):u("",!0),F.value?(s(),o("div",Ct,[T.value.length>0?(s(),o("div",Et,[(s(!0),o(fe,null,ye(T.value,B=>(s(),o("div",{key:B.id,class:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onMousedown:oe=>se(B)},[t("div",Mt,E(C(B)),1),t("div",Rt,E(B.year)+" • "+E(B.cc)+"cc • "+E(B.transmission)+" • "+E(B.fuel_type),1)],40,Vt))),128))])):(s(),o("div",Ut,g[12]||(g[12]=[me(" Tidak ada data mobil yang cocok. "),t("br",null,null,-1),me(" Silakan input manual dengan format: "),t("br",null,null,-1),t("span",{class:"font-medium text-gray-800"},"Toyota Avanza 1.5 G AT Bensin 2019",-1)])))])):u("",!0)])]),Ae(l).car_id&&y.value?(s(),o("div",Pt,[y.value.description?(s(),o("div",Dt,[g[14]||(g[14]=t("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Deskripsi:",-1)),t("div",{class:"prose prose-sm max-w-none text-gray-600",innerHTML:y.value.description},null,8,Bt)])):u("",!0),h.value.length>0?(s(),o("div",Lt,[g[15]||(g[15]=t("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Gambar Mobil:",-1)),t("div",jt,[(s(!0),o(fe,null,ye(h.value,(B,oe)=>(s(),o("div",{key:B.id||oe,class:"relative group cursor-pointer",onClick:de=>ge(oe)},[t("img",{src:le(B),alt:B.name||"Car Image",class:"w-full h-24 object-cover rounded-lg border border-gray-200 transition-transform duration-200 group-hover:scale-105"},null,8,qt),B.note?(s(),o("div",Ft,[t("p",Ht,E(B.note),1)])):u("",!0)],8,Ot))),128))])])):(s(),o("div",Kt," Tidak ada gambar tersedia untuk mobil ini "))])):u("",!0),k.value?(s(),o("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:q},[t("div",Gt,[t("button",{onClick:q,class:"absolute top-4 right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 transition-colors"},g[16]||(g[16]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),h.value.length>1?(s(),o("button",{key:0,onClick:_e(pe,["stop"]),class:"absolute left-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},g[17]||(g[17]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):u("",!0),h.value.length>1?(s(),o("button",{key:1,onClick:_e(ve,["stop"]),class:"absolute right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},g[18]||(g[18]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):u("",!0),t("img",{src:le(h.value[n.value]),alt:"Car Image "+(n.value+1),class:"max-w-full max-h-full object-contain",onClick:g[8]||(g[8]=_e(()=>{},["stop"]))},null,8,zt),h.value.length>1?(s(),o("div",Wt,E(n.value+1)+" / "+E(h.value.length),1)):u("",!0),(X=h.value[n.value])!=null&&X.note?(s(),o("div",Zt,E(h.value[n.value].note),1)):u("",!0)])])):u("",!0),he(ht,{type:"button",onClick:m,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",disabled:!ie.value},{default:ke(()=>[Ae(l).processing?(s(),o("svg",Yt,g[19]||(g[19]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):u("",!0),t("span",null,E(Ae(l).processing?"Mengirim...":"Perbarui Detail Kendaraan"),1),he(ft,{on:Ae(l).recentlySuccessful,class:"me-3 text-sm text-green-600 font-medium"},{default:ke(()=>g[20]||(g[20]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),me(" Tersimpan. ")])),_:1,__:[20]},8,["on"])]),_:1},8,["disabled"])])):u("",!0)])}}},Do=Ie(Jt,[["__scopeId","data-v-0872c2f2"]]),Xt={class:"mt-1"},Qt=["value","required","minlength","maxlength","allowSpace","placeholder"],ea={key:0,class:"mt-2 text-sm text-red-600"},ot={__name:"InputText",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],pattern:String,placeholder:String,error:String,pointId:[String,Number],textTransform:{type:String,default:"none"},allowSpace:{type:Boolean,default:!0}},emits:["update:modelValue","save"],setup(e,{emit:G}){const a=e,b=G,l=ne(()=>{if(!a.modelValue)return"";let v=a.modelValue;switch(a.allowSpace||(v=v.replace(/\s+/g,"")),a.textTransform){case"uppercase":return v.toUpperCase();case"lowercase":return v.toLowerCase();case"capitalize":return v.replace(/\b\w/g,d=>d.toUpperCase());default:return v}}),c=v=>{let d=v.target.value;switch(a.allowSpace||(d=d.replace(/\s+/g,"")),a.textTransform){case"uppercase":d=d.toUpperCase();break;case"lowercase":d=d.toLowerCase();break;case"capitalize":d=d.replace(/\b\w/g,i=>i.toUpperCase());break}b("update:modelValue",d),b("save",a.pointId)};return(v,d)=>(s(),o("div",Xt,[t("input",{value:l.value,onInput:c,type:"text",required:e.required,minlength:e.minLength,maxlength:e.maxLength,allowSpace:e.allowSpace,placeholder:e.placeholder,class:ae(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",{uppercase:e.textTransform==="uppercase",lowercase:e.textTransform==="lowercase",capitalize:e.textTransform==="capitalize"}])},null,42,Qt),e.error?(s(),o("p",ea,E(e.error),1)):u("",!0)]))}},ta={class:"mt-1"},aa=["value","required","min","max","step","placeholder"],na={key:0,class:"mt-2 text-sm text-red-600"},it={__name:"InputNumber",props:{modelValue:[String,Number],required:Boolean,min:[String,Number],max:[String,Number],step:[String,Number],placeholder:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(e,{emit:G}){const a=e,b=G,l=c=>{const v=c.target.value;b("update:modelValue",v),b("save",a.pointId)};return(c,v)=>(s(),o("div",ta,[t("input",{value:e.modelValue,onInput:l,type:"number",required:e.required,min:e.min,max:e.max,step:e.step,placeholder:e.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,aa),e.error?(s(),o("p",na,E(e.error),1)):u("",!0)]))}},sa={class:"mt-1"},oa=["value","required","min","max"],ia={key:0,class:"mt-2 text-sm text-red-600"},lt={__name:"InputDate",props:{modelValue:String,required:Boolean,minDate:String,maxDate:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(e,{emit:G}){const a=e,b=G,l=c=>{b("update:modelValue",c.target.value),b("save",a.pointId)};return(c,v)=>(s(),o("div",sa,[t("input",{value:e.modelValue,onChange:l,type:"date",required:e.required,min:e.minDate,max:e.maxDate,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,oa),e.error?(s(),o("p",ia,E(e.error),1)):u("",!0)]))}},la={class:"mt-1"},ra=["value","required","placeholder"],da={key:0,class:"mt-2 text-sm text-red-600"},rt={__name:"InputAccount",props:{modelValue:[String,Number],required:Boolean,placeholder:String,error:String,pointId:[String,Number],settings:{type:Object,default:()=>({currency_symbol:"Rp",thousands_separator:",",min_value:0,max_value:1e9})}},emits:["update:modelValue","save"],setup(e,{emit:G}){const a=e,b=G,l=N(""),c=ne(()=>{var A,I,D,O;return{currency_symbol:((A=a.settings)==null?void 0:A.currency_symbol)||"Rp",thousands_separator:((I=a.settings)==null?void 0:I.thousands_separator)||",",min_value:((D=a.settings)==null?void 0:D.min_value)!==void 0?Number(a.settings.min_value):0,max_value:((O=a.settings)==null?void 0:O.max_value)!==void 0?Number(a.settings.max_value):1e9}}),v=A=>{if(A==null||A==="")return"";const I=Number(A);if(isNaN(I))return"";let D=I.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return c.value.thousands_separator!==","&&(D=D.replace(/,/g,c.value.thousands_separator)),D},d=A=>A?A.replace(/[^\d]/g,""):"",i=ne(()=>l.value?`${c.value.currency_symbol} ${v(l.value)}`:""),w=A=>{let I=d(A.target.value),D=Number(I);c.value.min_value!==void 0&&D<c.value.min_value&&(I=c.value.min_value.toString()),c.value.max_value!==void 0&&D>c.value.max_value&&(I=c.value.max_value.toString()),l.value=I,b("update:modelValue",I),b("save",a.pointId)};return be(()=>a.modelValue,A=>{A!=null&&(l.value=A.toString())},{immediate:!0}),(A,I)=>(s(),o("div",la,[t("input",{value:i.value,onInput:w,type:"text",required:e.required,placeholder:e.placeholder,class:ae(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",e.error?"border-red-300":"border-gray-300"])},null,42,ra),e.error?(s(),o("p",da,E(e.error),1)):u("",!0)]))}},ua={class:"mt-1 space-y-3"},ca={key:0,class:"space-y-2"},pa={class:"flex flex-wrap gap-2"},ma=["onClick"],ga=["value","required","minlength","maxlength","placeholder"],va={class:"flex justify-between items-center mt-1"},ha={class:"text-xs text-gray-500"},fa={key:0,class:"text-xs text-red-600"},dt={__name:"InputTextarea",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],placeholder:String,error:String,pointId:[String,Number],inspectionId:[String,Number],settings:Object},emits:["update:modelValue","save"],setup(e,{emit:G}){const a=e,b=G,l=N([]),c=N(""),v=A=>l.value.some(I=>I.value===A),d=A=>{v(A.value)?l.value=l.value.filter(j=>j.value!==A.value):l.value.push(A);const D=[...l.value.map(j=>j.value)];c.value.trim()&&D.push(c.value.trim());const O=D.join(", ");b("update:modelValue",O),b("save",{pointId:a.pointId,inspectionId:a.inspectionId,notes:O})},i=A=>{const I=A.target.value;b("update:modelValue",I),b("save",{pointId:a.pointId,inspectionId:a.inspectionId,notes:I}),w(I)},w=A=>{var j,F,H,T;if(!A){l.value=[],c.value="";return}const I=A.split(",").map(y=>y.trim()).filter(y=>y),D=((F=(j=a.settings)==null?void 0:j.damage_options)==null?void 0:F.map(y=>y.value))||[];l.value=((T=(H=a.settings)==null?void 0:H.damage_options)==null?void 0:T.filter(y=>I.includes(y.value)))||[];const O=I.filter(y=>!D.includes(y));c.value=O.join(", ")};return be(()=>a.modelValue,A=>{A!=null&&w(A)},{immediate:!0}),(A,I)=>{var D,O,j;return s(),o("div",ua,[(D=e.settings)!=null&&D.enable_damage&&((O=e.settings)!=null&&O.damage_options)?(s(),o("div",ca,[I[0]||(I[0]=t("h4",{class:"text-sm font-medium text-gray-700"},"Pilih Kerusakan:",-1)),t("div",pa,[(s(!0),o(fe,null,ye(e.settings.damage_options,(F,H)=>(s(),o("button",{key:H,type:"button",onClick:T=>d(F),class:ae(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors border",{"border-indigo-500 bg-indigo-100 text-indigo-700":v(F.value),"border-gray-300 bg-white text-gray-700 hover:bg-gray-50":!v(F.value)}])},E(F.label),11,ma))),128))])])):u("",!0),t("div",null,[t("textarea",{value:e.modelValue,onInput:i,required:e.required,minlength:e.minLength,maxlength:e.maxLength,placeholder:e.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",rows:"4"},null,40,ga),t("div",va,[t("span",ha,E(((j=e.modelValue)==null?void 0:j.length)||0)+"/"+E(e.maxLength||400),1),e.error?(s(),o("p",fa,E(e.error),1)):u("",!0)])])])}}},ba={class:"mt-1"},ya=["value","required"],wa={key:0,class:"mt-2 text-sm text-red-600"},xa={__name:"InputSelect",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(e,{emit:G}){const a=e,b=G,l=c=>{b("update:modelValue",c.target.value),b("save",a.pointId)};return(c,v)=>(s(),o("div",ba,[t("select",{value:e.modelValue,onChange:l,required:e.required,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},v[0]||(v[0]=[t("option",{value:"",disabled:""},"Select status",-1),t("option",{value:"good"},"Good",-1),t("option",{value:"bad"},"Bad",-1),t("option",{value:"na"},"N/A",-1)]),40,ya),e.error?(s(),o("p",wa,E(e.error),1)):u("",!0)]))}},ka=Ie(xa,[["__scopeId","data-v-1b6c0201"]]),Ia={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm"},Aa={class:"bg-white rounded-xl p-8 w-full max-w-sm mx-auto shadow-2xl transform transition-all duration-300 scale-100 opacity-100"},$a={class:"text-xs text-gray-500 mt-2 text-center"},Sa={class:"flex flex-row space-x-4 mb-6"},Na={class:"mt-4 text-right"},Ta={__name:"ImageSourceOptionsModal",props:{show:{type:Boolean,default:!1},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png","jpeg"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0,max_size:2048})}},emits:["close","open-webcam","trigger-gallery"],setup(e){return(G,a)=>e.show?(s(),o("div",Ia,[t("div",Aa,[a[7]||(a[7]=t("h3",{class:"text-xl font-bold text-gray-800 mb-2 text-center"},"Pilih Sumber Gambar",-1)),t("p",$a,[a[3]||(a[3]=me("Ambil Foto Maksimal: ")),t("b",null,E(e.settings.max_files),1),a[4]||(a[4]=me(" Dengan Rasio & Ukuran: ")),t("b",null,E(e.settings.camera_aspect_ratio),1)]),t("div",Sa,[t("button",{onClick:a[0]||(a[0]=b=>G.$emit("open-webcam")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},a[5]||(a[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),t("span",{class:"text-sm font-medium"},"Kamera",-1)])),t("button",{onClick:a[1]||(a[1]=b=>G.$emit("trigger-gallery")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},a[6]||(a[6]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),t("span",{class:"text-sm font-medium"},"Galeri",-1)]))]),t("div",Na,[t("button",{onClick:a[2]||(a[2]=b=>G.$emit("close")),class:"px-5 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-colors duration-200 ease-in-out"}," Batal ")])])])):u("",!0)}},_a={key:0,class:"fixed inset-0 z-40 p-0 webcam-modal-container"},Ca={class:"webcam-content-box"},Ea={class:"webcam-header"},Va={class:"rounded-full text-white hover:bg-gray-700 transition-colors"},Ma={class:"inspection-point-name"},Ra={key:0,class:"screen-flash-overlay"},Ua={key:2,class:"zoom-controls"},Pa=["max"],Da={class:"webcam-footer"},Ba={class:"camera-controls"},La=["disabled"],ja={class:"camera-icon-container"},Oa={key:0,class:"camera-spinner"},qa={key:1,class:"camera-body"},Fa={__name:"WebcamModal",props:{show:Boolean,aspectRatio:Number,settings:Object,point:Object},emits:["close","photoCaptured"],setup(e,{emit:G}){const a=e,b=G,l=N(null),c=N(null);let v=null,d=null;const i=N("environment"),w=N(!1),A=N(!1),I=N(!1),D=N(!1),O=N(!1),j=N({}),F=N(!1),H=N(1),T=N(1),y=N(!1),h=ne(()=>{var C;return((C=a.settings)==null?void 0:C.max_size)||2048}),k=ne(()=>a.aspectRatio?{aspectRatio:`${a.aspectRatio} / 1`,maxWidth:"100%",maxHeight:"70vh",margin:"0 auto"}:{}),n=ne(()=>{if(!a.aspectRatio)return{};const C=a.aspectRatio,P=C>1?80:60,W=C>1?80/C:60*C;return{width:`${P}%`,height:`${W}%`}}),U=async()=>{v&&v.getTracks().forEach(C=>C.stop());try{const C={facingMode:i.value,width:{ideal:4096},height:{ideal:2160},aspectRatio:{ideal:a.aspectRatio||1.3333333333333333},frameRate:{ideal:30},advanced:[{focusMode:"continuous"},{exposureMode:"continuous"},{whiteBalanceMode:"continuous"}]};v=await navigator.mediaDevices.getUserMedia({video:C,audio:!1}),d=v.getVideoTracks()[0],l.value.srcObject=v,l.value.onloadedmetadata=async()=>{await z(),await l.value.play()}}catch(C){console.error("Error accessing camera: ",C),alert("Failed to access camera. Please allow camera permission."),b("close")}},L=()=>{v&&v.getTracks().forEach(C=>C.stop()),b("close")},z=async()=>{if(d)try{const C=await navigator.mediaDevices.enumerateDevices();w.value=C.filter(W=>W.kind==="videoinput").length>1;const P=d.getCapabilities();P.zoom?(y.value=!0,T.value=P.zoom.max,console.log(`Zoom supported. Max zoom: ${T.value}`)):(y.value=!1,console.warn("Zoom is not supported by this camera.")),A.value=P.torch||P.fillLightMode&&P.fillLightMode.includes("torch")}catch(C){console.error("Error checking camera capabilities:",C)}},Q=async C=>{if(!d)return;const P=l.value.getBoundingClientRect(),W=C.clientX-P.left,ee=C.clientY-P.top;O.value=!0,j.value={left:`${W}px`,top:`${ee}px`,transform:"translate(-50%, -50%)"};try{if(d.getCapabilities().pointsOfInterest){const le=W/P.width,re=ee/P.height;await d.applyConstraints({advanced:[{focusMode:"manual",pointsOfInterest:[{x:le,y:re}]}]})}else console.warn("Manual focus with point of interest is not supported.")}catch(se){console.warn("Manual focus failed:",se)}setTimeout(()=>{O.value=!1,d.getCapabilities().focusMode.includes("continuous")&&d.applyConstraints({advanced:[{focusMode:"continuous"}]})},1e3)},te=async C=>{if(!d||!y.value)return;const P=Math.min(Math.max(C,1),T.value);H.value=P;try{await d.applyConstraints({advanced:[{zoom:P}]})}catch(W){console.error("Failed to set zoom:",W)}},$=async()=>{if(!(!d||!A.value))try{i.value==="user"?(I.value=!I.value,D.value=I.value):(await d.applyConstraints({advanced:[{torch:!I.value}]}),I.value=!I.value)}catch(C){console.error("Flash toggle failed:",C)}},f=async()=>{w.value&&(i.value=i.value==="environment"?"user":"environment",v&&v.getTracks().forEach(C=>C.stop()),await U())},M=async C=>new Promise(P=>{const W=h.value*1024;if(C.size<=W){P(C);return}const ee=new Image,se=new FileReader;se.onload=le=>{ee.onload=()=>{const re=document.createElement("canvas"),ge=re.getContext("2d"),q=Math.sqrt(W/C.size);re.width=ee.width*q,re.height=ee.height*q,ge.drawImage(ee,0,0,re.width,re.height);let ve=.9;const pe=()=>{re.toBlob(r=>{r.size>W&&ve>.1?(ve-=.1,pe()):P(r)},"image/jpeg",ve)};pe()},ee.src=le.target.result},se.readAsDataURL(C)}),ie=async()=>{if(!(F.value||!l.value||!c.value)){F.value=!0;try{const C=l.value,P=c.value,W=C.videoWidth,ee=C.videoHeight;let se,le,re,ge;W/ee>a.aspectRatio?(le=ee,se=ee*a.aspectRatio,re=(W-se)/2,ge=0):(se=W,le=W/a.aspectRatio,re=0,ge=(ee-le)/2),P.width=se,P.height=le,P.getContext("2d").drawImage(C,re,ge,se,le,0,0,se,le);const ve=await new Promise(r=>{P.toBlob(r,"image/jpeg",1)}),pe=await M(ve);if(pe){const r=new File([pe],`capture_${Date.now()}.jpeg`,{type:"image/jpeg",lastModified:Date.now()});b("photoCaptured",r),D.value=!0,setTimeout(()=>{D.value=!1},100)}}catch(C){console.error("Error capturing photo:",C),alert("Failed to capture photo. Please try again.")}finally{F.value=!1}}};return be(()=>a.show,C=>{C?U():L()}),Ee(()=>{v&&v.getTracks().forEach(C=>C.stop())}),(C,P)=>{var W;return e.show?(s(),o("div",_a,[t("div",Ca,[t("div",Ea,[t("p",Va,E(e.settings.camera_aspect_ratio),1),t("div",Ma,E(((W=e.point)==null?void 0:W.name)||"Camera"),1),t("button",{onClick:L,class:"p-2 rounded-full text-white hover:bg-gray-700 transition-colors"},P[2]||(P[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",{class:"webcam-video-container",style:$e(k.value),onClick:Q,onTouchstart:Q},[t("video",{ref_key:"webcamVideo",ref:l,autoplay:"",playsinline:"",class:"webcam-video"},null,512),t("canvas",{ref_key:"webcamCanvas",ref:c,class:"hidden"},null,512),D.value?(s(),o("div",Ra)):u("",!0),t("div",{class:"aspect-ratio-guide",style:$e(n.value)},null,4),O.value?(s(),o("div",{key:1,class:"focus-indicator",style:$e(j.value)},P[3]||(P[3]=[t("div",{class:"focus-ring"},null,-1)]),4)):u("",!0),P[4]||(P[4]=t("div",{class:"hd-badge"},[t("span",{class:"hd-text"},"HD")],-1)),y.value?(s(),o("div",Ua,[xe(t("input",{type:"range",min:"1",max:T.value,step:"0.1","onUpdate:modelValue":P[0]||(P[0]=ee=>H.value=ee),onInput:P[1]||(P[1]=ee=>te(parseFloat(ee.target.value))),class:"zoom-slider"},null,40,Pa),[[Ne,H.value]])])):u("",!0)],36),t("div",Da,[t("div",Ba,[e.settings.enable_flash&&A.value?(s(),o("button",{key:0,onClick:$,class:ae(["control-button",{active:I.value,disabled:!A.value}])},P[5]||(P[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]),2)):u("",!0),t("button",{onClick:ie,class:"capture-button",disabled:F.value},[t("div",ja,[F.value?(s(),o("div",Oa)):(s(),o("div",qa,P[6]||(P[6]=[t("div",{class:"camera-lens"},null,-1),t("div",{class:"camera-flash"},null,-1)])))])],8,La),e.settings.enable_camera_switch&&w.value?(s(),o("button",{key:1,onClick:f,class:"control-button"},P[7]||(P[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)]))):u("",!0)])])])])):u("",!0)}}},Ha=Ie(Fa,[["__scopeId","data-v-d307c818"]]),Ka={key:0,class:"fixed inset-0 bg-black bg-opacity-95 z-50 flex flex-col items-center justify-center"},Ga={class:"w-full h-full flex flex-col"},za={class:"flex justify-between items-center p-4 bg-black bg-opacity-70 text-white shadow-md"},Wa=["disabled"],Za={class:"text-lg font-semibold"},Ya={class:"flex items-center gap-2"},Ja=["disabled"],Xa=["disabled"],Qa={key:0,class:"bg-blue-900 bg-opacity-50 text-white p-3"},en={class:"flex items-center justify-between mb-2"},tn={class:"text-xs"},an={class:"w-full bg-blue-700 bg-opacity-50 rounded-full h-2"},nn={class:"text-xs mt-1 text-blue-300"},sn={class:"flex-1 flex items-center justify-center overflow-hidden relative"},on=["src"],ln={key:1,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},rn={key:2,class:"absolute inset-0 bg-red-500 bg-opacity-80 flex flex-col items-center justify-center text-white"},dn=["disabled"],un=["disabled"],cn=["disabled"],pn={class:"flex flex-col gap-3 p-4 bg-black bg-opacity-70 shadow-inner"},mn={class:"flex justify-between items-center w-full"},gn=["disabled"],vn={key:1,class:"flex-1"},hn=["disabled"],fn={class:"flex gap-3 w-full"},bn={key:1,class:"flex-1 px-4 py-3 bg-gradient-to-r from-indigo-700 to-sky-600 rounded-lg cursor-not-allowed flex items-center justify-center font-medium opacity-75",disabled:""},yn={class:"flex items-center gap-2"},wn={key:0,class:"text-center"},xn={__name:"PreviewModal",props:{show:Boolean,images:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0},allowMultiple:Boolean,maxFiles:Number,isUploading:Boolean,aspectRatio:Number,point:Object,uploadProgress:{type:Number,default:0},currentUpload:{type:Number,default:0},totalUpload:{type:Number,default:0}},emits:["close","saveImages","removePreviewImage","triggerAddMorePhotos","update:images","retryImage"],setup(e,{emit:G}){const a=e,b=G,l=N(0),c=N([]),v=ne(()=>c.value.length>0?c.value[l.value]:null);be(()=>a.images,T=>{c.value=T.map(y=>({...y,rotation:y.rotation||0})),T.length===0&&a.show&&D()},{deep:!0,immediate:!0}),be(()=>a.show,T=>{T&&a.images.length>0&&(l.value=a.initialIndex)}),be(()=>a.uploadProgress,T=>{T===100&&console.log("Upload completed")});const d=T=>T.preview||(T.image_path?`/${T.image_path}`:""),i=()=>{if(v.value&&!a.isUploading){const T=(v.value.rotation+90)%360;c.value[l.value].rotation=T,b("update:images",c.value)}},w=()=>{a.isUploading||(l.value=l.value<c.value.length-1?l.value+1:0)},A=()=>{a.isUploading||(l.value=l.value>0?l.value-1:c.value.length-1)},I=()=>{a.isUploading||b("saveImages",c.value)},D=()=>{a.isUploading||b("close")},O=()=>{if(v.value&&!a.isUploading){const T=v.value,y=c.value.findIndex(h=>h.isNew&&T.isNew&&h.preview===T.preview||!h.isNew&&!T.isNew&&h.id===T.id);y!==-1&&(b("removePreviewImage",T),c.value.splice(y,1),b("update:images",c.value)),l.value>=c.value.length&&(l.value=Math.max(0,c.value.length-1)),c.value.length===0&&b("close")}},j=()=>{a.isUploading||b("triggerAddMorePhotos")},F=()=>{v.value&&!a.isUploading&&b("retryImage",v.value)},H=T=>{T.key==="Escape"&&!a.isUploading&&D()};return Te(()=>{document.addEventListener("keydown",H)}),Ee(()=>{document.removeEventListener("keydown",H)}),(T,y)=>{var h;return e.show?(s(),o("div",Ka,[t("div",Ga,[t("div",za,[t("button",{onClick:D,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",disabled:e.isUploading},y[0]||(y[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Wa),t("div",Za,E(((h=e.point)==null?void 0:h.name)||"Preview")+" ("+E(l.value+1)+"/"+E(c.value.length)+") ",1),t("div",Ya,[v.value&&v.value.isNew?(s(),o("button",{key:0,onClick:O,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors","aria-label":"Remove new image",disabled:e.isUploading},y[1]||(y[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,Ja)):u("",!0),v.value&&v.value.isNew?(s(),o("button",{key:1,onClick:i,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",disabled:e.isUploading},y[2]||(y[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]),8,Xa)):u("",!0)])]),e.isUploading?(s(),o("div",Qa,[t("div",en,[y[3]||(y[3]=t("span",{class:"text-sm font-medium"},"Mengupload gambar...",-1)),t("span",tn,E(e.uploadProgress)+"%",1)]),t("div",an,[t("div",{class:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:$e({width:e.uploadProgress+"%"})},null,4)]),t("p",nn,E(e.currentUpload)+"/"+E(e.totalUpload)+" gambar terupload",1)])):u("",!0),t("div",sn,[t("div",{class:"relative w-full max-w-full",style:$e({paddingTop:e.aspectRatio?100/e.aspectRatio+"%":"75%"})},[v.value?(s(),o("img",{key:0,src:d(v.value),class:"absolute inset-0 w-full h-full object-contain transition-transform duration-300 ease-in-out bg-black",style:$e({transform:`rotate(${v.value.rotation}deg)`})},null,12,on)):u("",!0),v.value&&v.value.isUploading?(s(),o("div",ln,y[4]||(y[4]=[t("div",{class:"text-center text-white"},[t("div",{class:"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-2"}),t("p",{class:"text-sm"},"Mengupload...")],-1)]))):u("",!0),v.value&&v.value.isFailed?(s(),o("div",rn,[y[5]||(y[5]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),y[6]||(y[6]=t("p",{class:"text-lg font-medium mb-2"},"Upload Gagal",-1)),t("button",{onClick:F,class:"px-4 py-2 bg-white text-red-600 rounded-lg font-medium hover:bg-gray-100 transition-colors",disabled:e.isUploading}," Coba Lagi ",8,dn)])):u("",!0)],4),c.value.length>1&&!e.isUploading?(s(),o("button",{key:0,onClick:A,class:"absolute left-4 p-3 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors",disabled:e.isUploading},y[7]||(y[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),8,un)):u("",!0),c.value.length>1&&!e.isUploading?(s(),o("button",{key:1,onClick:w,class:"absolute right-4 p-3 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors",disabled:e.isUploading},y[8]||(y[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,cn)):u("",!0)]),t("div",pn,[t("div",mn,[v.value&&!v.value.isNew?(s(),o("button",{key:0,onClick:O,class:"px-3 py-2 rounded-lg text-white font-medium flex items-center gap-1 transition-colors hover:text-red-400",disabled:e.isUploading},y[9]||(y[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.095 21H7.905a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),me(" Hapus Foto ")]),8,gn)):(s(),o("div",vn)),e.allowMultiple&&c.value.length<e.maxFiles&&!e.isUploading?(s(),o("button",{key:2,onClick:j,class:"px-3 py-2 rounded-lg text-white font-medium flex items-center gap-1 transition-colors hover:text-indigo-400",disabled:e.isUploading},y[10]||(y[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),me(" Tambah Foto ")]),8,hn)):u("",!0)]),t("div",fn,[e.isUploading?(s(),o("button",bn,[t("div",yn,[y[11]||(y[11]=t("div",{class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)),t("span",null,"Mengupload... "+E(e.uploadProgress)+"%",1)])])):(s(),o("button",{key:0,onClick:I,class:"flex-1 px-4 py-3 rounded-lg bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white transition-colors font-medium hover:from-indigo-600 hover:to-sky-500"}," Simpan & Upload "))]),e.isUploading?(s(),o("div",wn,y[12]||(y[12]=[t("p",{class:"text-xs text-blue-300"}," Modal akan tertutup otomatis. Upload terus berjalan di background. ",-1)]))):u("",!0)])])])):u("",!0)}}},kn=Ie(xn,[["__scopeId","data-v-581782f4"]]),In=["accept","multiple","disabled"],An={class:"text-xs text-gray-500 mb-2"},$n=["disabled"],Sn={class:"h-full flex flex-col items-center justify-center p-4 text-center"},Nn={class:"text-xs text-gray-400 mt-1"},Tn={key:0,class:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg"},_n={class:"flex items-center justify-between mb-2"},Cn={class:"text-xs text-blue-600"},En={class:"w-full bg-blue-200 rounded-full h-2"},Vn={class:"text-xs text-blue-600 mt-1"},Mn={key:1,class:"flex items-center gap-4"},Rn=["src"],Un={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},Pn=["disabled"],Dn={key:2,class:"flex space-x-2 overflow-x-auto pb-2 scrollbar-hide"},Bn=["disabled"],Ln=["onClick"],jn=["src"],On={key:0,class:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center text-white text-xs font-bold"},qn={key:0},Fn={key:1,class:"ml-1"},Hn={key:1,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},Kn={key:2,class:"absolute inset-0 bg-red-500 bg-opacity-80 flex flex-col items-center justify-center text-white"},Gn={key:2,class:"mt-1 text-xs text-red-600"},zn={__name:"InputImage",props:{modelValue:{type:Array,default:()=>[]},error:String,inspectionId:{type:[String,Number],required:!0},pointId:{type:[String,Number],required:!0},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png","jpeg"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0,max_size:2048})},point:Object},emits:["update:modelValue","save","removeImage","uploaded","uploadProgress"],setup(e,{emit:G}){const a=e,b=G,l=N(null),c=N(null),v=N(!1),d=N(!1),i=N(!1),w=N([]),A=N(0),I=N(!1),D=N(0),O=N(0),j=N(0),F=mt("imageSourceSetting",N("all")),H=`inspection-${a.inspectionId}-point-${a.pointId}-backup`,T=ne(()=>Number(a.settings.max_files)>1),y=ne(()=>a.settings.allowed_types.map(r=>`.${r}`).join(", ")),h=ne(()=>{const r=a.settings.camera_aspect_ratio.split(":");if(r.length===2){const S=parseFloat(r[0]),m=parseFloat(r[1]);if(!isNaN(S)&&!isNaN(m)&&m!==0)return S/m}return 3/4}),k=ne(()=>{const r=[],S=new Set;for(const m of a.modelValue)m.id&&S.add(m.id),r.push({...m,rotation:m.rotation||0,isNew:!1,isUploaded:!0,preview:m.preview||(m.image_path?`/${m.image_path}`:null)});for(const m of w.value)m.id&&S.add(m.id),r.push({...m,isUploading:m.isUploading||!1});return r}),n=r=>r.preview||(r.image_path?`/${r.image_path}`:""),U=()=>{i.value&&(i.value=!1),F.value==="camera"?z():F.value==="gallery"?L():v.value=!0},L=()=>{v.value=!1,l.value.click()},z=()=>{v.value=!1,d.value=!0},Q=()=>{v.value=!1,k.value.length>0&&(i.value=!0)},te=()=>{d.value=!1,k.value.length>0&&(i.value=!0)},$=()=>{i.value=!1,I.value||(w.value.forEach(r=>{r.preview&&r.preview.startsWith("blob:")&&URL.revokeObjectURL(r.preview)}),w.value=[])},f=r=>new Promise(S=>{const m=new FileReader;m.onload=_=>{const V=new Image;V.onload=()=>{S({file:r,preview:URL.createObjectURL(r),rotation:0,width:V.naturalWidth,height:V.naturalHeight,isNew:!0})},V.onerror=()=>{console.error("Failed to load image for dimensions:",r.name),S({file:r,preview:URL.createObjectURL(r),rotation:0,width:0,height:0,isNew:!0})},V.src=_.target.result},m.readAsDataURL(r)}),M=r=>{const S=r.name.split(".").pop().toLowerCase();return a.settings.allowed_types.includes(S)},ie=async r=>{const m=(a.settings.max_size||2048)*1024;return new Promise(_=>{const V=new Image,J=new FileReader;J.onload=Z=>{V.onload=()=>{const Y=document.createElement("canvas"),K=Y.getContext("2d"),x=Math.max(V.width,V.height);Y.width=x,Y.height=x,K.fillStyle="white",K.fillRect(0,0,x,x);const g=(x-V.width)/2,X=(x-V.height)/2;K.drawImage(V,g,X,V.width,V.height);let B=.9;const oe=()=>{Y.toBlob(de=>{if(de.size>m&&B>.1)B-=.1,oe();else{const ue=new File([de],r.name,{type:"image/jpeg",lastModified:Date.now()});_(ue)}},"image/jpeg",B)};oe()},V.src=Z.target.result},J.readAsDataURL(r)})},C=async r=>{const S=Array.from(r.target.files);if(!S.length){v.value=!1,k.value.length>0&&(i.value=!0);return}try{const m=S.filter(K=>!M(K));if(m.length>0){const K=m.map(x=>x.name.split(".").pop()).join(", ");alert(`File type not allowed: ${K}. Allowed types: ${a.settings.allowed_types.join(", ")}`),r.target.value="";return}const _=k.value.length,V=a.settings.max_files-_,J=await Promise.all(S.slice(0,V).map(async K=>await ie(K))),Z=await Promise.all(J.map(f)),Y=T.value?Z:Z.slice(0,1);T.value?w.value.push(...Y):(w.value.forEach(K=>{K.preview&&K.preview.startsWith("blob:")&&URL.revokeObjectURL(K.preview)}),w.value=Y),v.value=!1,Y.length>0?(A.value=Math.max(0,k.value.length-Y.length),i.value=!0):k.value.length>0&&(i.value=!0),r.target.value=""}catch(m){console.error("Error processing selected images:",m),alert("Failed to process selected images. Please try again."),v.value=!1,k.value.length>0&&(i.value=!0)}},P=async r=>{const S=k.value.length;if(!T.value||S<a.settings.max_files)try{const m=await ie(r),_=new Image;_.onload=()=>{const V={file:m,preview:URL.createObjectURL(m),rotation:0,width:_.naturalWidth,height:_.naturalHeight,isNew:!0};T.value?w.value.push(V):(w.value.forEach(J=>{J.preview&&J.preview.startsWith("blob:")&&URL.revokeObjectURL(J.preview)}),w.value=[V]),d.value=!1,v.value=!1,A.value=k.value.length-1,i.value=!0},_.src=URL.createObjectURL(m)}catch(m){console.error("Error processing captured image:",m),alert("Failed to process captured image. Please try again.")}else alert(`Maximum ${a.settings.max_files} files allowed.`),d.value=!1,v.value=!1,k.value.length>0&&(i.value=!0)},W=(r=0)=>{A.value=r,i.value=!0},ee=r=>new Promise(S=>{if(r.rotation===0||!c.value){if(!r.isNew&&!r.file){S({file:null,width:r.width,height:r.height,isOriginal:!0});return}S({file:r.file,width:r.width,height:r.height});return}const m=new Image;m.onload=async()=>{try{const _=c.value,V=_.getContext("2d"),J=m.width,Z=m.height;let Y,K;r.rotation===90||r.rotation===270?(Y=Z,K=J):(Y=J,K=Z),_.width=Y,_.height=K,V.clearRect(0,0,_.width,_.height),V.translate(_.width/2,_.height/2),V.rotate(r.rotation*Math.PI/180),V.drawImage(m,-J/2,-Z/2,J,Z),V.setTransform(1,0,0,1,0,0);const x=await new Promise(B=>{_.toBlob(B,"image/jpeg",.9)}),g=new File([x],r.file?r.file.name:`rotated_image_${Date.now()}.jpg`,{type:"image/jpeg"}),X=await ie(g);S({file:X,width:Y,height:K})}catch(_){console.error("Error processing rotated image:",_),S({file:r.file,width:r.width,height:r.height})}},m.onerror=()=>{console.error("Failed to load image for rotation processing:",r.preview),S({file:r.file,width:r.width,height:r.height})},m.src=r.preview}),se=r=>{try{const S={images:r.map(m=>{var _;return{fileName:((_=m.file)==null?void 0:_.name)||`image-${Date.now()}.jpg`,rotation:m.rotation||0,width:m.width||0,height:m.height||0,timestamp:Date.now()}}),inspectionId:a.inspectionId,pointId:a.pointId};localStorage.setItem(H,JSON.stringify(S))}catch(S){console.error("Error saving backup:",S)}},le=()=>{localStorage.removeItem(H)},re=async r=>{I.value=!0;const S=[],m=[];if(!a.pointId){alert("Error: Point ID is missing. Cannot upload image."),I.value=!1;return}try{se(r);for(const _ of r){if(!_.isNew&&_.rotation===0&&_.id&&_.image_path){S.push({id:_.id,image_path:_.image_path,width:_.width,height:_.height,rotation:0,preview:_.preview,isUploaded:!0});continue}const{file:V,width:J,height:Z,isOriginal:Y}=await ee(_);if(Y&&!_.isNew){S.push({id:_.id,image_path:_.image_path,width:_.width,height:_.height,rotation:_.rotation||0,preview:_.preview,isUploaded:!0});continue}V&&m.push({file:V,width:J,height:Z,rotation:_.rotation||0,originalImage:_})}$(),m.length>0?await ge(m,S):(b("update:modelValue",S),b("save",a.pointId))}catch(_){console.error("Error during image processing:",_),alert("Terjadi error saat memproses gambar. Data tersimpan secara lokal.")}finally{I.value=!1}},ge=async(r,S)=>{j.value=r.length,O.value=0,D.value=0;const m=[...S];let _=0;try{for(let V=0;V<r.length;V++){const J=r[V],Z=new FormData;Z.append("inspection_id",a.inspectionId),Z.append("point_id",a.pointId),Z.append("images[]",J.file);const Y=w.value.findIndex(K=>{var x;return K.preview===((x=J.originalImage)==null?void 0:x.preview)});Y!==-1&&(w.value[Y].isUploading=!0,w.value[Y].isFailed=!1);try{const x=(await Ve.post(route("inspections.upload-image"),Z,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:g=>{if(g.total){const X=Math.round(g.loaded*100/g.total);D.value=Math.round((V+g.loaded/g.total)/r.length*100),O.value=V+1}}})).data.images;if(x&&x.length>0){const g=x[0];if(m.push({id:g.image_id,image_path:g.path,width:g.width||J.width||0,height:g.height||J.height||0,rotation:J.rotation||0,preview:g.public_url,isUploaded:!0}),Y!==-1){const X=w.value.splice(Y,1)[0];X.preview&&X.preview.startsWith("blob:")&&URL.revokeObjectURL(X.preview)}_++}}catch(K){console.error(`Error uploading image ${V+1}:`,K),Y!==-1&&(w.value[Y].isUploading=!1,w.value[Y].isFailed=!0)}}_>0&&(b("update:modelValue",m),b("save",a.pointId),b("uploaded",{pointId:a.pointId,images:m,newImagesCount:_})),_===r.length&&le(),console.log(`✅ Successfully uploaded ${_}/${r.length} images`)}catch(V){console.error("Error in upload process:",V),r.forEach(J=>{const Z=w.value.findIndex(Y=>{var K;return Y.preview===((K=J.originalImage)==null?void 0:K.preview)});Z!==-1&&(w.value[Z].isUploading=!1,w.value[Z].isFailed=!0)})}finally{D.value=0,O.value=0,j.value=0,I.value=!1}},q=async r=>{if(!r||!r.file){console.error("No file to retry upload");return}I.value=!0;const S=[...a.modelValue];try{const m=new FormData;m.append("inspection_id",a.inspectionId),m.append("point_id",a.pointId),m.append("images[]",r.file);const _=w.value.findIndex(Z=>Z.preview===r.preview);_!==-1&&(w.value[_].isUploading=!0,w.value[_].isFailed=!1);const J=(await Ve.post(route("inspections.upload-image"),m,{headers:{"Content-Type":"multipart/form-data"}})).data.images;if(J&&J.length>0){const Z=J[0];if(S.push({id:Z.image_id,image_path:Z.path,width:Z.width||r.width||0,height:Z.height||r.height||0,rotation:r.rotation||0,preview:Z.public_url,isUploaded:!0}),_!==-1){const K=w.value.splice(_,1)[0];K.preview&&K.preview.startsWith("blob:")&&URL.revokeObjectURL(K.preview)}b("update:modelValue",S),b("save",a.pointId),b("uploaded",{pointId:a.pointId,images:S,newImagesCount:1}),w.value.some(K=>K.isFailed)||le(),console.log("✅ Successfully retried upload for 1 image")}}catch(m){console.error("Error retrying upload:",m),previewIndex!==-1&&(w.value[previewIndex].isUploading=!1,w.value[previewIndex].isFailed=!0)}finally{I.value=!1}},ve=r=>{if(r){if(r.id&&!r.isNew)pe(r);else{const S=w.value.findIndex(m=>m.preview&&m.preview===r.preview&&m.isNew||m.id&&m.id===r.id);if(S!==-1){const m=w.value.splice(S,1)[0];m.preview&&m.preview.startsWith("blob:")&&URL.revokeObjectURL(m.preview)}b("update:modelValue",a.modelValue.filter(m=>!(m.id&&m.id===r.id)&&!(m.preview&&m.preview===r.preview)))}A.value>=k.value.length&&(A.value=Math.max(0,k.value.length-1)),k.value.length===0&&$()}},pe=async r=>{var m,_;if(r.id||r.image_path)try{await Ve.delete(route("inspections.delete-image"),{data:{image_id:r.id,image_path:r.image_path}})}catch(V){console.error("Error deleting image from server:",V),(_=(m=V.response)==null?void 0:m.data)!=null&&_.message?alert(`Failed to delete image from server: ${V.response.data.message}`):alert(`Failed to delete image from server: ${V.message}`);return}r.preview&&r.preview.startsWith("blob:")&&URL.revokeObjectURL(r.preview);const S=a.modelValue.filter(V=>V.id!==r.id);b("update:modelValue",S),w.value=w.value.filter(V=>V.isNew&&r.isNew?V.preview!==r.preview:V.id!==r.id),b("removeImage",{image:r}),i.value&&k.value.length===0?$():i.value&&A.value>=k.value.length&&(A.value=Math.max(0,k.value.length-1))};return Te(()=>{try{localStorage.getItem(H)&&console.log("Found backup images, ready for recovery if needed")}catch(r){console.error("Error loading backup:",r)}}),(r,S)=>(s(),o("div",null,[t("input",{ref_key:"galleryInput",ref:l,type:"file",accept:y.value,class:"hidden",onChange:C,multiple:T.value,disabled:I.value},null,40,In),t("canvas",{ref_key:"processingCanvas",ref:c,class:"hidden"},null,512),t("p",An,"Foto Maksimal: "+E(e.settings.max_files)+" | Rasio: "+E(e.settings.camera_aspect_ratio),1),k.value.length===0?(s(),o("label",{key:0,onClick:U,class:ae(["block w-full border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-200 h-28",{"border-gray-300 hover:border-indigo-400 bg-gray-50":!0}]),disabled:I.value},[t("div",Sn,[S[2]||(S[2]=t("svg",{class:"w-8 h-8 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),S[3]||(S[3]=t("p",{class:"text-sm text-gray-600 font-medium"},"Upload Image",-1)),t("p",Nn,"Tipe: "+E(y.value),1)])],8,$n)):(s(),o("div",{key:1,class:ae(["block w-full rounded-lg transition-colors duration-200 p-2",{"border-2 border-dashed border-indigo-200 bg-indigo-50 h-auto p-2":e.settings.max_files==1,"bg-transparent":e.settings.max_files>1}]),"aria-label":"Image gallery"},[I.value?(s(),o("div",Tn,[t("div",_n,[S[4]||(S[4]=t("span",{class:"text-sm font-medium text-blue-700"},"Mengupload gambar...",-1)),t("span",Cn,E(D.value)+"%",1)]),t("div",En,[t("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:$e({width:D.value+"%"})},null,4)]),t("p",Vn,E(O.value)+"/"+E(j.value)+" gambar terupload",1)])):u("",!0),e.settings.max_files===1?(s(),o("div",Mn,[t("div",{class:"relative flex-shrink-0 w-24 h-24 overflow-hidden rounded-md border border-gray-200 cursor-pointer",onClick:S[0]||(S[0]=m=>W(0))},[t("img",{src:n(k.value[0]),class:"w-full h-full object-cover"},null,8,Rn),k.value[0].isUploading?(s(),o("div",Un,S[5]||(S[5]=[t("div",{class:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)]))):u("",!0)]),t("button",{onClick:S[1]||(S[1]=_e(m=>pe(k.value[0]),["stop"])),type:"button",class:"flex items-center gap-1 text-red-600 font-medium hover:text-red-800 transition-colors",disabled:I.value},S[6]||(S[6]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.095 21H7.905a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),me(" Hapus Foto ")]),8,Pn)])):(s(),o("div",Dn,[T.value&&k.value.length<e.settings.max_files?(s(),o("div",{key:0,class:"flex-shrink-0 flex flex-col items-center justify-center p-2 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-colors w-24 h-24",onClick:U,disabled:I.value},S[7]||(S[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("p",{class:"mt-1 text-xs text-gray-600"},"Tambah",-1)]),8,Bn)):u("",!0),(s(!0),o(fe,null,ye(k.value,(m,_)=>(s(),o("div",{key:m.id||m.preview,class:"relative flex-shrink-0 w-24 h-24 overflow-hidden rounded-md border border-gray-200 cursor-pointer",onClick:V=>m.isFailed?q(m):W(_)},[t("img",{src:n(m),class:"w-full h-full object-cover"},null,8,jn),m.isNew||m.rotation!==0?(s(),o("div",On,[m.isNew?(s(),o("span",qn,"BARU")):u("",!0),m.rotation!==0?(s(),o("span",Fn,"ROTASI")):u("",!0)])):u("",!0),m.isUploading?(s(),o("div",Hn,S[8]||(S[8]=[t("div",{class:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)]))):u("",!0),m.isFailed?(s(),o("div",Kn,S[9]||(S[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),t("span",{class:"text-xs font-medium"},"Retry",-1)]))):u("",!0)],8,Ln))),128))]))],2)),e.error?(s(),o("p",Gn,E(e.error),1)):u("",!0),he(Ta,{show:v.value,settings:e.settings,onClose:Q,onOpenWebcam:z,onTriggerGallery:L},null,8,["show","settings"]),he(Ha,{show:d.value,"aspect-ratio":h.value,settings:e.settings,point:e.point,onClose:te,onPhotoCaptured:P},null,8,["show","aspect-ratio","settings","point"]),he(kn,{show:i.value,images:k.value,point:e.point,"initial-index":A.value,"allow-multiple":T.value,"max-files":e.settings.max_files,"is-uploading":I.value,"aspect-ratio":h.value,"upload-progress":D.value,"current-upload":O.value,"total-upload":j.value,onClose:$,onSaveImages:re,onRemovePreviewImage:ve,onTriggerAddMorePhotos:U,onRetryImage:q},null,8,["show","images","point","initial-index","allow-multiple","max-files","is-uploading","aspect-ratio","upload-progress","current-upload","total-upload"])]))}},Re=Ie(zn,[["__scopeId","data-v-a1838a9b"]]),Wn={key:0,class:"fixed inset-0 z-50 overflow-hidden"},Zn={class:"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[85vh] overflow-hidden flex flex-col"},Yn={class:"px-4 pb-2 border-b border-gray-200"},Jn={class:"text-lg font-semibold text-gray-900"},Xn={key:0,class:"text-sm text-gray-500 mt-1"},Qn={class:"flex-1 overflow-y-auto p-4"},es={key:0,class:"border-t border-gray-200 p-4 bg-gray-50"},ts={__name:"BottomSheetModal",props:{show:Boolean,title:String,subtitle:String},setup(e){return(G,a)=>(s(),we(Ce,{name:"bottom-sheet"},{default:ke(()=>[e.show?(s(),o("div",Wn,[a[1]||(a[1]=t("div",{class:"absolute inset-0 bg-black bg-opacity-50"},null,-1)),t("div",Zn,[a[0]||(a[0]=t("div",{class:"flex justify-center py-3"},[t("div",{class:"w-12 h-1.5 bg-gray-300 rounded-full"})],-1)),t("div",Yn,[t("h3",Jn,E(e.title),1),e.subtitle?(s(),o("p",Xn,E(e.subtitle),1)):u("",!0)]),t("div",Qn,[tt(G.$slots,"default",{},void 0,!0)]),G.$slots.footer?(s(),o("div",es,[tt(G.$slots,"footer",{},void 0,!0)])):u("",!0)])])):u("",!0)]),_:3}))}},as=Ie(ts,[["__scopeId","data-v-fd942535"]]),ns={class:"space-y-4"},ss={key:0,class:"mt-2"},os={key:1,class:"mt-2"},is={key:2,class:"mt-2"},ls={key:3,class:"mt-2"},rs={key:4,class:"mt-2"},ds={class:"text-sm font-medium text-gray-700 mb-2"},us={key:0,class:"text-red-500"},cs={key:0,class:"text-xs text-red-500"},ps=["name","value","checked"],ms={key:6,class:"space-y-2"},gs={key:0,class:"text-red-500"},vs={key:1,class:"text-xs text-red-500"},hs={key:7,class:"mt-4"},fs={class:"text-sm font-medium text-gray-700 mb-2"},bs={key:0,class:"text-red-500"},ys={key:0,class:"text-xs text-red-500"},ws={class:"flex gap-2"},xs=["disabled"],ut={__name:"RadioOptionModal",props:{show:Boolean,title:String,subtitle:String,name:String,options:{type:Array,default:()=>[]},selectedValue:String,notesValue:String,imagesValue:{type:Array,default:()=>[]},pointId:[String,Number],inspectionId:[String,Number],showTextarea:{type:Boolean,default:!0},showImageUpload:{type:Boolean,default:!0},selectedPoint:Object,point:Object},emits:["update:selectedValue","update:notesValue","update:imagesValue","close","save","hapus","saveTextarea","saveImage","saveText","saveNumber","saveAccount","saveDate"],setup(e,{emit:G}){const a=e,b=G,l=d=>b("hapus",d),c=ne(()=>a.options.find(d=>d.value===a.selectedValue)),v=ne(()=>{var i,w,A,I,D,O,j;if(a.point.input_type==="text"&&(!((i=a.notesValue)!=null&&i.trim())||a.point.settings.min_length&&a.notesValue.length<a.point.settings.min_length||a.point.settings.max_length&&a.notesValue.length>a.point.settings.max_length)||a.point.input_type==="number"&&(!((w=a.notesValue)!=null&&w.trim())||a.point.settings.min&&a.notesValue.length<a.point.settings.min||a.point.settings.max&&a.notesValue.length>a.point.settings.max)||a.point.input_type==="account"&&(!((A=a.notesValue)!=null&&A.trim())||a.point.settings.min_value&&a.notesValue.length<a.point.settings.min_value||a.point.settings.max_value&&a.notesValue.length>a.point.settings.max_value)||a.point.input_type==="date"&&(!((I=a.notesValue)!=null&&I.trim())||a.point.settings.min_date&&a.notesValue.length<a.point.settings.min_date||a.point.settings.max_date&&a.notesValue.length>a.point.settings.max_date))return!1;if(a.point.input_type==="imageTOradio"){if(a.imagesValue.length===0)return!1;const F=a.imagesValue.some(T=>T.status==="error"),H=a.imagesValue.some(T=>T.status==="uploading");if(F||H)return!1}if(a.options.length&&!a.selectedValue)return!1;const d=c.value;if(a.showTextarea&&((D=d==null?void 0:d.settings)!=null&&D.show_textarea)&&(!((O=a.notesValue)!=null&&O.trim())||d.settings.min_length&&a.notesValue.length<d.settings.min_length||d.settings.max_length&&a.notesValue.length>d.settings.max_length))return!1;if(a.showImageUpload&&((j=d==null?void 0:d.settings)!=null&&j.show_image_upload)){if(a.imagesValue.length===0||d.settings.max_files&&a.imagesValue.length>d.settings.max_files)return!1;const F=a.imagesValue.some(T=>T.status==="error"),H=a.imagesValue.some(T=>T.status==="uploading");if(F||H)return!1}return!0});return(d,i)=>(s(),we(as,{show:e.show,title:e.title,subtitle:e.subtitle,onClose:i[18]||(i[18]=w=>d.$emit("close"))},{footer:ke(()=>[e.selectedPoint?(s(),o("button",{key:0,onClick:i[15]||(i[15]=w=>l(e.pointId)),class:"flex items-center justify-center text-red-600 hover:text-red-800 mb-3"},i[20]||(i[20]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m2-3H7m5 0v3"})],-1),me(" Hapus Data ")]))):u("",!0),t("div",ws,[t("button",{type:"button",onClick:i[16]||(i[16]=w=>d.$emit("close")),class:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Batal "),t("button",{type:"button",onClick:i[17]||(i[17]=w=>d.$emit("save")),disabled:!v.value,class:"flex-1 px-4 py-2 bg-indigo-600 border border-transparent rounded-md shadow-sm text-white hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Simpan ",8,xs)])]),default:ke(()=>{var w,A,I,D,O,j,F,H,T,y,h,k,n,U,L,z,Q,te,$,f,M,ie,C,P,W,ee,se,le,re,ge;return[t("div",ns,[e.point.input_type==="text"?(s(),o("div",ss,[he(ot,{"model-value":e.notesValue,required:(w=e.point.settings)==null?void 0:w.is_required,"min-length":(A=e.point.settings)==null?void 0:A.min_length,"max-length":(I=e.point.settings)==null?void 0:I.max_length,allowSpace:(D=e.point.settings)==null?void 0:D.allow_space,textTransform:(O=e.point.settings)==null?void 0:O.text_transform,placeholder:((j=e.point.settings)==null?void 0:j.placeholder)||"Masukan text",error:d.error,"onUpdate:modelValue":i[0]||(i[0]=q=>d.$emit("update:notesValue",q)),onSave:i[1]||(i[1]=q=>d.$emit("saveText",q))},null,8,["model-value","required","min-length","max-length","allowSpace","textTransform","placeholder","error"])])):u("",!0),e.point.input_type==="number"?(s(),o("div",os,[he(it,{"model-value":e.notesValue,required:(F=e.point.settings)==null?void 0:F.is_required,min:(H=e.point.settings)==null?void 0:H.min,max:(T=e.point.settings)==null?void 0:T.max,step:((y=e.point.settings)==null?void 0:y.step)||1,placeholder:((h=e.point.settings)==null?void 0:h.placeholder)||"Masukan number",error:d.error,"onUpdate:modelValue":i[2]||(i[2]=q=>d.$emit("update:notesValue",q)),onSave:i[3]||(i[3]=q=>d.$emit("saveNumber",q))},null,8,["model-value","required","min","max","step","placeholder","error"])])):u("",!0),e.point.input_type==="account"?(s(),o("div",is,[he(rt,{"model-value":e.notesValue,required:(k=e.point.settings)==null?void 0:k.is_required,placeholder:((n=e.point.settings)==null?void 0:n.placeholder)||"Masukkan nilai",error:d.error,"point-id":e.pointId,settings:e.point.settings,"onUpdate:modelValue":i[4]||(i[4]=q=>d.$emit("update:notesValue",q)),onSave:i[5]||(i[5]=q=>d.$emit("saveAccount",q))},null,8,["model-value","required","placeholder","error","point-id","settings"])])):u("",!0),e.point.input_type==="date"?(s(),o("div",ls,[he(lt,{"model-value":e.notesValue,required:(U=e.point.settings)==null?void 0:U.is_required,"min-date":(L=e.point.settings)==null?void 0:L.min_date,"max-date":(z=e.point.settings)==null?void 0:z.max_date,error:d.error,"onUpdate:modelValue":i[6]||(i[6]=q=>d.$emit("update:notesValue",q)),onSave:i[7]||(i[7]=q=>d.$emit("saveDate",q))},null,8,["model-value","required","min-date","max-date","error"])])):u("",!0),e.point.input_type==="imageTOradio"?(s(),o("div",rs,[t("h4",ds,[(Q=e.point.settings)!=null&&Q.required?(s(),o("span",us,"*")):u("",!0)]),he(Re,{"model-value":e.imagesValue,"point-id":e.pointId,point:e.point.inspection_point,"inspection-id":e.inspectionId,settings:e.point.settings,"onUpdate:modelValue":i[8]||(i[8]=q=>d.$emit("update:imagesValue",q)),onSave:i[9]||(i[9]=q=>d.$emit("saveImage",q))},null,8,["model-value","point-id","point","inspection-id","settings"]),(te=e.point.settings)!=null&&te.required&&e.imagesValue.length===0?(s(),o("p",cs," Foto wajib diupload ")):u("",!0)])):u("",!0),e.options.length?(s(),o("div",{key:5,class:ae(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(e.options.length,3)}`])},[(s(!0),o(fe,null,ye(e.options,(q,ve)=>(s(),o("label",{key:ve,class:"cursor-pointer"},[t("input",{type:"radio",name:e.name,value:q.value,checked:e.selectedValue===q.value,onChange:i[10]||(i[10]=pe=>d.$emit("update:selectedValue",pe.target.value)),class:"hidden peer"},null,40,ps),t("div",{class:ae(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":e.selectedValue===q.value,"border-gray-300 text-gray-700 hover:bg-gray-50":e.selectedValue!==q.value}])},E(q.label),3)]))),128))],2)):u("",!0),e.showTextarea&&((f=($=c.value)==null?void 0:$.settings)!=null&&f.show_textarea)?(s(),o("div",ms,[(M=c.value.settings)!=null&&M.required?(s(),o("span",gs,"*")):u("",!0),he(dt,{"model-value":e.notesValue,"point-id":e.pointId,"inspection-id":e.inspectionId,settings:c.value.settings,required:(ie=c.value.settings)==null?void 0:ie.required,"min-length":(C=c.value.settings)==null?void 0:C.min_length,"max-length":(P=c.value.settings)==null?void 0:P.max_length,placeholder:((W=c.value.settings)==null?void 0:W.placeholder)||"Tambahkan keterangan...","onUpdate:modelValue":i[11]||(i[11]=q=>d.$emit("update:notesValue",q)),onSave:i[12]||(i[12]=q=>d.$emit("saveTextarea",q))},null,8,["model-value","point-id","inspection-id","settings","required","min-length","max-length","placeholder"]),(ee=c.value.settings)!=null&&ee.required&&!e.notesValue?(s(),o("p",vs," Keterangan wajib diisi ")):u("",!0)])):u("",!0),e.showImageUpload&&((le=(se=c.value)==null?void 0:se.settings)!=null&&le.show_image_upload)?(s(),o("div",hs,[t("h4",fs,[i[19]||(i[19]=me(" Upload Foto ")),(re=c.value.settings)!=null&&re.required?(s(),o("span",bs,"*")):u("",!0)]),he(Re,{"model-value":e.imagesValue,"point-id":e.pointId,point:e.point,"inspection-id":e.inspectionId,settings:c.value.settings,"onUpdate:modelValue":i[13]||(i[13]=q=>d.$emit("update:imagesValue",q)),onSave:i[14]||(i[14]=q=>d.$emit("saveImage",q))},null,8,["model-value","point-id","point","inspection-id","settings"]),(ge=c.value.settings)!=null&&ge.required&&e.imagesValue.length===0?(s(),o("p",ys," Foto wajib diupload ")):u("",!0)])):u("",!0)])]}),_:1},8,["show","title","subtitle"]))}},ks={class:"mt-2 space-y-2"},Is=["name","value","checked","onChange","required"],As={key:0,class:"p-2 rounded-lg bg-gray-50"},$s={key:0,class:"mt-2"},Ss={class:"flex gap-2 overflow-x-auto",style:{"scrollbar-width":"none"}},Ns=["src"],Ts={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},_s={key:1,class:"mt-2"},Cs={class:"text-sm text-gray-600"},Es={key:2,class:"mt-2 text-sm text-red-600"},Vs={__name:"InputRadio",props:{modelValue:String,required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(e,{emit:G}){const a=e,b=G,l=N(a.notes),c=N([...a.images]),v=N(!1),d=N(""),i=N([]),w=N(""),A=N([]),I=ne(()=>a.options.find(n=>n.value===a.modelValue)),D=n=>n.settings&&(n.settings.show_textarea||n.settings.show_image_upload);be(()=>a.notes,n=>{l.value=n}),be(()=>a.images,n=>{c.value=[...n]}),be(()=>a.modelValue,n=>{n&&(w.value=n)});const O=n=>{b("update:modelValue",n.value),D(n)?F():b("save",{pointId:a.pointId,inspectionId:a.inspectionId,value:n.value,notes:"",images:[]})},j=n=>n.preview||(n.image_path?`/${n.image_path}`:n),F=()=>{w.value=a.modelValue,d.value=l.value,i.value=[...c.value],A.value=[...c.value],v.value=!0},H=()=>{d.value="",i.value=[],w.value="",v.value=!1},T=n=>{i.value=n,c.value=[...n],b("update:images",[...n]),b("save",{pointId:a.pointId,inspectionId:a.inspectionId,value:a.modelValue,notes:l.value,images:[...n]})},y=n=>{},h=()=>{w.value!==a.modelValue&&b("update:modelValue",w.value),l.value=d.value,b("update:notes",d.value),c.value=[...i.value],b("update:images",[...i.value]),b("save",{pointId:a.pointId,inspectionId:a.inspectionId,value:w.value,notes:d.value,images:i.value}),v.value=!1},k=n=>{w.value="",d.value="",i.value=[],l.value="",c.value=[],b("update:modelValue",""),b("update:notes",""),b("update:images",[]),b("hapus",n),v.value=!1};return(n,U)=>{var L,z,Q,te;return s(),o("div",ks,[t("div",{class:ae(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(e.options.length,3)}`])},[(s(!0),o(fe,null,ye(e.options,($,f)=>(s(),o("label",{key:f,class:"cursor-pointer"},[t("input",{type:"radio",name:"radio-"+e.pointId,value:$.value,checked:e.modelValue===$.value,onChange:M=>O($),class:"hidden peer",required:e.required},null,40,Is),t("div",{class:ae(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":e.modelValue===$.value,"border-gray-300 text-gray-700 hover:bg-gray-50":e.modelValue!==$.value}])},E($.label),3)]))),128))],2),e.modelValue&&I.value&&D(I.value)?(s(),o("div",As,[t("div",{class:"flex justify-between items-start"},[U[4]||(U[4]=t("h4",{class:"text-sm font-medium text-gray-700"},"Detail : ",-1)),t("button",{onClick:F,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),e.images.length>0&&((L=I.value.settings)!=null&&L.show_image_upload)?(s(),o("div",$s,[t("div",Ss,[(s(!0),o(fe,null,ye(e.images,($,f)=>(s(),o("div",{key:f,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[t("img",{src:j($),class:"w-full h-full object-cover rounded"},null,8,Ns),f===3&&e.images.length>4?(s(),o("span",Ts," +"+E(e.images.length-4),1)):u("",!0)]))),128))])])):u("",!0),e.notes&&((z=I.value.settings)!=null&&z.show_textarea)?(s(),o("div",_s,[t("p",Cs,E(e.notes),1)])):u("",!0)])):u("",!0),v.value?(s(),we(ut,{key:(Q=e.selectedPoint)==null?void 0:Q.id,show:v.value,title:e.pointName||"Detail",subtitle:(te=I.value)==null?void 0:te.description,name:"modal-radio-"+e.pointId,options:e.options,"selected-value":w.value,"notes-value":d.value,"images-value":i.value,"point-id":e.pointId,point:e.point,"inspection-id":e.inspectionId,"selected-point":e.selectedPoint,"onUpdate:selectedValue":U[0]||(U[0]=$=>w.value=$),"onUpdate:notesValue":U[1]||(U[1]=$=>d.value=$),"onUpdate:imagesValue":U[2]||(U[2]=$=>T($)),onClose:H,onSave:h,onSaveTextarea:n.handleTextareaSave,onSaveImage:y,onHapus:U[3]||(U[3]=$=>k(e.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point","onSaveTextarea"])):u("",!0),e.error?(s(),o("p",Es,E(e.error),1)):u("",!0)])}}},Ms={class:"mt-2 space-y-2"},Rs={key:0,class:"flex flex-wrap gap-3"},Us={key:1,class:"p-2"},Ps={key:0,class:"mt-2"},Ds={class:"flex gap-2 overflow-x-auto scrollbar-hide"},Bs=["src"],Ls={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},js=["name","value","checked"],Os={key:1,class:"mt-2"},qs={class:"text-sm text-gray-600"},Fs={key:3,class:"mt-2 text-sm text-red-600"},Hs={__name:"InputImageToRadio",props:{modelValue:String,required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(e,{emit:G}){const a=e,b=G,l=N(a.notes),c=N([...a.images]),v=N(!1),d=N(""),i=N([]),w=N(""),A=N([]),I=ne(()=>a.options.find(y=>y.value===a.modelValue)),D=y=>y.preview||(y.image_path?`/${y.image_path}`:y);be(()=>a.notes,y=>{l.value=y});const O=()=>{w.value=a.modelValue||"",d.value=l.value,i.value=[...c.value],A.value=[...c.value],v.value=!0},j=()=>{d.value="",i.value=[],w.value="",v.value=!1},F=y=>{i.value=y,c.value=[...y],b("update:images",[...y]),b("save",{pointId:a.pointId,inspectionId:a.inspectionId,value:a.modelValue,notes:l.value,images:[...y]})},H=()=>{w.value!==a.modelValue&&b("update:modelValue",w.value),l.value=d.value,b("update:notes",d.value),c.value=[...i.value],b("update:images",[...i.value]),b("save",{pointId:a.pointId,inspectionId:a.inspectionId,value:w.value,notes:d.value,images:i.value}),v.value=!1},T=y=>{w.value="",d.value="",i.value=[],l.value="",c.value=[],b("update:modelValue",""),b("update:notes",""),b("update:images",[]),b("hapus",y),v.value=!1};return(y,h)=>{var k,n,U;return s(),o("div",Ms,[!e.modelValue&&c.value.length===0&&!l.value?(s(),o("div",Rs,[t("div",{class:"relative w-28 h-28 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer overflow-hidden",onClick:O},h[4]||(h[4]=[t("div",{class:"flex flex-col items-center text-gray-400"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),t("span",{class:"text-xs font-medium"},"Tambah")],-1)]))])):(s(),o("div",Us,[t("div",{class:"flex justify-between items-start"},[h[5]||(h[5]=t("h4",{class:"text-sm font-medium text-gray-700"},"Detail :",-1)),t("button",{onClick:O,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),c.value.length>0?(s(),o("div",Ps,[t("div",Ds,[(s(!0),o(fe,null,ye(c.value,(L,z)=>(s(),o("div",{key:z,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[t("img",{src:D(L),class:"w-full h-full object-cover rounded"},null,8,Bs),z===3&&c.value.length>4?(s(),o("span",Ls," +"+E(c.value.length-4),1)):u("",!0)]))),128))])])):u("",!0),t("div",{class:ae(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(e.options.length,3)}`])},[(s(!0),o(fe,null,ye(e.options,(L,z)=>(s(),o("label",{key:z,class:"cursor-pointer"},[t("input",{type:"radio",name:"radio-"+e.pointId,value:L.value,checked:e.modelValue===L.value,disabled:!0,class:"hidden peer"},null,8,js),t("div",{class:ae(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":e.modelValue===L.value,"border-gray-300 text-gray-700 hover:bg-gray-50":e.modelValue!==L.value}])},E(L.label),3)]))),128))],2),l.value&&((k=I.value.settings)!=null&&k.show_textarea)?(s(),o("div",Os,[t("p",qs,E(l.value),1)])):u("",!0)])),v.value?(s(),we(ut,{key:(n=e.selectedPoint)==null?void 0:n.id,show:v.value,title:e.pointName||"Detail",subtitle:(U=I.value)==null?void 0:U.description,name:"modal-radio-"+e.pointId,options:e.options,"selected-value":w.value,"notes-value":d.value,"images-value":i.value,"point-id":e.pointId,point:e.point,"inspection-id":e.inspectionId,"selected-point":e.selectedPoint,"onUpdate:selectedValue":h[0]||(h[0]=L=>w.value=L),"onUpdate:notesValue":h[1]||(h[1]=L=>d.value=L),"onUpdate:imagesValue":h[2]||(h[2]=L=>F(L)),onClose:j,onSave:H,onHapus:h[3]||(h[3]=L=>T(e.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point"])):u("",!0),e.error?(s(),o("p",Fs,E(e.error),1)):u("",!0)])}}},Ks={class:"text-base font-semibold text-indigo-700"},Gs={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},zs={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ws={class:"text-base font-semibold text-indigo-700"},Zs={class:"p-4 space-y-4"},Ys={key:0,class:"flex justify-end py-1"},Js=["onClick"],Xs={key:1,class:"space-y-2"},Qs={class:"flex items-start justify-between"},eo={class:"block text-sm font-medium text-gray-700"},to={key:0,class:"text-red-500"},ao={key:1,class:"italic text-xs text-gray-400 ml-2"},no={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},so={key:0,class:"text-center py-8 text-gray-500"},oo={key:0,class:"text-xs text-gray-400"},io={__name:"CategorySection",props:{category:Object,form:Object,head:Object,inspectionId:String,selectedPoint:Object},emits:["saveResult","updateResult","removeImage","hapusPoint"],setup(e,{emit:G}){const a=e,b=G,l=N(!1),c=N([]),v=gt(),d=N(!0),i=N(null);Te(()=>{const h=new IntersectionObserver(([k])=>{d.value=k.isIntersecting},{threshold:.1});i.value&&h.observe(i.value),Ee(()=>{i.value&&h.unobserve(i.value)})});const w=()=>{l.value=!l.value,(l.value||!l.value)&&(c.value=[])},A=ne(()=>(a.category.points||[]).some(h=>h.is_default===!1)),I=ne(()=>{const h=a.category.points||[],k=[];let n=[];return l.value?a.category.isDamageMenu?h.filter(U=>{var L;return U.is_default||O((L=U.inspection_point)==null?void 0:L.id)||l.value}):h:a.category.isDamageMenu?h.filter(U=>{var z;const L=(z=U.inspection_point)==null?void 0:z.id;return O(L)||U.is_default||c.value.includes(L)}):(h.forEach(U=>{var $;const L=($=U.inspection_point)==null?void 0:$.id,z=O(L),Q=c.value.includes(L);U.is_default||z||Q?(n.length>0&&(k.push({is_link:!0,count:n.length,hiddenIds:n.map(f=>f.inspection_point.id)}),n.forEach(f=>{c.value.includes(f.inspection_point.id)&&k.push(f)}),n=[]),k.push(U)):n.push(U)}),n.length>0&&(k.push({is_link:!0,count:n.length,hiddenIds:n.map(U=>U.inspection_point.id)}),n.forEach(U=>{c.value.includes(U.inspection_point.id)&&k.push(U)})),k.filter(U=>{var L,z;return U.is_link||U.is_default||O((L=U.inspection_point)==null?void 0:L.id)||c.value.includes((z=U.inspection_point)==null?void 0:z.id)}))});ne(()=>I.value.filter(h=>!h.is_link));const D=h=>{l.value=!1,h.forEach(k=>{c.value.includes(k)||c.value.push(k)})},O=h=>{if(!h)return!1;const k=v.props.existingResults[h]!==void 0,n=v.props.existingImages[h]&&v.props.existingImages[h].length>0,U=a.form.results[h]&&(a.form.results[h].status||a.form.results[h].note),L=a.form.images[h]&&a.form.images[h].length>0;return k||n||U||L},j=[{value:"good",label:"Good"},{value:"bad",label:"Bad"},{value:"na",label:"N/A"}],F=h=>{var U,L,z,Q,te,$,f,M,ie;const k=a.form.results[(U=h.inspection_point)==null?void 0:U.id],n=a.form.images[(L=h.inspection_point)==null?void 0:L.id];if(!k)return!1;switch(h.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!k.note;case"select":case"radio":if(!k.status)return!1;const C=(Q=(z=h.settings)==null?void 0:z.radios)==null?void 0:Q.find(W=>W.value===k.status);return!(C!=null&&C.settings&&(C.settings.show_textarea&&!((te=k.note)!=null&&te.trim())||C.settings.show_image_upload&&(n==null?void 0:n.length)===0));case"imageTOradio":if((n==null?void 0:n.length)===0||!k.status)return!1;const P=(f=($=h.settings)==null?void 0:$.radios)==null?void 0:f.find(W=>W.value===k.status);return!(P!=null&&P.settings&&P.settings.show_textarea&&!((M=k.note)!=null&&M.trim()));case"image":return(n==null?void 0:n.length)>0;default:return!!k.status||!!((ie=k.note)!=null&&ie.trim())}};be(()=>a.form.results,h=>{},{deep:!0}),be(()=>a.form.images,h=>{},{deep:!0});const H=(h,k,n)=>{b("updateResult",{pointId:h,type:n,value:k})},T=h=>{b("saveResult",h)},y=h=>{b("hapusPoint",h)};return(h,k)=>(s(),o(fe,null,[a.head==="vertical"?(s(),o("div",{key:0,class:ae(["px-6 py-2 border-b flex items-center justify-between bg-indigo-200","fixed top-0 left-0 right-0 z-20"])},[t("h4",Ks,E(e.category.name),1),A.value?(s(),o("button",{key:0,onClick:w,class:"text-sm text-indigo-700 hover:underline focus:outline-none"},E(l.value?"Sembunyikan Semua":"Tampilkan Point Lain"),1)):u("",!0)])):u("",!0),t("div",{class:ae(["bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100",a.head==="vertical"?"pt-6":""])},[!d.value&&A.value?(s(),o("button",{key:0,onClick:w,class:"fixed top-3 right-2 z-50 bg-indigo-600 text-white p-2 rounded-full shadow-lg"},[l.value?(s(),o("svg",Gs,k[0]||(k[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(s(),o("svg",zs,k[1]||(k[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.956 9.956 0 012.006-3.362M9.88 9.88a3 3 0 104.24 4.24M6.1 6.1l11.8 11.8"},null,-1)])))])):u("",!0),a.head==="horizontal"?(s(),o("div",{key:1,ref_key:"categoryHeader",ref:i,class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[t("h4",Ws,E(e.category.name),1),A.value?(s(),o("button",{key:0,onClick:w,class:"text-sm text-indigo-700 hover:underline focus:outline-none"},E(l.value?"Sembunyikan":"Tampilkan Point Lain"),1)):u("",!0)],512)):u("",!0),t("div",Zs,[(s(!0),o(fe,null,ye(I.value,(n,U)=>{var L,z,Q,te,$,f,M,ie,C,P,W,ee,se,le,re,ge,q,ve,pe,r,S,m,_,V,J,Z,Y,K,x,g,X,B,oe,de,ue,ce,Se,Ue,Pe,De,Be,Le,je,Oe,qe,Fe,He,Ke,Ge,ze,We,Ze,Ye,Je,Xe,Qe,et;return s(),o("div",{key:U,class:ae(["space-y-2 last:border-0 last:pb-0",n.is_link?"pb-0":"pb-2 border-b border-gray-100"])},[n.is_link?(s(),o("div",Ys,[t("button",{onClick:R=>D(n.hiddenIds),class:"text-sm font-medium text-indigo-600 hover:text-indigo-800 hover:underline focus:outline-none"}," Tampilkan "+E(n.count)+" Point Tersembunyi ",9,Js)])):(s(),o("div",Xs,[t("div",Qs,[t("label",eo,[me(E((L=n.inspection_point)==null?void 0:L.name)+" ",1),(z=n.settings)!=null&&z.is_required?(s(),o("span",to,"*")):u("",!0),!n.is_default&&!O((Q=n.inspection_point)==null?void 0:Q.id)?(s(),o("span",ao," (opsional) ")):u("",!0)]),F(n)?(s(),o("span",no," ✓ ")):u("",!0)]),n.input_type==="text"?(s(),we(ot,{key:0,modelValue:e.form.results[(te=n.inspection_point)==null?void 0:te.id].note,"onUpdate:modelValue":[R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].note=R},R=>{var p;return H((p=n.inspection_point)==null?void 0:p.id,R,"note")}],required:($=n.settings)==null?void 0:$.is_required,"min-length":(f=n.settings)==null?void 0:f.min_length,"max-length":(M=n.settings)==null?void 0:M.max_length,allowSpace:(ie=n.settings)==null?void 0:ie.allow_space,textTransform:(C=n.settings)==null?void 0:C.text_transform,placeholder:((P=n.settings)==null?void 0:P.placeholder)||"Masukan text",error:e.form.errors[`results.${(W=n.inspection_point)==null?void 0:W.id}.note`],onSave:R=>{var p;return T((p=n.inspection_point)==null?void 0:p.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","allowSpace","textTransform","placeholder","error","onSave"])):u("",!0),n.input_type==="number"?(s(),we(it,{key:1,modelValue:e.form.results[(ee=n.inspection_point)==null?void 0:ee.id].note,"onUpdate:modelValue":[R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].note=R},R=>{var p;return H((p=n.inspection_point)==null?void 0:p.id,R,"note")}],required:(se=n.settings)==null?void 0:se.is_required,min:(le=n.settings)==null?void 0:le.min,max:(re=n.settings)==null?void 0:re.max,step:((ge=n.settings)==null?void 0:ge.step)||1,placeholder:((q=n.settings)==null?void 0:q.placeholder)||"Masukan number",error:e.form.errors[`results.${(ve=n.inspection_point)==null?void 0:ve.id}.note`],onSave:R=>{var p;return T((p=n.inspection_point)==null?void 0:p.id)}},null,8,["modelValue","onUpdate:modelValue","required","min","max","step","placeholder","error","onSave"])):u("",!0),n.input_type==="account"?(s(),we(rt,{key:2,modelValue:e.form.results[(pe=n.inspection_point)==null?void 0:pe.id].note,"onUpdate:modelValue":[R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].note=R},R=>{var p;return H((p=n.inspection_point)==null?void 0:p.id,R,"note")}],required:(r=n.settings)==null?void 0:r.is_required,placeholder:((S=n.settings)==null?void 0:S.placeholder)||"Masukkan nilai",error:e.form.errors[`results.${(m=n.inspection_point)==null?void 0:m.id}.note`],"point-id":(_=n.inspection_point)==null?void 0:_.id,settings:n.settings,onSave:R=>{var p;return T((p=n.inspection_point)==null?void 0:p.id)}},null,8,["modelValue","onUpdate:modelValue","required","placeholder","error","point-id","settings","onSave"])):u("",!0),n.input_type==="date"?(s(),we(lt,{key:3,modelValue:e.form.results[(V=n.inspection_point)==null?void 0:V.id].note,"onUpdate:modelValue":[R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].note=R},R=>{var p;return H((p=n.inspection_point)==null?void 0:p.id,R,"note")}],required:(J=n.settings)==null?void 0:J.is_required,"min-date":(Z=n.settings)==null?void 0:Z.min_date,"max-date":(Y=n.settings)==null?void 0:Y.max_date,error:e.form.errors[`results.${(K=n.inspection_point)==null?void 0:K.id}.note`],onSave:R=>{var p;return T((p=n.inspection_point)==null?void 0:p.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-date","max-date","error","onSave"])):u("",!0),n.input_type==="textarea"?(s(),we(dt,{key:4,modelValue:e.form.results[(x=n.inspection_point)==null?void 0:x.id].note,"onUpdate:modelValue":[R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].note=R},R=>{var p;return H((p=n.inspection_point)==null?void 0:p.id,R,"note")}],required:(g=n.settings)==null?void 0:g.is_required,"min-length":(X=n.settings)==null?void 0:X.min_length,"max-length":(B=n.settings)==null?void 0:B.max_length,placeholder:((oe=n.settings)==null?void 0:oe.placeholder)||"Masukkan teks di sini",settings:n.settings,error:e.form.errors[`results.${(de=n.inspection_point)==null?void 0:de.id}.note`],onSave:R=>{var p;return T((p=n.inspection_point)==null?void 0:p.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","placeholder","settings","error","onSave"])):u("",!0),n.input_type==="radio"?(s(),we(Vs,{key:5,modelValue:e.form.results[(ue=n.inspection_point)==null?void 0:ue.id].status,"onUpdate:modelValue":[R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].status=R},R=>{var p;return H((p=n.inspection_point)==null?void 0:p.id,R,"status")}],notes:e.form.results[(ce=n.inspection_point)==null?void 0:ce.id].note,images:e.form.images[(Se=n.inspection_point)==null?void 0:Se.id],required:(Ue=n.settings)==null?void 0:Ue.is_required,"point-id":(Pe=n.inspection_point)==null?void 0:Pe.id,point:n.inspection_point,"inspection-id":e.inspectionId,settings:n.settings,"point-name":(De=n.inspection_point)==null?void 0:De.name,"selected-point":n.inspection_point??null,options:((Be=n.settings)==null?void 0:Be.radios)||j,error:e.form.errors[`results.${(Le=n.inspection_point)==null?void 0:Le.id}.status`],"onUpdate:notes":R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].note=R},"onUpdate:images":R=>{var p;return e.form.images[(p=n.inspection_point)==null?void 0:p.id]=R},onSave:R=>{var p;return T((p=n.inspection_point)==null?void 0:p.id)},onHapus:R=>{var p;return y((p=n.inspection_point)==null?void 0:p.id)}},null,8,["modelValue","onUpdate:modelValue","notes","images","required","point-id","point","inspection-id","settings","point-name","selected-point","options","error","onUpdate:notes","onUpdate:images","onSave","onHapus"])):u("",!0),n.input_type==="imageTOradio"?(s(),we(Hs,{key:6,modelValue:e.form.results[(je=n.inspection_point)==null?void 0:je.id].status,"onUpdate:modelValue":[R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].status=R},R=>{var p;return H((p=n.inspection_point)==null?void 0:p.id,R,"status")}],notes:e.form.results[(Oe=n.inspection_point)==null?void 0:Oe.id].note,images:e.form.images[(qe=n.inspection_point)==null?void 0:qe.id],required:(Fe=n.settings)==null?void 0:Fe.is_required,"point-id":(He=n.inspection_point)==null?void 0:He.id,"inspection-id":e.inspectionId,settings:n.settings,"point-name":(Ke=n.inspection_point)==null?void 0:Ke.name,point:n,"selected-point":n.inspection_point??null,options:((Ge=n.settings)==null?void 0:Ge.radios)||j,error:e.form.errors[`results.${(ze=n.inspection_point)==null?void 0:ze.id}.status`],"onUpdate:notes":R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].note=R},"onUpdate:images":R=>{var p;return e.form.images[(p=n.inspection_point)==null?void 0:p.id]=R},onSave:R=>{var p;return T((p=n.inspection_point)==null?void 0:p.id)},onHapus:R=>{var p;return y((p=n.inspection_point)==null?void 0:p.id)}},null,8,["modelValue","onUpdate:modelValue","notes","images","required","point-id","inspection-id","settings","point-name","point","selected-point","options","error","onUpdate:notes","onUpdate:images","onSave","onHapus"])):u("",!0),n.input_type==="image"?(s(),we(Re,{key:7,modelValue:e.form.images[(We=n.inspection_point)==null?void 0:We.id],"onUpdate:modelValue":R=>{var p;return e.form.images[(p=n.inspection_point)==null?void 0:p.id]=R},error:e.form.errors[`images.${(Ze=n.inspection_point)==null?void 0:Ze.id}`],"inspection-id":e.inspectionId,"point-id":(Ye=n.inspection_point)==null?void 0:Ye.id,point:n.inspection_point,"point-name":(Je=n.inspection_point)==null?void 0:Je.name,settings:n.settings,"onUpdate:notes":R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].note=R},"onUpdate:status":R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].status=R}},null,8,["modelValue","onUpdate:modelValue","error","inspection-id","point-id","point","point-name","settings","onUpdate:notes","onUpdate:status"])):u("",!0),n.input_type==="select"?(s(),we(ka,{key:8,modelValue:e.form.results[(Xe=n.inspection_point)==null?void 0:Xe.id].status,"onUpdate:modelValue":[R=>{var p;return e.form.results[(p=n.inspection_point)==null?void 0:p.id].status=R},R=>{var p;return H((p=n.inspection_point)==null?void 0:p.id,R,"status")}],required:(Qe=n.settings)==null?void 0:Qe.is_required,error:e.form.errors[`results.${(et=n.inspection_point)==null?void 0:et.id}.status`],onSave:R=>{var p;return T((p=n.inspection_point)==null?void 0:p.id)}},null,8,["modelValue","onUpdate:modelValue","required","error","onSave"])):u("",!0)]))],2)}),128)),I.value.filter(n=>!n.is_link).length===0?(s(),o("div",so,[k[2]||(k[2]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),k[3]||(k[3]=t("p",{class:"mt-2 text-sm"},"Tidak ada data untuk ditampilkan",-1)),e.category.isDamageMenu?(s(),o("p",oo,' Tambahkan data melalui tombol "+" di pojok kanan bawah ')):u("",!0)])):u("",!0)])],2)],64))}},Bo=Ie(io,[["__scopeId","data-v-8d6b6d57"]]),lo={class:"bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100"},ro={class:"p-4 space-y-4-6"},uo={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},co=["value"],po={class:"p-4 space-y-4-6"},mo={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},go=["value"],vo={key:0,class:"p-4 space-y-4 bg-blue-50 rounded-lg border border-blue-200"},ho={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},fo=["value"],bo={class:"p-4 space-y-2"},yo={class:"flex items-center justify-between mb-2"},wo={key:0,class:"mb-4 p-4 bg-white border border-gray-200 rounded-lg shadow-lg"},xo={class:"flex items-center justify-between mb-3"},ko={class:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto"},Io=["onClick"],Ao={class:"text-sm font-medium text-gray-800 mb-1"},$o={class:"text-xs text-gray-600 line-clamp-2"},So={class:"flex flex-wrap gap-1 mb-2 p-2 bg-gray-100 rounded-md"},No={key:0,class:"text-xs text-gray-500 mb-2 bg-gray-50 p-2 rounded border"},To={key:0,class:"font-bold mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},_o={key:1,class:"italic mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},Co={key:2,class:"underline mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},Eo={__name:"ConclusionSection",props:{inspectionId:{type:Number,required:!0},inspection:{type:Object,required:!0},form:{type:Object,required:!0}},emits:["updateConclusion"],setup(e,{emit:G}){const a=e,b=G,l=N(null),c=N(!1),v=N(!1),d=at({bold:!1,italic:!1,underline:!1}),i=at({flooded:"",collision:"",collision_severity:"",notes:""}),w=N([{id:1,name:"Kendaraan Normal",description:"Template untuk kendaraan dalam kondisi normal tanpa masalah signifikan (Ringkas)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kondisi kendaraan secara umum: <strong>BAIK</strong><br>
- Tidak ditemukan indikasi kerusakan signifikan<br>
- Semua sistem berfungsi dengan normal<br>
- Rekomendasi: Perawatan rutin sesuai jadwal

<p><strong>B. HAL PENTING SEBELUM PEMBAYARAN:</strong></p>
- Untuk menghindari kemungkinan yang terjadi di luar inspeksi (misalnya bunyi tidak wajar, fungsi elektrikal, lampu indikator, dan fitur penunjang ADAS/Cruise Control/dll.), **DIWAJIBKAN** untuk melakukan **Test Drive Terlebih Dahulu** sebelum pembayaran/transaksi.<br>
- Pastikan knalpot **Tidak Berasap** (khusus untuk mobil bensin).`},{id:2,name:"Kendaraan Bekas Tabrakan Ringan",description:"Template untuk kendaraan dengan riwayat tabrakan ringan (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kendaraan memiliki riwayat tabrakan dengan tingkat kerusakan: <strong>RINGAN</strong><br>
- Area yang terdampak: {DAMAGED_AREA}<br>
- Perbaikan yang dilakukan: {REPAIR_DETAILS}<br>
- Rekomendasi: Perbaikan tambahan pada area yang terdampak

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- {REPAIR_SHORT_TERM}<br>
- Estimasi Biaya: {REPAIR_COST_SHORT_TERM}
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- {REPAIR_LONG_TERM}<br>
- Estimasi Biaya: {REPAIR_COST_LONG_TERM}
<p><em>Not: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>

<p><strong>B. HAL PENTING SEBELUM PEMBAYARAN:</strong></p>
- Untuk menghindari kemungkinan yang terjadi di luar inspeksi (misalnya bunyi tidak wajar, fungsi elektrikal, lampu indikator, dan fitur penunjang ADAS/Cruise Control/dll.), **DIWAJIBKAN** untuk melakukan **Test Drive Terlebih Dahulu** sebelum pembayaran/transaksi.<br>
- Pastikan knalpot **Tidak Berasap** (khusus untuk mobil bensin).`},{id:3,name:"Kendaraan Bekas Banjir",description:"Template untuk kendaraan dengan riwayat terkena banjir (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kendaraan memiliki riwayat terkena banjir<br>
- Tingkat paparan air: {WATER_LEVEL}<br>
- Komponen yang terdampak: {AFFECTED_COMPONENTS}<br>
- Rekomendasi: Pengecekan sistem elektrik dan interior secara berkala

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- {REPAIR_SHORT_TERM}<br>
- Estimasi Biaya: {REPAIR_COST_SHORT_TERM}
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- {REPAIR_LONG_TERM}<br>
- Estimasi Biaya: {REPAIR_COST_LONG_TERM}
<p><em>Not: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>

<p><strong>B. HAL PENTING SEBELUM PEMBAYARAN:</strong></p>
- Untuk menghindari kemungkinan yang terjadi di luar inspeksi (misalnya bunyi tidak wajar, fungsi elektrikal, lampu indikator, dan fitur penunjang ADAS/Cruise Control/dll.), **DIWAJIBKAN** untuk melakukan **Test Drive Terlebih Dahulu** sebelum pembayaran/transaksi.<br>
- Pastikan knalpot **Tidak Berasap** (khusus untuk mobil bensin).`},{id:4,name:"Kendaraan dengan Multiple Issues",description:"Template untuk kendaraan dengan beberapa masalah umum (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kondisi umum kendaraan: {OVERALL_CONDITION}<br>
- Masalah utama yang ditemukan: {MAIN_ISSUES}<br>
- Komponen yang perlu perhatian: {ATTENTION_NEEDED}<br>
- Status Tabrak/Banjir: {ACCIDENT_FLOOD_STATUS}<br>
- Rekomendasi: {RECOMMENDATION}

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- {REPAIR_SHORT_TERM}<br>
- Estimasi Biaya: {REPAIR_COST_SHORT_TERM}
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- {REPAIR_LONG_TERM}<br>
- Estimasi Biaya: {REPAIR_COST_LONG_TERM}
<p><em>Not: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>

<p><strong>B. HAL PENTING SEBELUM PEMBAYARAN:</strong></p>
- Untuk menghindari kemungkinan yang terjadi di luar inspeksi (misalnya bunyi tidak wajar, fungsi elektrikal, lampu indikator, dan fitur penunjang ADAS/Cruise Control/dll.), **DIWAJIBKAN** untuk melakukan **Test Drive Terlebih Dahulu** sebelum pembayaran/transaksi.<br>
- Pastikan knalpot **Tidak Berasap** (khusus untuk mobil bensin).`},{id:5,name:"Template Singkat",description:"Template ringkas untuk kesimpulan cepat (Ringkas)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Status Keseluruhan Kendaraan: {OVERALL_STATUS}<br>
- Catatan Utama: {ADDITIONAL_NOTES}<br>
- Status Tabrak/Banjir: {ACCIDENT_FLOOD_STATUS}

<p><strong>B. HAL PENTING SEBELUM PEMBAYARAN:</strong></p>
- Untuk menghindari kemungkinan yang terjadi di luar inspeksi (misalnya bunyi tidak wajar, fungsi elektrikal, lampu indikator, dan fitur penunjang ADAS/Cruise Control/dll.), **DIWAJIBKAN** untuk melakukan **Test Drive Terlebih Dahulu** sebelum pembayaran/transaksi.<br>
- Pastikan knalpot **Tidak Berasap** (khusus untuk mobil bensin).`},{id:6,name:"Template Teknis Detail",description:"Template detail untuk laporan teknis lengkap (Lengkap A, C, B)",content:`<p><strong>A. LAPORAN HASIL INSPEKSI TEKNIS:</strong></p>
- Tanggal Inspeksi: {INSPECTION_DATE}<br>
- Kondisi Mesin: {ENGINE_CONDITION}<br>
- Kondisi Transmisi: {TRANSMISSION_CONDITION}<br>
- Kondisi Suspensi: {SUSPENSION_CONDITION}<br>
- Kondisi Rem: {BRAKE_CONDITION}<br>
- Kondisi Body: {BODY_CONDITION}<br>
- Kondisi Interior: {INTERIOR_CONDITION}<br>
- Kesimpulan Akhir: {FINAL_CONCLUSION}

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- {REPAIR_SHORT_TERM}<br>
- Estimasi Biaya: {REPAIR_COST_SHORT_TERM}
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- {REPAIR_LONG_TERM}<br>
- Estimasi Biaya: {REPAIR_COST_LONG_TERM}
<p><em>Not: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>

<p><strong>B. HAL PENTING SEBELUM PEMBAYARAN:</strong></p>
- Untuk menghindari kemungkinan yang terjadi di luar inspeksi (misalnya bunyi tidak wajar, fungsi elektrikal, lampu indikator, dan fitur penunjang ADAS/Cruise Control/dll.), **DIWAJIBKAN** untuk melakukan **Test Drive Terlebih Dahulu** sebelum pembayaran/transaksi.<br>
- Pastikan knalpot **Tidak Berasap** (khusus untuk mobil bensin).`}]);N(["{PLATE_NUMBER}","{CAR_NAME}","{INSPECTION_DATE}","{DAMAGED_AREA}","{REPAIR_DETAILS}","{WATER_LEVEL}","{AFFECTED_COMPONENTS}","{OVERALL_CONDITION}","{MAIN_ISSUES}","{ATTENTION_NEEDED}","{REPAIR_COST_ESTIMATE}","{RECOMMENDATION}","{OVERALL_STATUS}","{ADDITIONAL_NOTES}","{ENGINE_CONDITION}","{TRANSMISSION_CONDITION}","{SUSPENSION_CONDITION}","{BRAKE_CONDITION}","{BODY_CONDITION}","{INTERIOR_CONDITION}","{FINAL_CONCLUSION}"]);const A=$=>{if(!$)return{};if(typeof $=="string")try{return JSON.parse($)||{}}catch(f){return console.error("Error parsing settings JSON:",f),{}}return typeof $=="object"&&$!==null?$:{}};ne(()=>A(a.inspection.settings).conclusion||{});const I=[{value:"yes",label:"Ya"},{value:"no",label:"Tidak"}],D=[{value:"yes",label:"Ya"},{value:"no",label:"Tidak"}],O=[{value:"light",label:"Ringan"},{value:"heavy",label:"Berat"}];Te(()=>{F(),nt(()=>{j(),y()})});const j=()=>{l.value&&i.notes&&(l.value.innerHTML=i.notes)},F=()=>{const f=A(a.inspection.settings).conclusion||{},M=a.form.conclusion||{};i.flooded=M.flooded||f.flooded||"",i.collision=M.collision||f.collision||"",i.collision_severity=M.collision_severity||f.collision_severity||"",i.notes=M.notes||a.inspection.notes||""},H=$=>{if(!l.value)return;let f=$.content;f=f.replace(/{PLATE_NUMBER}/g,a.inspection.plate_number||"[NOMOR_PLAT]").replace(/{CAR_NAME}/g,a.inspection.car_name||"[NAMA_MOBIL]").replace(/{INSPECTION_DATE}/g,new Date().toLocaleDateString("id-ID")).replace(/{FLOOD_STATUS}/g,i.flooded==="yes"?"Pernah terkena banjir":"Tidak pernah terkena banjir").replace(/{COLLISION_STATUS}/g,i.collision==="yes"?"Pernah mengalami tabrakan":"Tidak pernah mengalami tabrakan"),l.value.innerHTML=f,i.notes=f,v.value=!1,nt(()=>{l.value.focus(),te()})},T=()=>{l.value&&(l.value.innerHTML="",i.notes="",te())},y=()=>{if(!l.value)return;const $=window.getSelection();$.rangeCount===0||$.isCollapsed||(d.bold=document.queryCommandState("bold"),d.italic=document.queryCommandState("italic"),d.underline=document.queryCommandState("underline"))},h=$=>{if(!l.value)return;l.value.focus();const f=d[$];switch($){case"bold":document.execCommand("bold",!1,!f);break;case"italic":document.execCommand("italic",!1,!f);break;case"underline":document.execCommand("underline",!1,!f);break}setTimeout(()=>{y(),k()},10)},k=st.debounce(()=>{l.value&&(i.notes=l.value.innerHTML,te())},200),n=$=>{$.preventDefault(),document.execCommand("insertParagraph",!1,null)},U=$=>{$.preventDefault();const f=($.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertText",!1,f)},L=()=>{c.value=!0},z=()=>{c.value=!1,l.value&&(i.notes=l.value.innerHTML,te())},Q=()=>{te()},te=()=>{const $={flooded:i.flooded,collision:i.collision,collision_severity:i.collision==="yes"?i.collision_severity:null,notes:i.notes};b("updateConclusion",$)};return be(()=>a.form.conclusion,$=>{$&&(i.flooded=$.flooded!==void 0?$.flooded:i.flooded,i.collision=$.collision!==void 0?$.collision:i.collision,i.collision_severity=$.collision_severity!==void 0?$.collision_severity:i.collision_severity,i.notes=$.notes!==void 0?$.notes:i.notes,l.value&&$.notes!==void 0&&l.value.innerHTML!==$.notes&&(l.value.innerHTML=$.notes))},{deep:!0,immediate:!0}),be([()=>i.flooded,()=>i.collision,()=>i.collision_severity,()=>i.notes],()=>{te()},{deep:!0}),($,f)=>(s(),o("div",lo,[f[21]||(f[21]=t("div",{class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[t("h4",{class:"text-base font-semibold text-indigo-700"}," Detail Kendaraan ")],-1)),t("div",ro,[f[10]||(f[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[me(" Apakah kendaraan pernah terkena banjir? "),t("span",{class:"text-red-500"},"*")],-1)),t("div",uo,[(s(),o(fe,null,ye(I,M=>t("label",{key:M.value,class:"cursor-pointer"},[xe(t("input",{type:"radio","onUpdate:modelValue":f[0]||(f[0]=ie=>i.flooded=ie),value:M.value,class:"hidden peer",onChange:Q},null,40,co),[[Me,i.flooded]]),t("div",{class:ae(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm scale-[0.98]":i.flooded===M.value,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":i.flooded!==M.value}])},E(M.label),3)])),64))])]),t("div",po,[f[12]||(f[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[me(" Apakah kendaraan pernah mengalami tabrakan? "),t("span",{class:"text-red-500"},"*")],-1)),t("div",mo,[(s(),o(fe,null,ye(D,M=>t("label",{key:M.value,class:"cursor-pointer"},[xe(t("input",{type:"radio","onUpdate:modelValue":f[1]||(f[1]=ie=>i.collision=ie),value:M.value,class:"hidden peer",onChange:Q},null,40,go),[[Me,i.collision]]),t("div",{class:ae(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm scale-[0.98]":i.collision===M.value,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":i.collision!==M.value}])},E(M.label),3)])),64))]),he(Ce,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-2","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-2"},{default:ke(()=>[i.collision==="yes"?(s(),o("div",vo,[f[11]||(f[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[me("Tingkat kerusakan: "),t("span",{class:"text-red-500"},"*")],-1)),t("div",ho,[(s(),o(fe,null,ye(O,M=>t("label",{key:M.value,class:"cursor-pointer"},[xe(t("input",{type:"radio","onUpdate:modelValue":f[2]||(f[2]=ie=>i.collision_severity=ie),value:M.value,class:"hidden peer",onChange:Q},null,40,fo),[[Me,i.collision_severity]]),t("div",{class:ae(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-blue-500 bg-blue-100 text-blue-700 shadow-sm scale-[0.98]":i.collision_severity===M.value,"border-gray-300 text-gray-700 hover:bg-white hover:border-gray-400":i.collision_severity!==M.value}])},E(M.label),3)])),64))])])):u("",!0)]),_:1})]),t("div",bo,[t("div",yo,[f[14]||(f[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"Catatan Kesimpulan",-1)),t("button",{type:"button",onClick:f[3]||(f[3]=M=>v.value=!v.value),class:"flex items-center gap-2 px-3 py-2 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all duration-200"},f[13]||(f[13]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),me(" Template ")]))]),he(Ce,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 transform scale-95","enter-to-class":"opacity-100 transform scale-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-95"},{default:ke(()=>[v.value?(s(),o("div",wo,[t("div",xo,[f[16]||(f[16]=t("h5",{class:"text-sm font-semibold text-gray-700"},"Pilih Template Kesimpulan",-1)),t("button",{onClick:f[4]||(f[4]=M=>v.value=!1),class:"text-gray-400 hover:text-gray-600"},f[15]||(f[15]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",ko,[(s(!0),o(fe,null,ye(w.value,M=>(s(),o("button",{key:M.id,onClick:ie=>H(M),class:"p-3 text-left border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-150"},[t("div",Ao,E(M.name),1),t("div",$o,E(M.description),1)],8,Io))),128))])])):u("",!0)]),_:1}),t("div",So,[t("button",{type:"button",onClick:f[5]||(f[5]=M=>h("bold")),class:ae(["p-2 rounded transition-all duration-150 ease-in-out font-medium",d.bold?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Bold"},f[17]||(f[17]=[t("strong",null,"B",-1)]),2),t("button",{type:"button",onClick:f[6]||(f[6]=M=>h("italic")),class:ae(["p-2 rounded transition-all duration-150 ease-in-out font-medium",d.italic?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Italic"},f[18]||(f[18]=[t("em",null,"I",-1)]),2),t("button",{type:"button",onClick:f[7]||(f[7]=M=>h("underline")),class:ae(["p-2 rounded transition-all duration-150 ease-in-out font-medium",d.underline?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Underline"},f[19]||(f[19]=[t("u",null,"U",-1)]),2),t("button",{type:"button",onClick:f[8]||(f[8]=M=>T()),class:"p-2 rounded transition-all duration-150 ease-in-out hover:bg-gray-200 hover:shadow-sm ml-2",title:"Clear Template"}," 🗑️ Clear ")]),he(Ce,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 transform -translate-y-1","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-1"},{default:ke(()=>[Object.values(d).some(M=>M)?(s(),o("div",No,[f[20]||(f[20]=me(" Format aktif: ")),d.bold?(s(),o("span",To,"Bold")):u("",!0),d.italic?(s(),o("span",_o,"Italic")):u("",!0),d.underline?(s(),o("span",Co,"Underline")):u("",!0)])):u("",!0)]),_:1}),t("div",{ref_key:"editorRef",ref:l,contenteditable:"true",class:ae(["w-full min-h-[120px] p-3 rounded-md border border-gray-300 shadow-sm transition-all duration-200 ease-in-out prose max-w-none",{"bg-white border-gray-300":!c.value,"bg-blue-50 border-indigo-500 ring-2 ring-indigo-200":c.value}]),onInput:f[9]||(f[9]=(...M)=>Ae(k)&&Ae(k)(...M)),onBlur:z,onFocus:L,onKeydown:vt(n,["enter"]),onPaste:U,onMouseup:y,onKeyup:y,placeholder:"Tambahkan catatan kesimpulan inspeksi di sini..."},null,34)])]))}},Lo=Ie(Eo,[["__scopeId","data-v-b366fe44"]]);export{as as B,Bo as C,Do as V,ut as _,Lo as a};
