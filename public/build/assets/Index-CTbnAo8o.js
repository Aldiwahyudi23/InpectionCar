import{f as o,o as n,d as e,g as _,x as R,b as O,w as v,e as l,i as y,u as i,l as K,F as q,k as E,t as a,S as k,j as c,v as J,y as U}from"./vendor-DFzpKJ7b.js";import{A as G}from"./AppLayout-DJByEBEM.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as W,C as I}from"./CalendarDaysIcon-CQ8XEG3f.js";function X(u,x){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function Y(u,x){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Z(u,x){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const ee={class:"py-2 md:py-10"},te={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},se={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2"},ae={class:"p-4 flex justify-between items-start"},ne={class:"flex items-center mb-1"},oe={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},re={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},ie={class:"flex items-center"},de={class:"text-sm font-medium text-gray-800"},le={key:0},ce={class:"text-gray-600"},ue={key:1},me={class:"flex items-center mt-2"},pe={class:"text-sm font-bold text-gray-900"},xe={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},ge={class:"text-sm text-gray-800"},ye={class:"p-4 flex space-x-2"},_e=["onClick"],ve=["onClick"],fe={key:1,class:"text-center py-8"},be={class:"text-center mt-6"},he={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},we={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},ke={class:"p-6"},Ie={class:"flex items-start mb-4"},Ce={key:0},Me={class:"font-medium text-gray-800"},je={class:"text-sm text-gray-600"},$e={class:"text-gray-500"},Be={key:1,class:"text-sm font-medium text-gray-800"},Le={class:"flex items-center mt-2"},De={class:"text-base font-bold text-gray-900"},Se={class:"text-gray-600 mb-6"},Te={key:0,class:"font-semibold text-gray-800"},He={class:"flex justify-end space-x-3"},Re=["disabled"],Ae={key:0},Fe={key:1},Ne={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},Ve={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},Pe={class:"p-6"},ze={class:"flex items-center justify-between mb-4"},Oe={class:"flex items-start mb-4"},Ke={key:0},qe={class:"font-medium text-gray-800"},Ee={class:"text-sm text-gray-600"},Je={class:"text-gray-500"},Ue={key:1,class:"text-sm font-medium text-gray-800"},Ge={class:"flex items-center mt-2"},Qe={class:"text-base font-bold text-gray-900"},We={class:"mb-6"},Xe={key:0,class:"text-red-500 text-sm mt-1"},Ye={class:"flex justify-end space-x-3"},Ze=["disabled"],et={key:0},tt={key:1},st={__name:"Index",props:{tasks:Array,encryptedIds:Object},setup(u){const x=u,f=_(!1),b=_(!1),t=_(null),m=_(""),h=R({}),A=d=>{t.value=d,f.value=!0},F=d=>{t.value=d,b.value=!0},g=()=>{f.value=!1,b.value=!1,m.value=""},p=R({reason:""}),N=()=>{t.value&&(p.reason=m.value,p.post(route("inspections.cancel",{inspection:x.encryptedIds[t.value.id]}),{onSuccess:()=>{g(),m.value=""}}))},V=()=>{t.value&&h.get(route("inspections.start",{inspection:x.encryptedIds[t.value.id]}),{onFinish:()=>{g()}})},w=d=>{switch(d){case"draft":return"Mulai Inspeksi";case"in_progress":return"Lanjutkan Inspeksi";case"pending_review":return"Periksa Laporan";case"revision":return"Lanjutkan Revisi";case"pending":return"Ditunda => Lanjutkan Inspeksi";default:return"Detail"}},P=d=>{switch(d){case"draft":return"Memuat Halaman Inspeksi...";case"in_progress":return"Membuka Halaman Inspeksi...";case"pending_review":return"Memuat Halaman Review...";case"revision":return"Memual Halaman Revisi...";case"pending":return"Lanjutkan Inspeksi...";default:return"Detail"}};return(d,s)=>(n(),O(G,null,{default:v(()=>{var C,M,j,$,B,L,D,S,T,H;return[l(i(K),{title:"Tugas"}),e("div",ee,[e("div",te,[s[7]||(s[7]=e("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),u.tasks.length>0?(n(),o("div",se,[(n(!0),o(q,null,E(u.tasks,r=>(n(),o("div",{key:r.id,class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition"},[e("div",ae,[e("div",null,[e("div",ne,[l(i(W),{class:"h-5 w-5 text-blue-500 mr-2"}),s[1]||(s[1]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",oe,a(new Date(r.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),l(i(k),{href:d.route("inspection.log",{inspection:u.encryptedIds[r.id]}),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:v(()=>s[2]||(s[2]=[c(" Lihat Log ")])),_:2,__:[2]},1032,["href"])]),e("div",re,[e("div",ie,[l(i(I),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",de,[r.car?(n(),o("div",le,[c(a(`${r.car.brand.name} ${r.car.model.name} ${r.car.type.name} ${r.car.cc} ${r.car.transmission} ${r.car.year}`)+" ",1),e("span",ce,"("+a(r.car.fuel_type)+")",1)])):(n(),o("div",ue,a(r.car_name),1))])]),e("div",me,[s[3]||(s[3]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),e("span",pe,a(r.plate_number),1)])]),r.category?(n(),o("div",xe,[s[4]||(s[4]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"},"Kategori Inspek",-1)),e("p",ge,a(r.category.name),1)])):y("",!0),e("div",ye,[e("button",{onClick:z=>F(r),class:"flex-6 px-3 py-2 bg-gray-200 text-gray-700 font-medium rounded-md text-sm hover:bg-gray-300 transition-colors"}," Batal ",8,_e),e("button",{onClick:z=>A(r),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors"},[c(a(w(r.status))+" ",1),l(i(X),{class:"ml-2 h-4 w-4"})],8,ve)])]))),128))])):(n(),o("div",fe,s[5]||(s[5]=[e("p",{class:"text-gray-500"},"Tidak ada tugas inspeksi yang tersedia.",-1)]))),e("div",be,[l(i(k),{href:d.route("inspections.history"),class:"inline-block px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-600 rounded-md hover:bg-blue-50"},{default:v(()=>s[6]||(s[6]=[c(" Lihat Inspeksi Lainnya ")])),_:1,__:[6]},8,["href"])])])]),l(i(k),{href:d.route("inspections.create.new"),class:"fixed bottom-24 right-6 z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white rounded-full transition-colors duration-200 animate-bounce",title:"Buat Inspeksi Baru"},{default:v(()=>[l(i(Y),{class:"h-6 w-6"})]),_:1},8,["href"]),f.value?(n(),o("div",he,[e("div",we,[e("div",ke,[s[10]||(s[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Konfirmasi",-1)),e("div",Ie,[l(i(I),{class:"h-8 w-8 text-blue-500 mr-3 mt-1"}),e("div",null,[(C=t.value)!=null&&C.car?(n(),o("div",Ce,[e("p",Me,a(`${t.value.car.brand.name} ${t.value.car.model.name} ${t.value.car.type.name}`),1),e("p",je,[c(a(t.value.car.cc)+" • "+a(t.value.car.transmission)+" • "+a(t.value.car.year)+" ",1),e("span",$e,"("+a(t.value.car.fuel_type)+")",1)])])):(n(),o("div",Be,a((M=t.value)==null?void 0:M.car_name),1)),e("div",Le,[s[8]||(s[8]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",De,a((j=t.value)==null?void 0:j.plate_number),1)])])]),e("p",Se,[c(" Anda yakin ingin "+a(w(($=t.value)==null?void 0:$.status).toLowerCase())+" inspeksi ini ",1),(B=t.value)!=null&&B.category?(n(),o("span",Te," berdasarkan Type Inspek: "+a(t.value.category.name),1)):y("",!0),s[9]||(s[9]=c("? "))]),e("div",He,[e("button",{onClick:g,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{onClick:V,type:"button",disabled:i(h).processing,class:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white border border-transparent rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[i(h).processing?(n(),o("span",Ae,a(P((L=t.value)==null?void 0:L.status)),1)):(n(),o("span",Fe,a(w((D=t.value)==null?void 0:D.status)),1))],8,Re)])])])])):y("",!0),b.value?(n(),o("div",Ne,[e("div",Ve,[e("div",Pe,[e("div",ze,[s[11]||(s[11]=e("h3",{class:"text-lg font-medium text-gray-900"},"Batalkan Inspeksi",-1)),e("button",{onClick:g,class:"text-gray-400 hover:text-gray-600"},[l(i(Z),{class:"h-6 w-6"})])]),e("div",Oe,[l(i(I),{class:"h-8 w-8 text-red-500 mr-3 mt-1"}),e("div",null,[(S=t.value)!=null&&S.car?(n(),o("div",Ke,[e("p",qe,a(`${t.value.car.brand.name} ${t.value.car.model.name} ${t.value.car.type.name}`),1),e("p",Ee,[c(a(t.value.car.cc)+" • "+a(t.value.car.transmission)+" • "+a(t.value.car.year)+" ",1),e("span",Je,"("+a(t.value.car.fuel_type)+")",1)])])):(n(),o("div",Ue,a((T=t.value)==null?void 0:T.car_name),1)),e("div",Ge,[s[12]||(s[12]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",Qe,a((H=t.value)==null?void 0:H.plate_number),1)])])]),e("div",We,[s[13]||(s[13]=e("label",{for:"cancelReason",class:"block text-sm font-medium text-gray-700 mb-2"}," Alasan Pembatalan * ",-1)),J(e("textarea",{id:"cancelReason","onUpdate:modelValue":s[0]||(s[0]=r=>m.value=r),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan alasan pembatalan inspeksi...",required:""},null,512),[[U,m.value]]),i(p).errors.reason?(n(),o("p",Xe,a(i(p).errors.reason),1)):y("",!0)]),e("div",Ye,[e("button",{onClick:g,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Tutup "),e("button",{onClick:N,disabled:!m.value.trim()||i(p).processing,class:"px-4 py-2 bg-red-600 text-white border border-transparent rounded-md text-sm font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"},[i(p).processing?(n(),o("span",et,"Memproses...")):(n(),o("span",tt,"Batalkan Inspeksi"))],8,Ze)])])])])):y("",!0)]}),_:1}))}},it=Q(st,[["__scopeId","data-v-2167fda8"]]);export{it as default};
