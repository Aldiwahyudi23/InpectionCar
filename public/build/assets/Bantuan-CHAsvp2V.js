import{R as P,Q as ke,r as S,q as we,W as Te,g as je,D,j as Ce,o as f,w as Se,k as Ie,d as a,c as v,b as I,u as A,v as qe,z as Le,A as Oe,F as ne,m as ie,t as M,n as Re,f as Me,y as $}from"./vendor-lhzHoW6A.js";import{A as Ee}from"./AppLayout-B8aVOUmv.js";import"./app-Da3-dAnJ.js";var V,oe;function ye(){if(oe)return V;oe=1;function i(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}return V=i,V}var F,se;function Be(){if(se)return F;se=1;var i=typeof P=="object"&&P&&P.Object===Object&&P;return F=i,F}var W,ae;function xe(){if(ae)return W;ae=1;var i=Be(),r=typeof self=="object"&&self&&self.Object===Object&&self,o=i||r||Function("return this")();return W=o,W}var z,le;function Ne(){if(le)return z;le=1;var i=xe(),r=function(){return i.Date.now()};return z=r,z}var H,ue;function Pe(){if(ue)return H;ue=1;var i=/\s/;function r(o){for(var l=o.length;l--&&i.test(o.charAt(l)););return l}return H=r,H}var U,ce;function $e(){if(ce)return U;ce=1;var i=Pe(),r=/^\s+/;function o(l){return l&&l.slice(0,i(l)+1).replace(r,"")}return U=o,U}var Q,de;function _e(){if(de)return Q;de=1;var i=xe(),r=i.Symbol;return Q=r,Q}var X,fe;function Ge(){if(fe)return X;fe=1;var i=_e(),r=Object.prototype,o=r.hasOwnProperty,l=r.toString,u=i?i.toStringTag:void 0;function y(g){var p=o.call(g,u),h=g[u];try{g[u]=void 0;var s=!0}catch{}var m=l.call(g);return s&&(p?g[u]=h:delete g[u]),m}return X=y,X}var J,ve;function De(){if(ve)return J;ve=1;var i=Object.prototype,r=i.toString;function o(l){return r.call(l)}return J=o,J}var K,ge;function Ae(){if(ge)return K;ge=1;var i=_e(),r=Ge(),o=De(),l="[object Null]",u="[object Undefined]",y=i?i.toStringTag:void 0;function g(p){return p==null?p===void 0?u:l:y&&y in Object(p)?r(p):o(p)}return K=g,K}var Y,me;function Ve(){if(me)return Y;me=1;function i(r){return r!=null&&typeof r=="object"}return Y=i,Y}var Z,be;function Fe(){if(be)return Z;be=1;var i=Ae(),r=Ve(),o="[object Symbol]";function l(u){return typeof u=="symbol"||r(u)&&i(u)==o}return Z=l,Z}var ee,pe;function We(){if(pe)return ee;pe=1;var i=$e(),r=ye(),o=Fe(),l=NaN,u=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,g=/^0o[0-7]+$/i,p=parseInt;function h(s){if(typeof s=="number")return s;if(o(s))return l;if(r(s)){var m=typeof s.valueOf=="function"?s.valueOf():s;s=r(m)?m+"":m}if(typeof s!="string")return s===0?s:+s;s=i(s);var x=y.test(s);return x||g.test(s)?p(s.slice(2),x?2:8):u.test(s)?l:+s}return ee=h,ee}var te,he;function ze(){if(he)return te;he=1;var i=ye(),r=Ne(),o=We(),l="Expected a function",u=Math.max,y=Math.min;function g(p,h,s){var m,x,_,w,b,T,k=0,E=!1,q=!1,O=!0;if(typeof p!="function")throw new TypeError(l);h=o(h)||0,i(s)&&(E=!!s.leading,q="maxWait"in s,_=q?u(o(s.maxWait)||0,h):_,O="trailing"in s?!!s.trailing:O);function L(d){var C=m,R=x;return m=x=void 0,k=d,w=p.apply(R,C),w}function B(d){return k=d,b=setTimeout(e,h),E?L(d):w}function N(d){var C=d-T,R=d-k,re=h-C;return q?y(re,_-R):re}function t(d){var C=d-T,R=d-k;return T===void 0||C>=h||C<0||q&&R>=_}function e(){var d=r();if(t(d))return n(d);b=setTimeout(e,N(d))}function n(d){return b=void 0,O&&m?L(d):(m=x=void 0,w)}function c(){b!==void 0&&clearTimeout(b),k=0,m=T=x=b=void 0}function j(){return b===void 0?w:n(r())}function G(){var d=r(),C=t(d);if(m=arguments,x=this,T=d,C){if(b===void 0)return B(T);if(q)return clearTimeout(b),b=setTimeout(e,h),L(T)}return b===void 0&&(b=setTimeout(e,h)),w}return G.cancel=c,G.flush=j,G}return te=g,te}var He=ze();const Ue=ke(He),Qe={class:"w-full px-4 sm:px-6 lg:px-6 py-6"},Xe={class:"space-y-4 bg-white rounded-xl shadow-md p-4 relative"},Je={class:"relative mb-4"},Ke={key:0,class:"space-y-4"},Ye=["onClick"],Ze={class:"text-lg md:text-xl font-semibold text-indigo-700"},et={key:0,class:"p-2 border-t border-gray-200"},tt={class:"text-gray-700 mb-4"},rt={key:0},nt=["onClick"],it=["innerHTML"],ot={key:2,class:"mt-4"},st=["src","onClick"],at={key:0,class:"mt-2"},lt={class:"space-y-4"},ut={class:"flex justify-between items-start"},ct={class:"font-medium text-gray-800"},dt=["onClick"],ft=["innerHTML"],vt={key:1,class:"text-gray-600 mt-2"},gt={key:2,class:"mt-2"},mt=["src","onClick"],bt={key:1},pt={key:1,class:"text-center py-12"},ht={class:"relative max-w-full max-h-full flex items-center justify-center"},yt=["src"],wt={__name:"Bantuan",props:{components:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(i){const r=i,o=S(r.filters.search||""),l=S(null),u=S(null),y=S([]),g=S({}),p=S({}),h=(t,e)=>{e&&(g.value[t]=e)},s=(t,e)=>{e&&(p.value[t]=e)},m=S(!1),x=S(""),_=t=>{if(!t)return"";const e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText||""},w=(t,e)=>t?t.length<=e?t:t.substring(0,e)+"...":"",b=t=>t.inspection_point&&t.inspection_point.length>0,T=t=>{if(!o.value||!b(t))return t.inspection_point||[];const e=o.value.toLowerCase();return t.inspection_point.filter(n=>n.name.toLowerCase().includes(e)||_(n.description).toLowerCase().includes(e))},k=we(()=>{if(!o.value)return r.components;const t=o.value.toLowerCase();return r.components.filter(e=>{const n=e.name.toLowerCase().includes(t)||_(e.description).toLowerCase().includes(t),c=b(e)&&e.inspection_point.some(j=>j.name.toLowerCase().includes(t)||_(j.description).toLowerCase().includes(t));return n||c})}),E=async t=>{if(l.value===t)l.value=null;else{l.value=t,u.value=null,await D();const e=g.value[t];e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},q=async t=>{if(u.value===t)u.value=null;else{u.value=t,await D();const e=p.value[t];e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},O=t=>{y.value.includes(t)||y.value.push(t)},L=t=>{x.value=t,m.value=!0},B=()=>{m.value=!1,x.value=""},N=Ue(()=>{Te.get("/bantuan",{search:o.value},{preserveState:!0,replace:!0})},300);return je(async()=>{if(o.value&&k.value.length>0){l.value=k.value[0].id,await D();const t=g.value[l.value];t&&t.scrollIntoView({behavior:"smooth",block:"start"})}}),(t,e)=>(f(),Ce(Ee,{title:"Pusat Bantuan"},{default:Se(()=>[Ie(A(qe),{title:"Pusat Bantuan"}),a("div",Qe,[a("div",Xe,[e[7]||(e[7]=a("div",{class:"flex justify-between items-center mb-4"},[a("h1",{class:"text-xl md:text-3xl font-bold text-gray-900 text-center flex-grow"}," Pusat Bantuan ")],-1)),a("div",Je,[e[2]||(e[2]=a("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[a("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),Le(a("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.value=n),type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Cari komponen, inspection point, atau deskripsi...",onInput:e[1]||(e[1]=(...n)=>A(N)&&A(N)(...n))},null,544),[[Oe,o.value]])]),k.value.length>0?(f(),v("div",Ke,[(f(!0),v(ne,null,ie(k.value,n=>(f(),v("div",{key:n.id,ref_for:!0,ref:c=>h(n.id,c),class:"bg-white rounded-xl shadow-md overflow-hidden component-item"},[a("div",{class:"p-2 flex justify-between items-center cursor-pointer bg-indigo-50 hover:bg-indigo-100 transition-colors",onClick:c=>E(n.id)},[a("h2",Ze,M(n.name),1),(f(),v("svg",{class:Re([{"rotate-180":l.value===n.id},"h-5 w-5 text-indigo-600 transform transition-transform"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[3]||(e[3]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],8,Ye),l.value===n.id?(f(),v("div",et,[a("div",tt,[n.description&&!y.value.includes(n.id)?(f(),v("div",rt,[Me(M(w(_(n.description),300))+" ",1),_(n.description).length>300?(f(),v("button",{key:0,onClick:$(c=>O(n.id),["stop"]),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium ml-1"}," Selengkapnya ",8,nt)):I("",!0)])):I("",!0),y.value.includes(n.id)?(f(),v("div",{key:1,class:"prose max-w-none text-gray-700",innerHTML:n.description},null,8,it)):I("",!0),n.file_path?(f(),v("div",ot,[a("img",{src:`/storage/${n.file_path}`,alt:"Component Image",class:"w-full h-auto rounded-lg shadow-md cursor-pointer",onClick:$(c=>L(`/storage/${n.file_path}`),["stop"])},null,8,st)])):I("",!0)]),b(n)?(f(),v("div",at,[e[4]||(e[4]=a("h3",{class:"text-lg font-medium text-gray-800 mb-2"},"Point:",-1)),a("div",lt,[(f(!0),v(ne,null,ie(T(n),c=>(f(),v("div",{key:c.id,ref_for:!0,ref:j=>s(c.id,j),class:"bg-gray-50 rounded-lg p-4 border border-gray-200 point-item"},[a("div",ut,[a("h4",ct,M(c.name),1),a("button",{onClick:j=>q(c.id),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"},M(u.value===c.id?"Sembunyikan":"Selengkapnya"),9,dt)]),u.value===c.id?(f(),v("div",{key:0,class:"text-gray-600 mt-2 prose max-w-none",innerHTML:c.notes},null,8,ft)):(f(),v("div",vt,M(w(_(c.description),200)),1)),u.value===c.id&&c.file_path?(f(),v("div",gt,[a("img",{src:`/storage/${c.file_path}`,alt:"Inspection Point Image",class:"w-full h-auto rounded-lg shadow-md cursor-pointer",onClick:$(j=>L(`/storage/${c.file_path}`),["stop"])},null,8,mt)])):I("",!0)]))),128))])])):n.inspection_point&&n.inspection_point.length===0?(f(),v("div",bt,e[5]||(e[5]=[a("p",{class:"text-gray-500 italic"},"Tidak ada inspection points untuk komponen ini.",-1)]))):I("",!0)])):I("",!0)]))),128))])):(f(),v("div",pt,e[6]||(e[6]=[a("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),a("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"Tidak ada hasil ditemukan",-1),a("p",{class:"mt-1 text-gray-500"},"Coba dengan kata kunci pencarian yang berbeda.",-1)])))])]),m.value?(f(),v("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-90",onClick:B},[a("div",ht,[a("button",{onClick:$(B,["stop"]),class:"absolute top-4 right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 transition-colors"},e[8]||(e[8]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),a("img",{src:x.value,alt:"Full-screen image",class:"max-w-full max-h-full object-contain"},null,8,yt)])])):I("",!0)]),_:1}))}};export{wt as default};
