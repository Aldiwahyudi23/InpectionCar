import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as L,q as B,f as o,o as a,i as c,d as t,t as d,F as p,k,n as K}from"./vendor-DFzpKJ7b.js";const V={class:"p-6 bg-white"},z={key:0,class:"mt-2 mb-6"},J={key:1},Q={class:"header flex flex-col gap-5 mb-6 mt-6"},W={class:"flex items-center gap-5"},X=["src"],Y={key:1,class:"w-40 h-40 border border-gray-300 flex items-center justify-center"},Z={class:"mt-8"},ee={class:"text-xl font-bold m-0"},te={key:0,class:"car-info"},se={class:"w-full border-collapse border border-gray-300"},oe={class:"p-2 border border-gray-300"},ae={class:"p-2 border border-gray-300"},re={class:"p-2 border border-gray-300"},ne={class:"p-2 border border-gray-300"},ie={class:"p-2 border border-gray-300"},de={class:"p-2 border border-gray-300"},le={class:"p-2 border border-gray-300"},ue={class:"p-2 border border-gray-300"},ce={class:"p-2 border border-gray-300"},ge={key:1,class:"conclusion p-4 bg-gray-50 border-l-4 border-gray-800 rounded"},be={class:"m-0"},me={class:"component-title bg-gray-100 px-3 py-2 border-l-4 border-gray-800 font-bold"},ye={key:0,class:"images flex flex-wrap gap-2 mt-4"},pe=["src"],fe={key:1,class:"w-28 h-28 border border-gray-300 rounded flex items-center justify-center"},he={class:"point-name inline-block min-w-40 font-bold align-top"},ke={class:"point-content inline-block w-calc-[100%-170px] align-top"},ve={key:1,class:"point-note italic text-gray-600 my-1"},xe={key:0,class:"inspection-images flex flex-wrap gap-2 mt-4"},we=["src"],_e={key:1,class:"w-20 h-20 border border-gray-300 rounded flex items-center justify-center"},je={key:1,class:"textarea-note italic text-gray-600 my-2"},Ie={key:2,class:"flex flex-col items-center justify-center h-96 text-center"},Fe=["href"],De={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center"},Ce={class:"bg-white p-6 rounded-lg shadow-xl w-96"},Te={class:"flex justify-end space-x-4"},Se=["disabled"],Oe={key:0},Pe={key:1},Le={key:1,class:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700"},Be={__name:"ReviewPDF",props:{inspection:{type:Object,required:!0},inspection_points:{type:Array,default:()=>[]},coverImage:{type:Object,default:null},encryptedIds:Object},setup(r){const f=r,v=L(!1),x=L(!1),M=B(()=>{const s={};return f.inspection_points.forEach(e=>{var l;const n=((l=e.component)==null?void 0:l.name)||"Tanpa Komponen";s[n]||(s[n]=[]),s[n].push(e)}),s}),N=()=>{x.value=!0,setTimeout(()=>{window.location.href=route("inspections.download.pdf",f.encryptedIds),x.value=!1,v.value=!1},2e3)},R=B(()=>{if(f.inspection.notes)return!0;const s=f.inspection_points.some(n=>n.results&&n.results.length>0||n.images&&n.images.length>0),e=f.coverImage&&f.coverImage.image_path;return s||e}),F=s=>s&&s.length>0,D=s=>`/${s}`,w=s=>s.results&&s.results.length>0,C=s=>s.images&&s.images.length>0,T=s=>w(s)&&s.results[0].note,$=s=>{const e=s.input_type||"";return["radio","imageTOradio"].includes(e)&&w(s)&&s.results[0].status},A=s=>{const e=s.input_type||"";return["text","number","date","textarea"].includes(e)&&T(s)},E=s=>{var u,m,h;const e=s.input_type||"",n=s.settings||{},l=((u=s.results)==null?void 0:u[0])||{},b=((h=(((m=n.radios)==null?void 0:m.find(_=>_.value===l.status))||{}).settings)==null?void 0:h.show_image_upload)||!1;return(e==="image"||e==="imageTOradio"||e==="radio"&&b)&&C(s)},G=s=>{var g,b,u;const e=s.settings||{},n=((g=s.results)==null?void 0:g[0])||{};return((u=(((b=e.radios)==null?void 0:b.find(m=>m.value===n.status))||{}).settings)==null?void 0:u.show_textarea)||!1},U=s=>{if(!s)return"status-warning";const e=s.toLowerCase();return["normal","ada","baik","good","ok"].includes(e)?"status-good":["tidak normal","tidak ada","rusak","bad","not ok"].includes(e)?"status-bad":"status-warning"},q=s=>{var g;const e=s.input_type||"",n=((g=s.results)==null?void 0:g[0])||{},l=s.settings||{};if(e==="account"&&n.note){const b=l.currency_symbol||"Rp",u=l.thousands_separator||".",m=l.decimal_separator||",";return`${b} ${Number(n.note).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:2}).replace(/,/g,m).replace(/\./g,u)}`}return n.note};return(s,e)=>{var n,l,g,b,u,m,h,_,S,O,P;return a(),o("div",V,[r.inspection.status==="pending_review"?(a(),o("div",z,[t("button",{onClick:e[0]||(e[0]=j=>v.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," Setujui Laporan "),e[2]||(e[2]=t("p",{class:"text-sm text-gray-500 mt-2 italic"}," Catatan: Halaman ini hanya simulasi dan mungkin berbeda dengan tampilan file PDF. Silakan periksa lebih detail untuk memastikan tidak ada kesalahan. Jika sudah yakin, silakan setujui untuk proses selanjutnya. ",-1))])):c("",!0),R.value?(a(),o("div",J,[t("div",Q,[t("div",W,[r.coverImage&&F(r.coverImage.image_path)?(a(),o("img",{key:0,src:D(r.coverImage.image_path),alt:"Foto Utama",class:"w-40 h-40 object-cover border border-gray-300"},null,8,X)):(a(),o("div",Y,e[3]||(e[3]=[t("span",null,"Gambar tidak tersedia",-1)]))),t("div",Z,[t("h2",ee,d(r.inspection.car_name),1)])]),r.inspection.car_id?(a(),o("div",te,[t("table",se,[t("tr",null,[e[4]||(e[4]=t("td",{class:"p-2 border border-gray-300 font-bold w-1/3"},"Nomor Polisi",-1)),t("td",oe,d(r.inspection.plate_number),1)]),t("tr",null,[e[5]||(e[5]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Merek",-1)),t("td",ae,d((l=(n=r.inspection.car)==null?void 0:n.brand)==null?void 0:l.name),1)]),t("tr",null,[e[6]||(e[6]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Model",-1)),t("td",re,d((b=(g=r.inspection.car)==null?void 0:g.model)==null?void 0:b.name),1)]),t("tr",null,[e[7]||(e[7]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Tipe",-1)),t("td",ne,d((m=(u=r.inspection.car)==null?void 0:u.type)==null?void 0:m.name),1)]),t("tr",null,[e[8]||(e[8]=t("td",{class:"p-2 border border-gray-300 font-bold"},"CC",-1)),t("td",ie,d((h=r.inspection.car)==null?void 0:h.cc),1)]),t("tr",null,[e[9]||(e[9]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Bahan Bakar",-1)),t("td",de,d((_=r.inspection.car)==null?void 0:_.fuel_type),1)]),t("tr",null,[e[10]||(e[10]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Transmisi",-1)),t("td",le,d((S=r.inspection.car)==null?void 0:S.transmission),1)]),t("tr",null,[e[11]||(e[11]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Periode Model",-1)),t("td",ue,d(((O=r.inspection.car)==null?void 0:O.production_period)||"-"),1)]),t("tr",null,[e[12]||(e[12]=t("td",{class:"p-2 border border-gray-300 font-bold"},"Tahun Pembuatan",-1)),t("td",ce,d((P=r.inspection.car)==null?void 0:P.year),1)])])])):c("",!0),r.inspection.notes?(a(),o("div",ge,[e[13]||(e[13]=t("h3",{class:"text-lg font-bold mb-2"},"Kesimpulan Inspeksi:",-1)),t("p",be,d(r.inspection.notes),1)])):c("",!0)]),e[16]||(e[16]=t("h2",{class:"text-xl font-bold border-b-2 border-gray-800 pb-2 mb-6"},"Hasil Inspeksi",-1)),(a(!0),o(p,null,k(M.value,(j,I)=>(a(),o("div",{key:I,class:K(["section mb-6",I==="Foto Kendaraan"?"photo-component":""])},[t("div",me,d(I||"Tanpa Komponen"),1),I==="Foto Kendaraan"?(a(),o("div",ye,[(a(!0),o(p,null,k(j,i=>(a(),o("div",{key:i.id},[(a(!0),o(p,null,k(i.images,y=>(a(),o("div",{key:y.id,class:"image-container"},[F(y.image_path)?(a(),o("img",{key:0,src:D(y.image_path),alt:"Foto Kendaraan",class:"w-28 h-28 object-cover border border-gray-300 rounded"},null,8,pe)):(a(),o("div",fe,e[14]||(e[14]=[t("span",{class:"text-xs"},"Gambar tidak ditemukan",-1)])))]))),128))]))),128))])):(a(!0),o(p,{key:1},k(j,i=>(a(),o("div",{key:i.id,class:"point ml-4 py-3 border-b border-gray-100"},[w(i)||C(i)?(a(),o(p,{key:0},[t("span",he,d(i.name||"-"),1),t("div",ke,[w(i)?(a(),o(p,{key:0},[$(i)?(a(),o("span",{key:0,class:K(["status-badge",U(i.results[0].status)])},d(i.results[0].status),3)):c("",!0),A(i)?(a(),o("div",ve,d(q(i)),1)):c("",!0)],64)):c("",!0)]),E(i)?(a(),o("div",xe,[(a(!0),o(p,null,k(i.images,y=>(a(),o("div",{key:y.id,class:"image-container"},[F(y.image_path)?(a(),o("img",{key:0,src:D(y.image_path),alt:"image",class:"w-20 h-20 object-cover border border-gray-300 rounded"},null,8,we)):(a(),o("div",_e,e[15]||(e[15]=[t("span",{class:"text-xs"},"Gambar tidak ditemukan",-1)])))]))),128))])):c("",!0),G(i)&&T(i)?(a(),o("div",je,d(i.results[0].note),1)):c("",!0)],64)):c("",!0)]))),128))],2))),128))])):(a(),o("div",Ie,[e[17]||(e[17]=t("p",{class:"text-lg font-semibold text-gray-700"}," Data sudah tidak ada, karena sudah dijadikan PDF. ",-1)),t("a",{href:s.route("inspections.download.pdf",r.encryptedIds),class:"mt-4 inline-block bg-blue-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," Download PDF ",8,Fe)])),v.value?(a(),o("div",De,[t("div",Ce,[e[19]||(e[19]=t("h3",{class:"text-lg font-bold mb-4"},"Konfirmasi Laporan",-1)),e[20]||(e[20]=t("p",{class:"text-gray-700 mb-6"}," Apakah Anda yakin semua data sudah sesuai? Setelah disetujui, laporan akan diproses menjadi file PDF. ",-1)),t("div",Te,[t("button",{onClick:e[1]||(e[1]=j=>v.value=!1),class:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400"}," Batal "),r.inspection.file?(a(),o("button",Le,e[18]||(e[18]=[t("span",null,"Laporan sudah di buat",-1)]))):(a(),o("button",{key:0,onClick:N,class:"bg-sky-600 text-white px-4 py-2 rounded hover:bg-sky-700",disabled:x.value},[x.value?(a(),o("span",Oe,"Membuat file PDF...")):(a(),o("span",Pe,"Setujui Laporan"))],8,Se))])])])):c("",!0)])}}},Ne=H(Be,[["__scopeId","data-v-cefaeaca"]]);export{Ne as default};
